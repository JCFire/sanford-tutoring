define("layout/util/dataPreparationsForAnchors",["lodash","coreUtils","experiment"],function(a,b,c){"use strict";var d=["WIX_ADS"];var e=5;function f(){return{flat:{},sortingY:{},minHeight:{},shrinkableContainer:{},ignoreOriginalValue:{},noHeightChange:{},containerHeightMargin:{},currentHeight:{},currentY:{},heightDiff:{},topDiff:{},locked:{},valueForFirstLockedAnchor:{}}}function g(a){return a.type==="Document"||a.componentType==="wysiwyg.viewer.components.PagesContainer"}function h(a,b,c){var d=a.id;if(a.layout&&a.layout.rotationInDegrees){b.noHeightChange[d]=true}if(c.shrinkableContainer[d]){b.shrinkableContainer[d]=true}else if(g(a,c)){b.ignoreOriginalValue[d]=true}}function i(a,c,d){return b.boundingLayout.getBoundingHeight({height:a,width:c,rotationInDegrees:d})}function j(a,c,d,e){return b.boundingLayout.getBoundingY({y:a,height:c,width:d,rotationInDegrees:e})}function k(a,b,d){var e=a.id;var f=a.layout?a.layout.rotationInDegrees:0;var g=d.height[e];var h;if(c.isOpen("sv_partialReLayout")||c.isOpen("layout_verbs_with_anchors")){h=d.top[e]}else{h=d.top&&d.top[e]!==undefined?d.top[e]:a.layout&&a.layout.y||0}b.currentHeight[a.id]=f?i(g,d.width[e],f):g;b.heightDiff[e]=b.currentHeight[a.id]-g;b.currentY[e]=f?j(h,g,d.width[e],f):h;b.topDiff[e]=h-b.currentY[e]}function l(c,d,e,f,g,i){if(!a.has(e.height,c.id)){return}h(c,d,e);k(c,d,e);d.minHeight[c.id]=m(c,d);d.currentHeight[c.id]=Math.max(d.currentHeight[c.id],d.minHeight[c.id]);if(d.collapsed[c.id]){d.currentHeight[c.id]=0}d.flat[c.id]=c;var j=d.currentY[c.id];var n=f+j-g;var o=d.currentHeight[c.id];d.sortingY[c.id]=n;d.valueForFirstLockedAnchor[c.id]={pusherId:null,value:-Number.MAX_VALUE};if(!d.collapsed[c.id]){var p=b.dataUtils.getChildrenData(c,i);a.forEach(p,function(a){l(a,d,e,n,o||5e3,i)})}}function m(a,b){var c=a.id;if(c&&!n(c)){return Math.max(b.minHeight[c]||0,e)}return b.minHeight[c]||0}function n(b){return b&&a.includes(d,b)}function o(a,b,c,d){l(a,b,c,0,0,d)}function p(a,b,c){return{distance:c,type:a,targetComponent:b,locked:true,notEnforcingMinValue:true}}function q(b,c,d,e){var f=b;if(!b.$cloned){f=a.clone(f);f.layout=a.clone(f.layout);f.layout.anchors=a.clone(f.layout.anchors);f.$cloned=true}var g=f.layout.anchors;g.push(p("TOP_TOP",c,d),p("BOTTOM_BOTTOM",c,e));return f}function r(b){a.forEach(b,function(c,d){if(!c.layout||!c.layout.anchors){return}var e=a.filter(c.layout.anchors,{type:"LOCK_BOTTOM"});if(a.isEmpty(e)){return}a.forEach(e,function(a){b[d]=q(b[d],a.targetComponent,a.topToTop,a.distance);b[a.targetComponent]=q(b[a.targetComponent],d,-1*a.topToTop,-1*a.distance)});a.remove(b[d].layout.anchors,{type:"LOCK_BOTTOM"})})}function s(b){var c=a.get(b,"components[0].componentType");return c==="wysiwyg.viewer.components.PopupContainer"}function t(b,c,d){var e=f();e.containerHeightMargin=c.containerHeightMargin||{};e.minHeight=a.clone(c.minHeight||{});e.collapsed=a.clone(c.collapsed||{});e.injectedAnchors=c.injectedAnchors||{};e.__isPopup=s(b);o(b,e,c,d);r(e.flat);var g=a.sortBy(a.keys(e.flat),function(a){return e.sortingY[a]});delete e.sortingY;return{structureData:e,sortedIds:g}}function u(b,c){a.forEach(c.flat,function(a,d){b.height[d]=c.currentHeight[d]-c.heightDiff[d];b.top[d]=c.currentY[d]+c.topDiff[d]})}function v(c,d,e,f){if(!a.has(c.height,f.id)){return 0}d=d||0;d+=c.top[f.id];var g=b.dataUtils.getChildrenData(f,e);g=a.reject(g,{layout:{fixedPosition:true}});return Math.max(d+c.height[f.id],Math.max.apply(null,a.map(g,a.partial(v,c,d,e))))}return{getDataForAnchorsAndSort:t,fixMeasureMap:u,maxMeasureMapHeight:v}});define("layout/util/anchors",["lodash","layout/util/dataPreparationsForAnchors","experiment"],function(a,b,c){"use strict";var d="TOP_TOP";var e="BOTTOM_TOP";var f="BOTTOM_BOTTOM";var g="BOTTOM_PARENT";var h=10;var i=["Page","Document"];var j={SITE_FOOTER:true,SITE_HEADER:true,SITE_PAGES:true,PAGES_CONTAINER:true,masterPage:true,SITE_BACKGROUND:true};var k={};function l(a,b,c,d){if(b!==c){d.dirty[a]=true}if(d.dirty[a]){d.changedCompsMap[a]=d.flat[a]}return d.dirty[a]}function m(b,c,d,e){var f=d[e.targetComponent];var g=d[c];if(e.notEnforcingMinValue&&!a.isEmpty(g)){e.notEnforcingMinValue=false}f[c]=b;var h=Math.max.apply(null,a.values(f));if(e.notEnforcingMinValue){delete f[c]}return h}function n(a,b,c,d,e){var f=a.targetComponent;var g=b.valueForFirstLockedAnchor[f];if(!g){return}if(a.locked||e===null){if(g.pusherId){c[f]={};c[f][g.pusherId]=g.value}delete b.valueForFirstLockedAnchor[f]}else{g.pusherId=d;g.value=Math.max(e,g.value)}}function o(a){return a%1}function p(a,b){var c=b-a;b-=o(c);return b}function q(b,c){return a.has(b.currentHeight,c)}k[d]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b)){return false}if(a.has(d.locked,e)){return false}var f=d.currentY[e];var g=d.currentY[b]+c.distance;n(c,d,d.toTopAnchorsY,b,null);g=m(g,b,d.toTopAnchorsY,c);g=p(f,g);d.currentY[e]=g;return l(e,f,g,d)};k[e]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b)){return false}if(a.has(d.locked,e)){return false}var f=d.currentY[e];var g=d.currentHeight[b]+d.currentY[b];var i=null;if(c.locked){g+=c.distance}else{i=g+h;g=d.valueForFirstLockedAnchor[e]?Math.max(g+h,c.originalValue):i}g=Math.max(g,d.currentY[b]+d.currentHeight[b]/2);n(c,d,d.toTopAnchorsY,b,i);g=m(g,b,d.toTopAnchorsY,c);g=p(f,g);d.currentY[e]=g;return l(e,f,g,d)};function r(a,b,c,d){var e;if(d.shrinkableContainer[c]){e=b}else if(a.locked){e=b+a.distance}else{e=b+h;if(!d.ignoreOriginalValue[c]){e=Math.max(e,a.originalValue)}}return e}function s(b,c,d,e){var f=b;if(a.isNumber(e.minHeight[c])&&b<e.minHeight[c]){f=e.minHeight[c];if(d.notEnforcingMinValue){d.notEnforcingMinValue=false;e.dirty[c]=true;e.changedCompsMap[c]=e.flat[c]}}return f}k[g]=function(b,c,d){var e=c.targetComponent;if(!q(d,e)||!q(d,b)){return false}if(a.has(d.locked,e)){return false}if(d.flat[e].layout&&d.flat[e].layout.rotationInDegrees){return false}var f=d.currentHeight[e];var g=d.currentHeight[b]+d.currentY[b];var h=d.containerHeightMargin[e]||0;var i=r(c,g+h,e,d);i=s(i,e,c,d);i=m(i,b,d.toBottomAnchorsHeight,c);d.currentHeight[e]=i;return l(e,f,i,d)};k[f]=function(b,c,d){if(d.ignoreBottomBottom){return false}var e=c.targetComponent;if(!q(d,e)||!q(d,b)){return false}if(a.has(d.locked,e)){return false}if(d.flat[e].layout&&d.flat[e].layout.rotationInDegrees){return false}var f=d.currentHeight[e];var g=d.currentHeight[b]+d.currentY[b];var h=d.currentY[e];var i=r(c,g-h,e,d);i=s(i,e,c,d);i=m(i,b,d.toBottomAnchorsHeight,c);d.currentHeight[e]=i;return l(e,f,i,d)};function t(a,b,c){if(a==="masterPage"){return[]}return c.injectedAnchors[a]||b[a]||[]}function u(b,c,d,e,f,g){var h=false;function i(b){var i=t(b,e,d);var l=Number.MAX_VALUE;if(d.dirty[b]&&(!f||j[b])){a.forEach(i,function(a){if(k[a.type]&&d.flat[a.targetComponent]&&(!f||j[a.targetComponent])){if(a.targetComponent===g){h=true}var e=k[a.type](b,a,d)?c[a.targetComponent]:Number.MAX_VALUE;l=Math.min(e,l)}})}d.dirty[b]=false;return l}var l=b.length;var m=0;while(m<l){var n=i(b[m]);m=Math.min(m+1,n)}return h}function v(d,e,f,g,h,j,k,l){var m=b.getDataForAnchorsAndSort(d,e,g);var n=m.structureData;var o=m.sortedIds;var p=a.invert(o);n.dirty={};n.toTopAnchorsY={};n.toBottomAnchorsHeight={};n.locked=j;n.changedCompsMap=n.flat;n.ignoreBottomBottom=!!l;a.forEach(n.flat,function(a,b){n.dirty[b]=true;n.toTopAnchorsY[b]={};n.toBottomAnchorsHeight[b]={}});if(k){n.dirty=a.clone(k);n.changedCompsMap=a.pick(n.flat,a.keys(k))}var q=u(o,p,n,f,h,d.id);b.fixMeasureMap(e,n);if((c.isOpen("sv_partialReLayout")||!q)&&a.includes(i,d.type)){e.height[d.id]=b.maxMeasureMapHeight(e,0,g,d);n.changedCompsMap[d.id]=n.flat[d.id]}return n.changedCompsMap}return{enforceAnchors:v,HARD_WIRED_COMPS:j}});define("layout/util/reduceDistancesAlgorithm/sortByAnchors",["lodash"],function(a){"use strict";function b(b,c){var d=a.reduce(b,function(b,d){var e=c[d.id];a.forEach(e,function(a){b[a.targetComponent]=true});return b},{});return a.filter(b,function(a){return!d[a.id]})}function c(b,c){return a.has(b,c)}function d(d,e){var f=a.reduce(d,function(a,b){a[b.id]=0;return a},{});function g(b,d){if(!c(f,b)){return}var h=a.max([f[b],d+1]);f[b]=h;var i=a.map(e[b],"targetComponent");a.forEach(i,function(a){g(a,h)})}var h=b(d,e);a.forEach(h,function(a){g(a.id,0)});return a.sortBy(d,function(a){return f[a.id]})}return d});define("layout/util/reduceDistancesAlgorithm/anchorsTypes",[],function(){"use strict";return{TOP_TOP:"TOP_TOP",BOTTOM_TOP:"BOTTOM_TOP",BOTTOM_PARENT:"BOTTOM_PARENT"}});define("layout/util/reduceDistancesAlgorithm/createAnchorsDataManager",["lodash","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(a,b){"use strict";var c={SITE_FOOTER:true,SITE_HEADER:true,SITE_PAGES:true,PAGES_CONTAINER:true,masterPage:true,SITE_BACKGROUND:true};function d(d,e,f,g){var h=a.flatten(a.values(d));var i={from:{},to:{}};var j={from:{},to:{}};function k(a){i.from[a.fromComp]=i.from[a.fromComp]||[];i.from[a.fromComp].push(a);i.to[a.targetComponent]=i.to[a.targetComponent]||[];i.to[a.targetComponent].push(a)}function l(b){if(g[b.targetComponent]){b=a.assign({},b,{locked:true,distance:0})}j.from[b.fromComp]=b;j.to[b.targetComponent]=j.to[b.targetComponent]||[];j.to[b.targetComponent].push(b)}function m(b){if(f){return c[b.fromComp]&&c[b.targetComponent]}return a.has(e,b.fromComp)&&a.has(e,b.targetComponent)}var n=a.filter(h,m);a.forEach(n,function(a){if(a.type===b.BOTTOM_PARENT){l(a)}else{k(a)}});return{anchors:n,siblingsAnchors:i,childToParentAnchors:j}}function e(b,c,e,f){var g=d(b,c,e,f);a.merge(this,{getComponentPushers:function(a){return g.siblingsAnchors.to[a]||[]},getComponentAnchorToParent:function(a){return g.childToParentAnchors.from[a]}})}return function a(b,c,d,f){return new e(b,c,d,f)}});define("layout/util/reduceDistancesAlgorithm/createMeasureMapManager",["lodash","coreUtils"],function(a,b){"use strict";var c=5;function d(a,c,d){return b.boundingLayout.getBoundingHeight({height:a,width:c,rotationInDegrees:d})}function e(a,c,d,e){return b.boundingLayout.getBoundingY({y:a,height:c,width:d,rotationInDegrees:e})}function f(b,c){return a(c).pickBy(function(b){return a.get(b,"layout.rotationInDegrees")}).mapValues(function(a,c){var f=b.top[c];var g=b.height[c];var h=b.width[c];var i=d(g,h,a.layout.rotationInDegrees);var j=e(f,g,h,a.layout.rotationInDegrees);return{heightDiff:i-g,yDiff:j-f}}).value()}function g(b,d){var e=b;var g=f(b,d);function h(b){return a.get(g,[b,"yDiff"],0)}function i(b){return a.get(g,[b,"heightDiff"],0)}a.merge(this,{get:function(){return e},getComponentTop:function(b){if(a.isUndefined(e.top[b])){return undefined}return e.top[b]+h(b)},getComponentHeight:function(b){if(a.isUndefined(e.height[b])){return undefined}if(e.collapsed[b]){return 0}return e.height[b]+i(b)},getComponentMinHeight:function(b){if(e.collapsed[b]){return 0}return a.max([e.minHeight[b],c])},getContainerHeightMargin:function(a){return e.containerHeightMargin[a]||0},isCollapsed:function(a){return Boolean(e.collapsed[a])},isShrinkableContainer:function(a){return Boolean(e.shrinkableContainer[a])},getComponentWidth:function(a){return e.width[a]},getSiteWidth:function(){return e.width.site},getClientSize:function(){return{width:e.clientWidth,height:e.clientHeight}},setComponentTop:function(a,b){e.top[a]=b-h(a)},setComponentHeight:function(a,b){e.height[a]=b-i(a)}})}return function a(b,c){return new g(b,c)}});define("layout/util/reduceDistancesAlgorithm/createOriginalValuesManager",["lodash"],function(a){"use strict";function b(b,c){a.merge(this,{getOriginalTop:function(d){var e=a.get(b,[d,"top"]);return e||c[d].y},getOriginalHeight:function(d){var e=a.get(b,[d,"height"]);return e||c[d].height}})}return function a(c,d){return new b(c,d)}});define("layout/util/reduceDistancesAlgorithm/generateEnforceData",["lodash","coreUtils","siteUtils","layout/util/reduceDistancesAlgorithm/sortByAnchors","layout/util/reduceDistancesAlgorithm/createAnchorsDataManager","layout/util/reduceDistancesAlgorithm/createMeasureMapManager","layout/util/reduceDistancesAlgorithm/createOriginalValuesManager"],function(a,b,c,d,e,f,g){"use strict";var h={ROOT:["masterPage","SITE_BACKGROUND"],masterPage:["SITE_HEADER","PAGES_CONTAINER","SITE_FOOTER"],PAGES_CONTAINER:["SITE_PAGES"]};function i(b){var c={};function d(b){c[b.id]=b;a.forEach(b.children,d)}d(b);return c}function j(c,e,f){var g=a.find(h.ROOT,function(a){return a===c.id});if(!g){return null}function i(c){var g=h[c.id];var j=b.dataUtils.getChildrenKey(c,f);var k=c[j];var l=a.omit(c,j);if(!g){l.children=[]}else{var m=a.reduce(k,function(b,c){if(a.includes(g,c.id)){b.push(i(c))}return b},[]);l.children=d(m,e)}return l}return i(c)}function k(c,e,f,g){function h(c){var i=b.dataUtils.getChildrenKey(c,g);var j=c[i];var k=a.omit(c,i);var l=Boolean(e.collapsed[c.id]);var m=l?[]:a(j).filter(function b(c){return a.has(e.height,c.id)}).map(h).value();k.children=d(m,f);return k}return h(c)}function l(a,b,c,d,e){if(d){return j(a,c,e)}return k(a,b,c,e)}function m(b,c,d,e){var f=a.get(d,[b.id,e]);return a.merge({},f,c.injectedAnchors)}function n(a,b,c,d){return e(a,d,c,b.shrinkableContainer)}function o(b,c,d,e){var f=a.get(c,[b.id,d]);return g(f,e)}function p(d,e){return a.mapValues(d,function(d){if(!d.layout){return undefined}var f=a.cloneDeep(d.layout);a.assign(f,b.boundingLayout.getBoundingLayout(d.layout));if(c.layout.isVerticallyStretchedToScreen(f)){f.isVerticallyStretchedToScreen=true;var g={width:e.clientWidth,height:e.clientHeight};var h=e.width.site;f.minHeight=c.positionAndSize.getHeightInPixelsRounded(d.layout,null,g,h);delete f.docked.top;delete f.docked.bottom}return f})}return function a(b,d,e,g,h,j,k){var q=h?c.constants.VIEW_MODES.MOBILE:c.constants.VIEW_MODES.DESKTOP;var r=m(b,d,e,q);var s=l(b,d,r,j,h);if(!s){return null}var t=i(s);var u=p(t,d);return{structure:s,flatDataMap:t,layoutsMap:u,measureMapManager:f(d,t),anchorsDataManager:n(r,d,j,t),originalValuesManager:o(b,g,q,u),lockedCompsMap:k||{}}}});define("layout/util/reduceDistancesAlgorithm/minHeightDataUtils",["lodash"],function(a){"use strict";function b(a){var b=a.absoluteHeight;if(a.topPercents||a.bottomPercents){var c=(a.topPercents||0)+(a.bottomPercents||0);var d=1-c/100;return Math.ceil(b/d)}return b}function c(b,c){return a.reduce(b,function(a,b){var d=Math.ceil(b.topPercents/100*c);var e=Math.ceil(b.bottomPercents/100*c);var f=d+b.absoluteHeight+e;if(f>a){return f}return a},c)}function d(a){return!a.topPercents&&!a.bottomPercents}function e(a,b,c){this.absoluteHeight=a||0;if(b){this.topPercents=b}if(c){this.bottomPercents=c}}e.prototype.clone=function(){return new e(this.absoluteHeight,this.topPercents,this.bottomPercents)};e.prototype.addAbsoluteHeight=function(a){this.absoluteHeight+=a;return this};e.prototype.addMinHeightData=function(a){this.absoluteHeight+=a.absoluteHeight;var b=(this.topPercents||0)+(a.topPercents||0);if(b){this.topPercents=b}var c=(this.bottomPercents||0)+(a.bottomPercents||0);if(c){this.bottomPercents=c}return this};function f(a,b,c){return new e(a,b,c)}function g(a){return new e(a.px,a.pct)}function h(a){return new e(a.px,null,a.pct)}function i(b){var c,d;if(a.isNumber(b.pct)){if(b.pct<0){d=Math.abs(b.pct)*2}else{c=b.pct*2}}return new e(Math.abs(b.px)*2,c,d)}function j(a,b){this.absoluteHeight=a;this.dynamicHeights=b}j.prototype.merge=function(a){this.dynamicHeights=this.dynamicHeights.concat(a.dynamicHeights);this.absoluteHeight=Math.max(this.absoluteHeight,a.absoluteHeight);return this};j.prototype.solve=function(){if(a.isEmpty(this.dynamicHeights)){return this.absoluteHeight}var d=Math.ceil(a(this.dynamicHeights).map(b).max());var e=Math.max(this.absoluteHeight,d);return c(this.dynamicHeights,e)};function k(b){var c=0;var e=[];a.forEach(b,function(a){if(d(a)){c=Math.max(c,a.absoluteHeight)}else{e.push(a)}});return new j(c,e)}return{createMinHeightData:f,createMinHeightDataForDockedTopData:g,createMinHeightDataForDockedBottomData:h,createMinHeightDataForVerticallyCenteredDockedData:i,createChainMinHeightData:k}});define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils",[],function(){"use strict";var a=10;return{getAnchorMinDistance:function(b){return b.locked?b.distance:a}}});define("layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight",["lodash","siteUtils","layout/util/reduceDistancesAlgorithm/minHeightDataUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(a,b,c,d,e){"use strict";function f(a){var d=b.layout.getTopDockData(a);if(d){return c.createMinHeightDataForDockedTopData(d)}return c.createMinHeightData(a.y)}function g(a,d,e){var g=c.createMinHeightData();var h=f(a);var i=b.layout.isDockedToDirection(a,"top");var j=d||i||!e||h.absoluteHeight<0;return j?h:g}function h(b,c,f){var g=f.type===e.TOP_TOP?0:c;var h=d.getAnchorMinDistance(f);return a.map(b,function(a){var b=g+h;return a.clone().addAbsoluteHeight(b)})}function i(e,f,i,j,k,l){var m={value:0,chainsMinHeightData:c.createChainMinHeightData(),isShrinkableContainer:false};var n={};function o(a,b){if(b&&b.locked){m.isShrinkableContainer=true}m.chainsMinHeightData.merge(a)}function p(a,b){var c=l[a];return{forNonDocked:[g(c,b,false)],forDocked:[g(c,b,true)]}}function q(b,d){var e=false;var f=[];var g=[];a.forEach(d,function(a){if(a.locked){e=true}var b=n[a.fromComp];var c=j[a.fromComp];f=f.concat(h(b.forDocked,c,a));g=g.concat(h(b.forNonDocked,c,a))});if(!e){var i=k.getOriginalTop(b);var l=c.createMinHeightData(i);g.push(l)}return{forDocked:f,forNonDocked:g}}function r(a){var e=b.layout.getBottomDockData(l[a]);var g;if(e){g=c.createMinHeightDataForDockedBottomData(e)}else{var h=f.getComponentAnchorToParent(a);g=c.createMinHeightData(d.getAnchorMinDistance(h))}var i=j[a];return g.clone().addAbsoluteHeight(i)}function s(b,d,f){var g=d?f.forDocked:f.forNonDocked;var h=r(b,e);var i=a.map(g,function(a){return a.clone().addMinHeightData(h)});return c.createChainMinHeightData(i)}function t(a,d){var e=b.layout.getVerticallyCenteredDockData(d);var f=j[a];var g=c.createMinHeightDataForVerticallyCenteredDockedData(e).addAbsoluteHeight(f);return c.createChainMinHeightData([g])}function u(b){var c=f.getComponentPushers(b);var d=a.isEmpty(c);var e=!!i[b];var g=d||e?p(b,e):q(b,c);return g}function v(a){var c=b.layout.isVerticallyCentered(l[a.id]);if(c){o(t(a.id,l[a.id]));return}var d=u(a.id);n[a.id]=d;var e=f.getComponentAnchorToParent(a.id);var g=!!e;var h=b.layout.isDockedToDirection(l[a.id],"bottom");var i=h||g;if(i){o(s(a.id,h,d),e)}}function w(){a.forEach(e.children,v);m.value=m.chainsMinHeightData.solve();delete m.chainsMinHeightData;return m}return w()}return function c(d,e,f,g,h,j){var k={};function l(a,b,c){var d=[];var f=j[a.id];if(!f){return d}var h=f.aspectRatio||0;var i=c||f.isVerticallyStretchedToScreen||h||e.isShrinkableContainer(a.id)||b&&b.isShrinkableContainer;if(h){var k=e.getComponentWidth(a.id);d.push(h*k)}if(b){d.push(b.value+e.getContainerHeightMargin(a.id));if(!i){var l=g.getOriginalHeight(a.id);d.push(l)}}if(i){var m=e.getComponentMinHeight(a.id);var n=f.minHeight||0;d.push(m,n)}return d}function m(b,c,d){if(d){if(c.length){e.setComponentHeight(b,a.max(c))}k[b]=e.getComponentHeight(b)}else{k[b]=c.length?a.max(c):0}}function n(a,c){if(e.isCollapsed(a.id)){e.setComponentHeight(a.id,0);k[a.id]=0;return}var d=b.layout.isVerticallyStretched(j[a.id]);var f=l(a,c,d);m(a.id,f,!d)}function o(a){return!e.isCollapsed(a)}function p(b){var c=b.children;var d;var e=h[b.id];if(!a.isEmpty(c)&&o(b.id)){a.forEach(c,p);if(!e){d=i(b,f,h,k,g,j)}}n(b,d)}p(d)}});define("layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking",["lodash","siteUtils","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithmUtils","layout/util/reduceDistancesAlgorithm/anchorsTypes"],function(a,b,c,d){"use strict";function e(a,c,d){var e=d.getComponentHeight(c);var f=d.getComponentWidth(c);var g=d.getClientSize();var h=d.getSiteWidth();return b.positionAndSize.getHeightInPixelsRounded(a,{width:f,height:e},g,h)}function f(a,c,d,e){var f={width:e.getComponentWidth(d),height:e.getComponentHeight(d)};var g=e.getClientSize();var h=e.getComponentHeight(a);return b.positionAndSize.getYInPixelsRounded(c,f,g,h)}function g(b,e,f,g){var h=[];var i=a.every(e,{locked:false});a.forEach(e,function(a){if(i){var e=f.getOriginalTop(b);h.push(e)}var j=g.getComponentTop(a.fromComp);var k=a.type===d.TOP_TOP?0:g.getComponentHeight(a.fromComp);var l=c.getAnchorMinDistance(a);var m=j+k+l;h.push(m)});return a.max(h)}function h(b,e){var f=[];if(!a.some(b,"locked")){return null}a.forEach(b,function(a){var b=e.getComponentTop(a.fromComp);var g=a.type===d.TOP_TOP?0:e.getComponentHeight(a.fromComp);var h=c.getAnchorMinDistance(a);var i=b+g+h;f.push(i)});return a.max(f)}function i(a){return b.layout.isDockedToDirection(a,"bottom")}return function d(j,k,l,m,n,o){function p(a,b){var c=f(a.id,o[a.id],b,k);k.setComponentTop(a.id,c)}function q(a,c){if(b.layout.isVerticallyStretched(o[a.id])&&!k.isCollapsed(a.id)){var d=e(o[a.id],c,k);k.setComponentHeight(a.id,d)}}function r(a,b){p(a,b.id);q(a,b.id)}function s(b){var c=l.getComponentPushers(b.id);if(a.isEmpty(c)){return}var d=h(c,k);if(d===null){return}k.setComponentTop(b.id,d)}function t(b){var c=l.getComponentPushers(b.id);if(n[b.id]){return}if(a.isEmpty(c)){k.setComponentTop(b.id,m.getOriginalTop(b.id));return}var d=g(b.id,c,m,k);k.setComponentTop(b.id,d)}function u(c,d){a.forEach(c,function(a){var c=b.layout.isVerticallyDocked(o[a.id]);if(c){r(a,d)}else{t(a)}})}function v(c,d){a.forEach(c,function(a){var c=b.layout.isDockedToDirection(o[a.id],"top");var e=b.layout.isDockedToDirection(o[a.id],"bottom");if(!c&&!e){s(a,d)}})}function w(b){var d=false;function e(a,b){var c=k.getComponentTop(a);var e=b-k.getComponentHeight(a);if(e>=c){return null}k.setComponentTop(a,e);d=true;return e}function f(b,d){var g=b.fromComp;var h=c.getAnchorMinDistance(b);var i=d-h;var j=e(g,i);if(j!==null){var k=l.getComponentPushers(g);a.forEach(k,function(a){f(a,j)})}}function g(b){var c=k.getComponentTop(b);var d=l.getComponentPushers(b);a.forEach(d,function(a){f(a,c)})}var h=a.filter(b,function(a){return i(o[a.id])});a.forEach(h,function(a){g(a.id)});return d}function x(a){return!k.isCollapsed(a)}function y(b){var c=b.children;if(!a.isEmpty(c)&&x(b.id)){u(c,b);var d=w(c);if(d){v(c,b)}a.forEach(c,y)}}y(j)}});define("layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm",["layout/util/reduceDistancesAlgorithm/enforceComponentsMinHeight","layout/util/reduceDistancesAlgorithm/enforceAnchorsAndDocking"],function(a,b){"use strict";return{enforce:function(c){a(c.structure,c.measureMapManager,c.anchorsDataManager,c.originalValuesManager,c.lockedCompsMap,c.layoutsMap);b(c.structure,c.measureMapManager,c.anchorsDataManager,c.originalValuesManager,c.lockedCompsMap,c.layoutsMap);return c.flatDataMap}}});define("layout/util/layoutAlgorithm",["lodash","experiment","coreUtils","siteUtils","layout/util/anchors","layout/util/reduceDistancesAlgorithm/generateEnforceData","layout/util/reduceDistancesAlgorithm/reduceDistancesAlgorithm"],function(a,b,c,d,e,f,g){"use strict";function h(b,d,e){var f={};function g(b){if(!a.has(d.height,b.id)){return}f[b.id]=b;a.forEach(c.dataUtils.getChildrenData(b,e),g)}g(b);return f}return{enforceStructure:function(c,i,j,k,l,m,n,o,p){var q=l?d.constants.VIEW_MODES.MOBILE:d.constants.VIEW_MODES.DESKTOP;var r=a.get(j,[c.id,q]);if(r){if(b.isOpen("layout_verbs_with_anchors")){var s=f(c,i,j,k,l,m,n);if(s){return g.enforce(s)}return{}}return e.enforceAnchors(c,i,r,l,m,n,o,p)}return h(c,i,l)}}});define("layout/util/createDOMPatchers",["zepto","lodash","loggingUtils"],function(a,b,c){"use strict";function d(b,d,e){if(b[d]){a(b[d]).css(e)}else{c.log.error("Cannot find node with id {"+d+"} to patch css. Either the node doesnt exist, or it was never measured, or it was measured undeer a different id.")}}function e(b,d,e){if(b[d]){a(b[d]).attr(e)}else{c.log.error("Cannot find node with id {"+d+"} to patch attributes. Either the node doesnt exist, or it was never measured, or it was measured undeer a different id.")}}function f(a,d,e){if(a[d]){b.forEach(b.keys(e),function(b){a[d][b]=e[b]})}else{c.log.error("Cannot find node with id {"+d+"} to patch events. Either the node doesnt exist, or it was never measured, or it was measured undeer a different id.")}}function g(d,e,f){if(d[e]){var g=a(d[e]);b.forOwn(f,function(a,b){g.data(b,a)})}else{c.log.error("Cannot find node with id {"+e+"} to patch data. Either the node doesnt exist, or it was never measured, or it was measured undeer a different id.")}}function h(a){return{css:b.partial(d,a),attr:b.partial(e,a),data:b.partial(g,a),events:b.partial(f,a)}}return h});define("layout/util/rootLayoutUtils",["lodash","siteUtils"],function(a,b){"use strict";return{getRootWidth:function a(c,d,e){return b.layout.getRootWidth(d,e,c.getSiteWidth())},getRootLeft:function a(c,d,e){return b.layout.getRootLeft(d,e,c.getSiteX())}}});define("layout/util/singleCompLayout",["lodash","coreUtils","siteUtils","experiment","layout/util/rootLayoutUtils"],function(a,b,c,d,e){"use strict";var f=b.style.unitize;var g={};var h={};var i={};var j={};var k={};var l={};function m(a){return a.position==="fixed"}function n(a){return c.layout.isHorizontallyStretched(a.layout)}function o(a){return i[a.componentType]}function p(a){return c.layout.isVerticallyStretched(a.layout)}function q(a){return i[a.componentType]}function r(a,b,c){var d=c.zIndex;if(d!=="auto"){d=parseFloat(d);if(!isNaN(d)){a.zIndex[b]=d}}}function s(a,b,c,d){if(m(d)){a.fixed[b]=true;a.top[b]=c.offsetTop;a.left[b]=c.offsetLeft}}function t(b,c,d,e){var f=a.get(e,"layout.width",0);if(n(e)){b.width[c]=d.offsetWidth}else if(o(e)||!a.get(e,"layout.width")){b.width[c]=Math.max(d.offsetWidth,f)}else{b.width[c]=f}}function u(a,b,c){a.top[b]=c.offsetTop}function v(b,c,d,e){var f=a.get(e,"layout.height",0);var g=a.get(e,"layout.aspectRatio",0);if(g){f=g*b.width[c]}if(p(e)){b.height[c]=d.offsetHeight}else if(q(e)||!a.get(e,"layout.height")){b.height[c]=Math.max(d.offsetHeight,f)}else{b.height[c]=f}}function w(b,c,d,e){var f=a.get(e,"layout.width",0);var g=a.get(e,"layout.height",0);b.width[c]=f;b.height[c]=g}function x(b,c){var d=c.offsetLeft;var e=a.get(b,"layout.x",0);var f=Math.abs(e-d);return f===.5?e:d}function y(a,b,c,e){if(e.isDeadComp[a]){w(e,a,b,c);return}var f=window.getComputedStyle(b);s(e,a,b,f);r(e,a,f);t(e,a,b,c);v(e,a,b,c);if(d.isOpen("layout_verbs_with_anchors")||d.isOpen("sv_partialReLayout")){u(e,a,b)}e.left[a]=x(c,b)}function z(a){return a.getAttribute("data-dead-comp")}function A(a,b){if(!a){return false}var c=b(a);if(!c){return false}return c}function B(a,b,c,d,e,f){var g=b.id;var i=A(g,c);if(!i){return}e[g]=i;y(g,i,a,d);var j=z(i);if(j){d.isDeadComp[g]=true;return}if(k[b.type]){k[b.type](g,d,e,f,b)}if(h[b.type]){h[b.type](g,d,e,f,b)}}function C(b,c,d,e,f){var g=b.id;var i=A(g,c);if(!i||z(i)){return}if(j[b.type]){var k=j[b.type];if(typeof k==="function"){k=k(f,g,e,b)}a.forEach(k,function(i){var j=a.isPlainObject(i);var k=j?i.pathArray:i;var l=c.apply(undefined,[g].concat(k))||c.apply(undefined,[g,"component"].concat(k));if(l){var m=k.join("");var n=g+m;e[n]=l;d.height[n]=l.offsetHeight;d.width[n]=l.offsetWidth;if(j&&h[i.type]){h[i.type](n,d,e,f,b)}}})}}function D(b,d,e,g){var h={};if(!c.layout.isVerticallyDocked(g)||c.layout.isVerticallyStretchedToScreen(g)){h.top=f(e.top[b])}if(!c.layout.isVerticallyStretched(g)||c.layout.isVerticallyStretchedToScreen(g)){h.height=f(e.height[b])}if(!a.isEmpty(h)){d.css(b,h)}}function E(c,d,f,g,h){var i=g.layout;if(i&&b.dockUtils.isHorizontalDockToScreen(i)){var j=e.getRootWidth(h,f,g.rootId);var k=0-e.getRootLeft(h,f,g.rootId);var l=b.dockUtils.getDockedStyle(i,h.getPageBottomMargin(),h.getScreenWidth(),j,k);var m=a.pick(l,["left","width"]);f.left[c]=parseInt(m.left,10);d.css(c,m)}}function F(a,b,c,d,e){var f=a.id;var h=a.layout;D(f,b,d,h);E(f,b,d,a,e);var i=d.isDeadComp[f];var j=false;if(!i&&g[a.type]){j=g[a.type](f,c,d,a,e)}else if(!i&&l[a.type]){j=l[a.type](f,b,d,a,e)}return j}return{patchComponent:F,measureComponent:B,measureComponentChildren:C,isComponentDead:z,registerPatcher:function(a,b){g[a]=b},registerSAFEPatcher:function(a,b){l[a]=b},registerPatchers:function(b,c){g[b]=function(){var b=arguments;a.forEach(c,function(a){a.apply(null,b)})}},registerSAFEPatchers:function(b,c){l[b]=function(){var b=arguments;a.forEach(c,function(a){a.apply(null,b)})}},registerCustomMeasure:function(a,b){h[a]=b},registerRequestToMeasureDom:function(a){i[a]=true},registerRequestToMeasureChildren:function(a,b){j[a]=b},registerAdditionalMeasureFunction:function(a,b){k[a]=b},maps:{classBasedMeasureChildren:j,classBasedCustomMeasures:h,classBasedPatchers:g}}});define("layout/util/bodyNodePatcher",["zepto","lodash"],function(a,b){"use strict";return{updateBodyNodeStyle:function(c){var d=a("body");var e=a("html");if(c.isQaMode()){d.addClass("qa-mode")}if(c.isMobileView()){d.addClass("device-mobile-optimized");e.addClass("device-mobile-optimized")}else if(c.isMobileDevice()||c.isTabletDevice()){d.addClass("device-mobile-non-optimized")}else{d.removeClass("device-mobile-optimized").removeClass("device-mobile-non-optimized");e.removeClass("device-mobile-optimized")}if(c.isMobileDevice()){var f=b.assign({},c.os,c.browser);var g=b(f).keys().filter(function(a){return f[a]===true}).map(function(a){return"device-"+a}).join(" ");e.addClass(g)}var h=d.css("overflow");var i=c.renderFlags.allowSiteOverflow?null:"hidden";if(h!==i){d.css("overflow",i)}}}});define("layout/util/iframesPatcher",["zepto","lodash"],function(a,b){"use strict";return{setIframesSrc:function(){var c=a("iframe[data-src]");b.forEach(c,function(a){var b=a.getAttribute("src");var c=a.getAttribute("data-src");if(c){if(b!==c){a.setAttribute("src",c)}a.removeAttribute("data-src")}})}}});define("layout/util/layout",["zepto","lodash","layout/util/anchors","layout/util/layoutAlgorithm","coreUtils","loggingUtils","layout/util/createDOMPatchers","layout/util/singleCompLayout","layout/util/bodyNodePatcher","layout/util/iframesPatcher","experiment"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={};var m={};var n={};var o="reLayout";function p(a,c){var d=b.last(a);var f=e.dataUtils.getChildrenData(d,c);return b.transform(f,function(a,b){a[b.id]=true},{})}var q={"wysiwyg.viewer.components.Group":p,"wysiwyg.viewer.components.BoxSlideShow":p,"wysiwyg.viewer.components.StripContainerSlideShow":p,"wysiwyg.viewer.components.StripColumnsContainer":p,"wysiwyg.viewer.components.Column":function(a,c){var d=a[a.length-2];var f=e.dataUtils.getChildrenData(d,c);var g=[d].concat(f);return b.transform(g,function(a,b){a[b.id]=true},{})}};function r(a,b,c){return a&&Math.max(b,Math.min(c,a))}var s={"mobile.core.components.Page":true,"wysiwyg.viewer.components.StripColumnsContainer":true,"wysiwyg.viewer.components.Column":true};function t(a,d){if(k.isOpen("sv_partialReLayout")){return!!(a&&!a[d.id])}var e=a;return e&&!e[d.id]&&!c.HARD_WIRED_COMPS[d.id]&&!b.has(s,d.type)}function u(a){return a.componentType||a.documentType}function v(a,c,d){var f=c.getSiteData();var g=a.layout;var h={dataItem:null,propertiesItem:null,layout:g,styleItem:null,id:a.id,type:u(a),structure:a,rootId:d};if(h.layout){if(b.isFinite(h.layout.height)){h.layout.height=r(h.layout.height,e.siteConstants.COMP_SIZE.MIN_HEIGHT,e.siteConstants.COMP_SIZE.MAX_HEIGHT)}if(b.isFinite(h.layout.width)){h.layout.width=r(h.layout.width,e.siteConstants.COMP_SIZE.MIN_WIDTH,e.siteConstants.COMP_SIZE.MAX_WIDTH)}}if(a.dataQuery){h.dataItem=c.getRuntimeDal().getCompData(a.id)||f.getDataByQuery(a.dataQuery,d)}if(a.propertyQuery){h.propertiesItem=c.getRuntimeDal().getCompProps(a.id)||f.getDataByQuery(a.propertyQuery,d,f.dataTypes.PROPERTIES)}if(a.behaviorQuery||a.behaviors){h.behaviorsItem=c.getRuntimeDal().getActionsAndBehaviors(a.id);if(!h.behaviorsItem){h.behaviorsItem=a.behaviors||b.get(f.getDataByQuery(a.behaviorQuery,d,f.dataTypes.BEHAVIORS),"items")}}if(a.designQuery){var i=c.getRuntimeDal().getCompDesign(a.id);
h.designDataItem=i||f.getDataByQuery(a.designQuery,d,f.dataTypes.DESIGN)}if(a.styleId){h.styleItem=f.getDataByQuery(a.styleId,d,f.dataTypes.THEME)}return h}function w(a,b){return Boolean(b.collapsed[a])}function x(a,c,d,e,f,g,i){var j=f.getSiteData();var l=[];var m=b(d).keys().filter(function a(b){return!w(b,e)}).value();b.forEach(m,function(b){var m=v(d[b],f,g);if(!k.isOpen("sv_partialReLayout")&&t(i,m)){return}var n=h.patchComponent(m,a,c,e,j);if(n){l.push(b)}});return l}function y(a,c,d,e,f,h){var i=[];var j=g(d);b.forEach(a,function(a,b){i=i.concat(x(j,d,e[b],c,f,a.pageId,h))});return i}function z(b,c,d,e,f,g,h){var i=a(c(b.id));if(i.attr("data-leaving")){return}if(i.attr("data-collapsed")){A(b,c,d,e,f,g,h)}else if(n[b.componentType]){B(b,c,d,e,f,g,h)}else{C(b,c,d,e,f,g,h)}}function A(a,b,c,d,e,f,g){var h=e.getSiteData();var i=v(a,e,f);if(t(g,i)){return}D(a,b,d);c.collapsed[a.id]=true;F(i,b,c,d,h,a,g)}function B(a,b,c,d,e,f,g){var h=e.getSiteData();var i=v(a,e,f);D(a,b,d);E(i,e,b,c,d,f,g);F(i,b,c,d,h,a,g)}function C(a,b,c,d,e,f,g){var h=e.getSiteData();var i=v(a,e,f);D(a,b,d);F(i,b,c,d,h,a,g);E(i,e,b,c,d,f,g)}function D(a,b,c){var d=b(a.id);if(d){c[a.id]=d}}function E(a,c,d,f,g,h,i){var j=c.getSiteData();var k=e.dataUtils.getChildrenData(a.structure,j.isMobileView());b.forEach(k,function(a){z(a,d,f,g,c,h,i)})}function F(a,b,c,d,e,f,g){if(t(g,a)){return}h.measureComponentChildren(a,b,c,d,e);h.measureComponent(f,a,b,c,d,e)}function G(a,c,d,e,f){b.forOwn(a,function(a){z(a.structure,a.getDomNodeFunc,c,d,e,a.pageId,f)})}function H(a,c,e,f,g,h){var i={};var j=e.getSiteData();var k;j.originalValuesMap=j.originalValuesMap||{};var l=j.isMobileView();if(a.inner){k=j.isRootIgnoreBottomBottom(b.get(a,"inner.structure.id"));i.inner=d.enforceStructure(a.inner.structure,c,j.anchorsMap,j.originalValuesMap,l,f,g,h,k);if(c.height.SITE_PAGES){c.height.SITE_PAGES=c.height[a.inner.pageId]}}b.forOwn(a,function(a,e){if(e!=="inner"){k=j.isRootIgnoreBottomBottom(b.get(a,["structure","id"]));i[e]=d.enforceStructure(a.structure,c,j.anchorsMap,j.originalValuesMap,l,f,g,h,k)}});return i}function I(a,c,d,f,g,h){var i=a.id;h=h||c.fixed[i];if(i){var j=c.top[i]||0;var k=c.left[i]||0;if(c.fixed[i]){f=j;g=k}else{f+=j;g+=k}c.absoluteTop[i]=f;c.absoluteLeft[i]=g;if(h){c.shownInFixed[i]=true}}var l=e.dataUtils.getChildrenData(a,d);b.forEach(l,function(a){I(a,c,d,f,g,h)})}function J(a,c,d){var e=b.sortBy(b.keys(a),function(a){return a==="inner"?1:0});b.forEach(e,function(b){I(a[b].structure,c,d,b==="inner"?c.absoluteTop.SITE_PAGES:0,b==="inner"?c.absoluteLeft.SITE_PAGES:0)})}function K(a,c,d,f,g){var i=a.id&&c(a.id);if(i&&h.isComponentDead(i)){return}if(i&&m[a.componentType]){f.push({anchorsMap:g,structure:a,getDomNodeFunc:c,domNode:i})}var j=d.getSiteData().isMobileView();var k=e.dataUtils.getChildrenData(a,j);b.forEach(k,function(a){K(a,c,d,f,g)})}function L(a,d,e,f,g,h,i,j){var k=[];var l={};var n=g.getSiteData();var o=n.isMobileView();b.forEach(a,function(a){var e=v(a.structure,g);var p=m[e.structure.componentType].measure(e,a.domNode,d,f,n,function(b){z(b,a.getDomNodeFunc,d,f,g,e.rootId,j)},function(b){return c.enforceAnchors(b,d,a.anchorsMap,o,i,h,j)});if(p.needsAdditionalInnerLayout){k.push(a)}if(p.changedCompsMap){b.assign(l,p.changedCompsMap)}});b.forEach(a,function(a){var b=v(a.structure,g);if(!a.skipPatch){m[b.structure.componentType].patch(b,d,e,f,g.getSiteData())}});return{compsToInnerLayoutAgain:k,changedComps:l}}function M(a,c,d,e,f,h,i){var j=e.getSiteData();var k=j.getViewMode();var l={};var m=[];b.forOwn(a,function(a){var c=b.get(a,"structure.id");var d=b.get(j.anchorsMap,[c,k]);K(a.structure,a.getDomNodeFunc,e,m,d)});m.reverse();var n=m;var o=0;var p=g(d);while(n.length&&o<3){var q=L(n,c,p,d,e,f,h,i);n=q.compsToInnerLayoutAgain;l=b.assign(l,q.changedComps);o++}return l}var N;function O(c){N=N||a("#SITE_ROOT");var d=N.offset()||{top:0};var e={pageBottomByComponents:{},collapsed:{},height:{},width:{},innerWidth:{},innerHeight:{},custom:{},containerHeightMargin:{},minHeight:{},minWidth:{},top:{},left:{},absoluteTop:{},absoluteLeft:{},fixed:{},shownInFixed:{},zIndex:{},isDeadComp:{},siteMarginBottom:b.parseInt(N.css("padding-bottom"),10)||0,siteOffsetTop:d.top,clientWidth:0,skipPatch:{},shrinkableContainer:{},injectedAnchors:{}};e.clientWidth=c.getBodyClientWidth();if(k.isOpen("onboardingviewportmode")){e.clientHeight=P(c)}else{e.clientHeight=window.document.documentElement.clientHeight}e.width.screen=c.getScreenWidth();e.width.site=c.getSiteWidth();e.height.screen=e.clientHeight;e.innerHeight.screen=window.innerHeight;e.innerWidth.screen=window.innerWidth;return e}function P(a){var c=b.get(a.renderFlags,"onboardingViewportMode","auto");if(c==="parent"){return window.parent.document.documentElement.clientHeight}else if(/fixed:/.test(c)){return parseInt(c.split(":")[1],10)}return window.document.documentElement.clientHeight}function Q(a,c){b.forOwn(c,function(b,c){delete a.top[c]});return a}function R(a,c){var d=b.last(a);if(d&&q[d.componentType]){return q[d.componentType](a,c)}return null}function S(a,c,d){var f=b.last(a);var g={};if(c[f.id]){b.assign(g,R(a,d))}var h=e.dataUtils.getChildrenData(f,d);b.forEach(h,function(e){b.assign(g,S(a.concat([e]),c,d))});return g}function T(a,c,d){var e={};b.forOwn(c,function(c){b.assign(e,S([c.structure],a,d))});return e}function U(a,d,f,g,h){var i={};b.assign(i,d,f,c.HARD_WIRED_COMPS,e.arrayUtils.toTrueObj(g));b.assign(i,T(i,a,h));return i}function V(a){var c=b(a).values().flatMap(b.keys).value();return e.arrayUtils.toTrueObj(c)}function W(a,b,c,d,e){if(k.isOpen("sv_reportPerformance")){f.performance.clearMeasures(o);f.performance.start(o)}var g=b.getSiteData();var h=g.isMobileView();g.updateScreenSize();delete a["undefined"];var i=k.isOpen("sv_partialReLayout")?l[g.siteId]||{}:{};var m=false;var n;if(k.isOpen("sv_partialReLayout")){n=e?Q(g.measureMap,e):O(g)}else{m=g.measureMap&&d&&c;if(m){n=Q(g.measureMap,d)}else{n=O(g)}}var p=M(a,n,i,b,d,c,e);if(e){e=U(a,e,p,b.getAllRenderedRootIds(),h)}if(k.isOpen("sv_partialReLayout")){G(a,n,i,b,e)}else{G(a,n,i,b,m&&d)}var q=H(a,n,b,c,d,e);J(a,n,h);var r=y(a,n,i,q,b,!k.isOpen("sv_partialReLayout")&&m&&d);g.imageLoader.loadAllImages(g);j.setIframesSrc();l[g.siteId]=i;if(k.isOpen("sv_reportPerformance")){f.performance.finish(o,g.isViewerMode(),{partialReLayout:k.isOpen("sv_partialReLayout")})}return{componentsToRender:r,measureMap:n,reLayoutedCompsMap:V(q)}}return{registerLayoutInnerCompsFirst:function(a,b,c){m[a]={measure:b,patch:c}},registerMeasureChildrenFirst:function(a,b){n[a]=b},registerPatcher:function(a,b){h.registerPatcher(a,b)},registerSAFEPatcher:function(a,b){h.registerSAFEPatcher(a,b)},registerSAFEPatchers:function(a,b){h.registerSAFEPatchers(a,b)},registerPatchers:function(a,b){h.registerPatchers(a,b)},registerCustomMeasure:function(a,b){h.registerCustomMeasure(a,b)},registerAdditionalMeasureFunction:function(a,b){h.registerAdditionalMeasureFunction(a,b)},registerRequestToMeasureDom:function(a){h.registerRequestToMeasureDom(a)},registerRequestToMeasureChildren:function(a,b){h.registerRequestToMeasureChildren(a,b)},updateBodyNodeStyle:i.updateBodyNodeStyle,reLayout:W,enforceAnchors:c.enforceAnchors}});define("layout/specificComponents/wixHomepageMenuLayout",["layout/util/layout"],function(a){"use strict";a.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",[["buttonsContainer"]]);a.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.WixHomepageMenu",function(a,b){var c=b.height[a+"buttonsContainer"];b.height[a]=Math.max(b.height[a],c);b.minHeight[a]=c})});define("layout/specificComponents/fiveGridLineLayout",["layout/util/layout","layout/util/rootLayoutUtils"],function(a,b){"use strict";var c=function(a,c,d,e,f){var g=d.width.screen,h=b.getRootWidth(f,d,e.rootId),i=0,j=h,k=e.propertiesItem;if(k&&k.fullScreenModeOn){if(g>h){i=-(g-h)/2;j=g}c.css(a,{width:j+"px",left:i+"px"});d.width[a]=j;d.left[a]=i}};a.registerSAFEPatcher("wysiwyg.viewer.components.FiveGridLine",c);a.registerRequestToMeasureChildren("wysiwyg.viewer.components.FiveGridLine",[["line"]]);a.registerRequestToMeasureDom("wysiwyg.viewer.components.FiveGridLine");a.registerCustomMeasure("wysiwyg.viewer.components.FiveGridLine",function(a,b,c){var d=b.height[a+"line"];var e=window.getComputedStyle(c[a]);var f=parseFloat(e.borderBottomWidth);b.height[a]=Math.max(5,f,d);b.minHeight[a]=d})});define("layout/specificComponents/domainSearchLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b){var c=a+"content";[["width","minWidth"],["height","minHeight"]].forEach(function(d){var e=d[0],f=d[1];if(b[e][c]>b[e][a]){if(!b[f]){b[f]={}}b[e][a]=b[f][a]=b[e][c]}})}b.registerRequestToMeasureChildren("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",[["content"]]);b.registerCustomMeasure("wysiwyg.common.components.domainsearchbar.viewer.DomainSearchBar",c);return{}});define("layout/specificComponents/registerToMeasureOnly",["layout/util/layout"],function(a){"use strict";a.registerRequestToMeasureDom("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt");a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow");a.registerRequestToMeasureDom("wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer");a.registerRequestToMeasureDom("wysiwyg.viewer.components.Video");a.registerRequestToMeasureDom("wysiwyg.viewer.components.WTwitterTweet");a.registerRequestToMeasureDom("wysiwyg.common.components.disquscomments.viewer.DisqusComments");a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",[["itemsContainer"]]);return{}});define("layout/specificComponents/registerToPureDomMeasure",["layout/util/layout"],function(a){"use strict";function b(b){a.registerCustomMeasure(b,function(a,b,c){var d=c[a];b.height[a]=d.offsetHeight;b.width[a]=d.offsetWidth})}b("wysiwyg.viewer.components.FlashComponent");b("wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt");b("wysiwyg.viewer.components.WGooglePlusOne");b("wysiwyg.viewer.components.LinkBar");b("wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer");b("wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox");b("wysiwyg.viewer.components.PayPalButton");b("wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow");b("wysiwyg.viewer.components.FlickrBadgeWidget");b("wysiwyg.viewer.components.WTwitterFollow");b("wysiwyg.viewer.components.WTwitterTweet");b("wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton");return{}});define("layout/specificComponents/areaTooltipLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b){var c=a+"content";b.custom[a]=b.height[a]/2-b.height[c]/2});a.registerSAFEPatcher("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",function(a,b,c,d){var e,f,g,h;f=a+"tooltip";if(!c.height[f]){return}e=a+"content";var i=d.propertiesItem.tooltipPosition;switch(i){case"top":h=-c.height[e]-14+"px";g=0;break;case"right":h=c.custom[a]+"px";g=c.width[a]+14+"px";break;case"bottom":h=c.height[a]+14+"px";g=0;break;case"left":h=c.custom[a]+"px";g="-414px";break;default:return}b.css(f,{top:h,left:g})});a.registerRequestToMeasureChildren("wysiwyg.common.components.areatooltip.viewer.AreaTooltip",[["tooltip"],["content"]])});define("layout/specificComponents/menuLayout",["zepto","lodash","layout/util/layout","siteUtils","coreUtils"],function(a,b,c,d,e){"use strict";var f=d.menuUtils;function g(a,b,c,d,e,f,g){var h=0;var i=null;var j=c.custom[a].lineHeight;var k=f-g.height;for(var l=0;l<d.length;l++){var m=e[l];var n=m>0;var o=d[l];var p=a+o;if(n){h++;i=p;b.css(p,{width:m+"px",height:k+"px",position:"relative","box-sizing":"border-box",overflow:"visible"});c.custom[a].labelNodes[o].css({"line-height":j})}else{b.css(p,{height:"0px",overflow:"hidden",position:"absolute"})}}if(h===1){b.data(a+"moreContainer",{listposition:"lonely"});b.data(i,{listposition:"lonely"})}}function h(a,c,d,e,h){var i=d.height[a];var j=f.nonHiddenPageIdsFromMainMenu(h);var k=j.concat("__more__");var m=d.custom[a];l(a,c,m.needToOpenMenuUp);var n=m.menuItemContainerExtraPixels;if(m.originalGapBetweenTextAndBtn){b.forEach(k,function(b){if(!m.hasOriginalGapData[b]){c.data(a+b,{originalGapBetweenTextAndBtn:m.originalGapBetweenTextAndBtn[a+b]})}})}c.css(a,{height:i});c.css(a+"itemsContainer",{height:i-m.menuBorderY-m.ribbonExtra-m.ribbonEls+"px"});g(a,c,d,k,m.realWidths,i,n)}function i(b){var c=b.lastChild;var d=parseInt(a(c).css("margin-left"),10)||0;var e=parseInt(a(c).css("margin-right"),10)||0;return d+e}function j(a){var b=parseFloat(a);return isFinite(b)?b:0}function k(b,c){var d=a(b).css(["border-top-width","border-bottom-width","border-left-width","border-right-width","padding-top","padding-bottom","padding-left","padding-right","margin-top","margin-bottom","margin-left","margin-right"]);var e=j(d["border-top-width"])+j(d["padding-top"]);var f=j(d["border-bottom-width"])+j(d["padding-bottom"]);var g=j(d["border-left-width"])+j(d["padding-left"]);var h=j(d["border-right-width"])+j(d["padding-right"]);if(c){e+=j(d["margin-top"]);f+=j(d["margin-bottom"]);g+=j(d["margin-left"]);h+=j(d["margin-right"])}return{top:e,bottom:f,left:g,right:h,height:e+f,width:g+h}}function l(a,b,c){b.data(a,{dropmode:c?"dropUp":"dropDown"})}function m(a){var b=a.getBoundingClientRect();var c=b.top;return c>window.innerHeight/2}function n(a){var c=f.nonHiddenPageIdsFromMainMenu(a).concat("__more__");var d=[[]];var e=[["moreContainer"],["itemsContainer"]];b.forEach(d,function(a){e=e.concat(b.map(c,function(b){return[b].concat(a)}))});return e}function o(c,d,e,g,h){var i=d.width[c];var j=d.custom[c];j.hasOriginalGapData={};j.originalGapBetweenTextAndBtn={};var k=b.map(h,function(e){var f=a(g[c+e]);var h;var i=f.data("originalGapBetweenTextAndBtn");if(b.isUndefined(i)){j.hasOriginalGapData[e]=false;h=d.width[c+e]-j.labelWidths[e];j.originalGapBetweenTextAndBtn[c+e]=h}else{j.hasOriginalGapData[e]=true;h=parseInt(i,10)}if(d.width[c+e]>0){return j.labelWidths[e]+h}return 0});var l=k.pop();var m=e.sameWidthButtons;var n=e.stretchButtonsToMenuWidth;var o=false;var p=j.menuItemContainerMargins;var q=j.menuItemMarginForAllChildren;var r=j.menuItemContainerExtraPixels;var s=f.getMaxWidth(k);var t=f.getDropDownWidthIfOk(i,m,n,k,p,s,q,r);if(!t){for(var u=1;u<=k.length;u++){t=f.getDropDownWidthIfOk(i,m,n,k.slice(0,-1*u).concat(l),p,s,q,r);if(t){o=true;break}}if(!t){o=true;t=[l]}}if(o){var v=t[t.length-1];t=t.slice(0,-1);while(t.length<h.length){t.push(0)}t[t.length-1]=v}return{realWidths:t,moreShown:o}}function p(a,b){return e.style.unitize(a-b.menuBorderY-b.labelPad-b.ribbonEls-b.menuButtonBorder-b.ribbonExtra)}function q(c,d,e){return b.reduce(d,function(b,d){b[d]=a(e[c+d]).find("p");return b},{})}function r(a){return b.mapValues(a,function(a){var b=window.getComputedStyle(a[0]);return parseInt(b.width,10)+parseInt(b.paddingLeft,10)+parseInt(b.paddingRight,10)})}function s(b,c,d,e,g){var h=a(d[b]);var j=a("#"+b+"itemsContainer")[0];var l=c.custom[b]={menuBorderY:parseInt(h.data("menuborder-y"),10),ribbonExtra:parseInt(h.data("ribbon-extra"),10),ribbonEls:parseInt(h.data("ribbon-els"),10),labelPad:parseInt(h.data("label-pad"),10),menuButtonBorder:parseInt(h.data("menubtn-border"),10),menuItemContainerMargins:i(j),menuItemContainerExtraPixels:k(j,true),needToOpenMenuUp:m(d[b]),menuItemMarginForAllChildren:!g.propertiesItem.stretchButtonsToMenuWidth||j.getAttribute("data-marginAllChildren")!=="false"};var n=c.height[b];l.lineHeight=p(n,l);var s=f.nonHiddenPageIdsFromMainMenu(e).concat("__more__");l.labelNodes=q(b,s,d);l.labelWidths=r(c.custom[b].labelNodes);var t=o(b,c,g.propertiesItem,d,s);l.realWidths=t.realWidths;l.isMoreShown=t.moreShown}c.registerSAFEPatcher("wysiwyg.viewer.components.menus.DropDownMenu",h);c.registerCustomMeasure("wysiwyg.viewer.components.menus.DropDownMenu",s);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.menus.DropDownMenu",n);return{}});define("layout/specificComponents/imageLayout",["lodash","coreUtils","layout/util/layout"],function(a,b,c){"use strict";var d="image";var e="svg";function f(a,c,d){return b.imageUtils.getImageComputedProperties(a,c.getMediaFullStaticUrl.bind(c),c.currentUrl,c.mobile.getDevicePixelRatio(),d)}function g(b,c,e){c.css(b+d,a.get(e,["css","img"]))}function h(a,b,c,f,g){var h=c.custom[a]&&c.custom[a].isSvgImage;var i=c.custom[a]&&c.custom[a].filterId;if(!f.containerWidth||!f.containerHeight||!f.imageData.uri){return null}b.css(a+e,{width:f.containerWidth,height:f.containerHeight});if(h){b.attr(a+e,g.attr.container);b.attr(a+d,g.attr.img);b.attr(a+d,{"xlink:href":g.uri,filter:"url(#"+i+")"})}}function i(b,c,d,e,i,j,k){c.css(b,j);var l=d.custom[b]&&d.custom[b].isZoomed;var m={imageData:i,containerWidth:l?i.width:j.width,containerHeight:l?i.height:j.height,displayMode:i.displayMode,alignType:k};var n=f(m,e,"img");g(b,c,n);if(d.custom[b].hasSvgNode){var o=f(m,e,"svg");h(b,c,d,m,o)}var p={patchers:c,id:b,src:a.get(n,"uri"),absoluteTop:d.absoluteTop[d.custom[b].parentId]||0,height:d.height[b],currentSrc:d.custom[b].imgSrc};e.imageLoader.loadImage(p)}function j(b,c,f,g,h){var i,j=false;f[b+d]=f[b].querySelector("img")||f[b].querySelector("image");f[b+e]=f[b].querySelector("svg");if(f[b+d]&&f[b+d].nodeName.toLowerCase()==="image"){j=true;i=a.get(f[b].querySelector("filter"),"id")}c.custom[b]={isZoomed:f[b].getAttribute("data-image-zoomed"),isSvgImage:j,filterId:i,hasSvgNode:Boolean(f[b+e]),imgSrc:f[b+d].getAttribute("src"),parentId:h.id}}c.registerCustomMeasure("core.components.Image",j);return{patchNodeImage:i,measureNodeImage:j}});define("layout/specificComponents/sliderGalleryLayout",["layout/util/layout","coreUtils","imageClientApi","zepto","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";var g=b.matrix.scalingCalculations;var h=b.galleriesCommonLayout;function i(a,b,c,d,e){var f=Math.floor(b+a);return g.getSizeAfterScaling({itemHeight:f,itemWidth:Math.floor(f*(e&&e.aspectRatio?e.aspectRatio:1)),displayerData:c,imageMode:e?e.imageMode:"clipImage",heightDiff:d.heightDiff,widthDiff:d.widthDiff,bottomGap:d.bottomGap})}function j(a,b,f,g,j,k,l){var m=d(k);var n={imageIndex:m.data("image-index"),width:m.data("displayer-width"),height:m.data("displayer-height"),uri:m.data("displayer-uri")};var o={heightDiff:parseInt(m.data("height-diff"),10)||0,widthDiff:parseInt(m.data("width-diff"),10)||0,bottomGap:parseInt(m.data("bottom-gap"),10)||0};var p=j&&j[n.imageIndex]?j[n.imageIndex]:n;p=e.assign(p,{displayMode:c.fittingTypes.SCALE_TO_FILL});var q=i(f,b,p,o,g.propertiesItem);var r=h.getContainerSize(q.imageWrapperSize,m);return{imageData:p,imageNodeId:a+a+l+"image",imageWrapperId:a+a+l+"imageWrapper",containerSize:r,sizeAfterScaling:q}}function k(a,b,c,f,g){var h=c[a+"images"];var i=d(h).children();var k=e.get(g,"dataItem.items");var l=parseInt(d(c[a]).data("additional-height"),10)||0;b.custom[a]={displayers:e.map(i,e.partial(j,a,b.height[a],l,g,k)),additionalHeight:l}}function l(a,b,c,d,g){var i=c.height[a];b.css(a,{height:i});var j=c.custom[a];e.forEach(j.displayers,function(a){h.updateImageWrapperSizes(b,a.imageWrapperId,a.sizeAfterScaling);f.patchNodeImage(a.imageNodeId,b,c,g,a.imageData,a.containerSize)})}function m(a,b){var c=[["images"],["itemsContainer"]];var f=d("#"+b+"images").children();e.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};var d=[a.id,"imageWrapper"];c.push(b,d)});return c}a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SliderGallery",m);a.registerCustomMeasure("wysiwyg.viewer.components.SliderGallery",k);a.registerSAFEPatcher("wysiwyg.viewer.components.SliderGallery",l);return{}});define("layout/specificComponents/verticalMenuLayout",["zepto","lodash","layout/util/layout","coreUtils","siteUtils","skinExports"],function(a,b,c,d,e,f){"use strict";function g(a){var b=a.dataset;return{border:b&&b.paramBorder?parseInt(b.paramBorder,10):0,separator:b&&b.paramSeparator?parseInt(b.paramSeparator,10):0}}function h(b,c,d){var e={"line-height":d+"px"};if(c){e["text-overflow"]="ellipsis"}a(b).css(e)}function i(a,c,g,i,j){c.css(a,{width:g.width[a]});var k=e.menuUtils.getSiteMenuWithoutRenderedLinks(j);var l=g.custom[a];var m=f[i.styleItem.skin];var n=d.verticalMenuCalculations.getVisibleItemsCount(k);var o=Math.max(g.minHeight[a],i.layout.height);var p=d.verticalMenuCalculations.getItemHeight(o,l.params.separator,n,m);var q=d.verticalMenuCalculations.getLineHeight(p,l.params.separator,l.params.border,m);b.forEach(l.linksInfo,function(a){h(a.node,a.hasOverflow,q)});b.forEach(l.liNodes,function(a){a.style.height=p+"px"})}function j(c,d,e){var f=e[c];var h=a(f);var i=h.find("a.level0");var j=0;var k=0;b.forEach(i,function(a){if(a.offsetWidth>j){j=a.offsetWidth}k+=a.offsetHeight});d.custom[c]={linksInfo:b.map(h.find("a"),function(a){return{node:a,hasOverflow:a.offsetWidth>j}}),liNodes:h.find("li"),params:g(f)};var l=parseInt(f.getAttribute("data-param-border")||0,10);var m=parseInt(f.getAttribute("data-param-padding")||0,10);var n=j+m*2+l*2;if(n>d.width[c]){d.width[c]=n}d.minHeight[c]=k}c.registerCustomMeasure("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",j);c.registerSAFEPatcher("wysiwyg.common.components.verticalmenu.viewer.VerticalMenu",i);return{}});define("layout/specificComponents/loginButtonLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b){var c=a+"container";b.minHeight[a]=b.height[c];if(b.height[c]>b.height[a]){b.height[a]=b.height[c]}}function d(a,b,c){var d=a+"container";var e=c.height[a];var f=c.height[d];var g=(e-f)/2;b.css(d,{"margin-top":g+"px"})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.LoginButton",[["container"]]);b.registerCustomMeasure("wysiwyg.viewer.components.LoginButton",c);b.registerSAFEPatcher("wysiwyg.viewer.components.LoginButton",d)});define("layout/util/spaceCalculationsRegardingWixAds",[],function(){"use strict";function a(a){var b=parseInt(a,10);return isNaN(b)?0:b}function b(b){return a(b.height.WIX_ADS)+a(b.top.WIX_ADS)}function c(b){if(b.height.WIX_ADSdesktopWADTop||b.top.WIX_ADSdesktopWADTop){return a(b.height.WIX_ADSdesktopWADTop)+a(b.top.WIX_ADSdesktopWADTop)}return a(b.height.WIX_ADS)+a(b.top.WIX_ADS)}function d(b){var c=b.height.screen;var d,e;if(b.height.WIX_ADSdesktopWADTop||b.height.WIX_ADSdesktopWADBottom){d=a(b.height.WIX_ADSdesktopWADTop)+a(b.top.WIX_ADSdesktopWADTop);e=a(b.height.WIX_ADSdesktopWADBottom);return c-d-e}d=a(b.height.WIX_ADS)+a(b.top.WIX_ADS);return c-d}return{getFirstVisibleTopCoordinate:b,getFirstUnoccupiedTopCoordinate:c,getScreenHeightExcludingAds:d}});define("layout/specificComponents/dialogLayout",["lodash","layout/util/layout","layout/util/spaceCalculationsRegardingWixAds"],function(a,b,c){"use strict";function d(a,b,d){var e=a+"dialog";var f=d.height[e];var g=d.height.screen;var h=c.getFirstUnoccupiedTopCoordinate(d);var i=c.getScreenHeightExcludingAds(d);var j=20;b.css(a,{height:g+"px"});var k=(i-f)/2;b.css(e,{top:Math.max(k,j)+h+"px"})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",[["dialog"]]);b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.EnterPasswordDialog",d);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",[["dialog"]]);b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog",d);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",[["dialog"]]);b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog",d);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",[["dialog"]]);b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog",d);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",[["dialog"]]);b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog",d);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.NotificationDialog",[["dialog"]]);b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.NotificationDialog",d);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.dialogs.CreditsDialog",[["dialog"]]);b.registerSAFEPatcher("wysiwyg.viewer.components.dialogs.CreditsDialog",d)});define("layout/specificComponents/bgVideoLayout",["zepto","lodash","coreUtils","layout/specificComponents/imageLayout","imageClientApi"],function(a,b,c,d,e){"use strict";var f=c.containerBackgroundUtils;var g=c.balataConsts;function h(a,c,d,e,g){var h={position:"relative",minWidth:0,minHeight:0,top:0,left:0};var l=a.mediaRef;if(!l||l.type!=="WixVideo"||d.isTouchDevice()){return h}var m=b.find(l.qualities,{quality:e});var n=i(c.width,c.height,m.width,m.height);var o=j(a.fittingType,n,m.width,m.height);var p=k(a.alignType,n,o,c);h={position:"relative",minWidth:o.width,minHeight:o.height,left:p.left,top:f.isFullScreenByEffect(g,d.renderFlags.renderFixedPositionBackgrounds)?"":p.top};return h}function i(a,b,c,d){return{wScale:a/c,hScale:b/d}}function j(a,b,c,d){var f,g,h;var i=e.fittingTypes;switch(a){case i.SCALE_TO_FILL:h=Math.max(b.wScale,b.hScale);f=Math.round(c*h);g=Math.round(d*h);break;case i.SCALE_TO_FIT:h=Math.min(b.wScale,b.hScale);f=Math.round(c*h);g=Math.round(d*h);break}return{width:f,height:g}}function k(a,b,c,d){var f=d.width;var g=d.compRootHeight;var h=Math.floor((g-c.height)/2);var i=Math.floor((f-c.width)/2);var j={};var k=e.alignTypes;switch(a){case k.CENTER:j.left=i;j.top=h;break;case k.LEFT:j.left=0;j.top=h;break;case k.RIGHT:j.left=f-c.width;j.top=h;break;case k.TOP:j.left=i;j.top=0;break;case k.BOTTOM:j.left=i;j.top=g-c.height;break;case k.TOP_LEFT:j.left=0;j.top=0;break;case k.TOP_RIGHT:j.left=f-c.width;j.top=0;break;case k.BOTTOM_LEFT:j.left=0;j.top=g-c.height;break;case k.BOTTOM_RIGHT:j.left=f-c.width;j.top=g-c.height;break}return j}function l(a,b,d){var e="";if(!b){return e}return c.urlUtils.joinURL(d.getStaticVideoUrl(),a.videoId,b,"mp4","file.mp4")}function m(a){if(a.designDataItem&&a.designDataItem.background){return a.designDataItem.background}return a.dataItem.background}function n(b,c,e,f,h){var i=b+g.POSTER;var j=e[b];var k=j.firstChild;var l=k.firstChild;e[b+"video"]=k;e[b+"mp4"]=l;d.measureNodeImage(i,c,e,f,h);c.custom[b]={quality:a(j).data("quality"),src:l.src,videoNode:k};c.custom[i]={}}function o(a,c,e,g,i,j,k){var n=m(g);var o=!i.isTouchDevice();var p=f.getBgEffectName(g.behaviorsItem,o,i.isMobileView());var q=k.width;var r=k.height;var s=e.custom[a];var t=s.quality;var u=h(n,{width:q,height:j,compRootHeight:r},i,t,p);c.attr(a+"video",{width:u.minWidth});c.attr(a+"video",{height:u.minHeight});c.css(a+"video",u);var v=l(n.mediaRef,t,i);if(s.src!==v){c.attr(a+"mp4",{src:v});s.videoNode.load()}var w={width:q,height:j,top:0};var x=b.assign({displayMode:n.fittingType},n.mediaRef.posterImageRef);d.patchNodeImage(a+"poster",c,e,i,x,w,n.alignType)}return{patchBgVideo:o,measureBgVideo:n}});define("layout/util/optimizedCssImageLayout",["lodash","zepto","coreUtils"],function(a,b,c){"use strict";var d=250;var e=c.balataConsts;function f(b,c){return!a.includes(b,c)||Boolean(b)!==Boolean(c)}function g(a,b){if(a){return c.urlUtils.isExternalUrl(a)?a:c.urlUtils.joinURL(b.getStaticMediaUrl(),a)}return""}function h(c,d){var e=b(d);c.type=e.data("type");c.currentCss=e.data("image-css");if(c.currentCss&&a.isString(c.currentCss)){c.currentCss=JSON.parse(c.currentCss)}c.previousBackgroundImageCssUrl=e.css("backgroundImage")}function i(a,b,c,d){if(d===e.BG_IMAGE){a.css(b,{backgroundImage:c?'url("'+c+'")':""})}else{a.attr(b,{src:c})}}function j(b,c,e,f,g){var h=e.previousBackgroundImageCssUrl;g.imageResizeHandlers=g.imageResizeHandlers||{};if(!h||!f){i(c,b,f,e.type);return}else if(!g.imageResizeHandlers[b]){g.imageResizeHandlers[b]=a.debounce(i,d,{trailing:true})}g.imageResizeHandlers[b](c,b,f,e.type)}function k(b,c){return c&&(!b||a.some(c,function(a,c){return a!==b[c]}))}function l(b,c,d,e,h,i){if(k(b.currentCss,e)){d.css(c,e);var l=a.defaults(e,b.currentCss);d.data(c,{"image-css":JSON.stringify(l)})}var m=g(h,i);if(f(b.previousBackgroundImageCssUrl,m)){j(c,d,b,m,i)}}return{cacheCssImageMeasureData:h,patchCssImage:l}});define("layout/specificComponents/siteBackgroundLayout",["lodash","layout/util/layout","imageClientApi","layout/specificComponents/imageLayout","layout/specificComponents/bgVideoLayout","layout/util/optimizedCssImageLayout"],function(a,b,c,d,e,f){"use strict";var g=1920;var h=1e3;var i="siteBackgroundcurrentImage";var j="siteBackgroundcurrentVideo";var k="bgVideo";var l=k+"poster";var m=k+"video";var n=k+"mp4";function o(a,b,c,d,g){c.top[a]=s(c);c.width[a]=t(c,g);c.height[a]=r(c,g);c.height.currentImage=c.height.masterPage;b.css(a,{top:c.top[a]+"px",height:c.height[a]+"px",width:c.width[a]+"px"});var h=c.custom[a];var j=q(h.bgData,g);f.patchCssImage(h,i,b,j.css,j.uri,g);if(c.custom[a+k]){var l={designDataItem:{background:h.bgData}};var m={width:c.width.screen,height:c.height.screen};e.patchBgVideo(a+k,b,c,l,g,m.height,m)}}function p(a,b){var c=a.getDataByQuery(b);var d=a.isMobileView()?"mobile":"desktop";return c.pageBackgrounds[d].ref}function q(b,d){var e=b.mediaRef;var f={backgroundSize:"",backgroundPosition:"",backgroundRepeat:""};var i="";if(e){if(e.type==="WixVideo"){e=e.posterImageRef}var j={id:e.uri,width:e.width,height:e.height};var k=d.isMobileView()?h:g;var l=Math.min(k,j.width);var m=Math.min(k,Math.round(l/(j.width/j.height)));var n={width:l,height:m,htmlTag:"bg",alignment:b.alignType};var o=a.defaults({quality:85},e.quality||{});var p=c.getData(b.fittingType,j,n,o,d.browser);i=p.uri;f={backgroundSize:p.css.container.backgroundSize,backgroundPosition:p.css.container.backgroundPosition,backgroundRepeat:p.css.container.backgroundRepeat}}return{css:f,uri:i}}function r(a,b){var c=a.height[b.getStructureCompId()];var d=a.height.screen-s(a);return Math.max(d,c)}function s(a){var b=parseInt(a.height.WIX_ADS,10);b=isNaN(b)?0:b;var c=parseInt(a.top.WIX_ADS,10);c=isNaN(c)?0:c;return b+c}function t(a,b){var c=a.width[b.getStructureCompId()];return Math.ceil(Math.max(a.width.screen,c))}function u(a){return[[a.getPrimaryPageId()]]}function v(b,c,e,g,h){e[i]=window.document.querySelector("."+i);var o=g.getPrimaryPageId();var q=p(g,o);c.custom[b]={bgData:q};f.cacheCssImageMeasureData(c.custom[b],e[i]);if(a.get(q.mediaRef,"type")==="WixVideo"&&!g.isTouchDevice()){e[j]=window.document.querySelector("."+j);e[b+m]=e[j].querySelector("."+m);e[b+l]=e[j].querySelector("."+l);e[b+n]=e[b+m].firstChild;var r=e[b+m];c.custom[b+k]={bgData:q,videoNode:r,quality:e[j].getAttribute("data-quality"),src:e[b+n].getAttribute("src")};d.measureNodeImage(b+l,c,e,g,h)}}b.registerRequestToMeasureDom("wysiwyg.viewer.components.SiteBackground");b.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteBackground",u);b.registerSAFEPatcher("wysiwyg.viewer.components.SiteBackground",o);b.registerCustomMeasure("wysiwyg.viewer.components.SiteBackground",v)});define("layout/specificComponents/wPhotoLayout",["zepto","lodash","layout/util/layout","layout/specificComponents/imageLayout","coreUtils","siteUtils","imageClientApi"],function(a,b,c,d,e,f,g){"use strict";var h={fitWidthStrict:g.fittingTypes.LEGACY_FIT_WIDTH,fitHeightStrict:g.fittingTypes.LEGACY_FIT_HEIGHT};function i(a){if(a===g.fittingTypes.LEGACY_FIT_WIDTH){return g.fittingTypes.LEGACY_FIT_HEIGHT}return h[a]||a}function j(a,b,c){var d=b.height[a]-(b.custom[a].marginHeight||0);var e=b.width[a]-(b.custom[a].marginWidth||0);var f={width:e>0?e:b.width[a],height:d>0?d:b.height[a]};var h=b.custom[a].exactHeight-(b.custom[a].marginHeight||0);if(c===g.fittingTypes.LEGACY_FIT_HEIGHT&&Math.ceil(h)===f.height){f.height=h;
}return f}function k(b,c,d){var e=a(d[b]);var f=parseInt(e.data("content-padding-horizontal"),10);var g=parseInt(e.data("content-padding-vertical"),10);var h=parseFloat(e.data("exact-height"));c.height[b]=c.custom[b]&&c.custom[b].thisIsMyHeight||d[b].offsetHeight;c.custom[b]={marginWidth:f,marginHeight:g,exactHeight:h}}function l(a,c,g,h,k){var l=a+"img";var m=a+"link";var n=h.dataItem;var o=h.propertiesItem;var p=o&&o.displayMode||"fill";var q=i(p);var r=e.imageUtils.getContainerSize(j(a,g,q),{width:n.width,height:n.height},q);var s=f.layout.isVerticallyStretched(h.layout);var t=f.layout.isHorizontallyStretched(h.layout);var u={width:!t?r.width+g.custom[a].marginWidth:"",height:!s?r.height+g.custom[a].marginHeight:""};var v=b.assign({},b.pick(n,["width","height","uri","quality"]),{displayMode:q,crop:b.get(o,"overrideCrop")||n.crop});d.patchNodeImage(l,c,g,k,v,r);c.css(a,u);c.css(m,r)}var m={pathArray:["img"],type:"core.components.Image"};c.registerRequestToMeasureDom("wysiwyg.viewer.components.WPhoto");c.registerRequestToMeasureChildren("wysiwyg.viewer.components.WPhoto",[m,["link"]]);c.registerSAFEPatcher("wysiwyg.viewer.components.WPhoto",l);c.registerCustomMeasure("wysiwyg.viewer.components.WPhoto",k);c.registerRequestToMeasureDom("wysiwyg.viewer.components.ClipArt");c.registerRequestToMeasureChildren("wysiwyg.viewer.components.ClipArt",[m,["link"]]);c.registerSAFEPatcher("wysiwyg.viewer.components.ClipArt",l);c.registerCustomMeasure("wysiwyg.viewer.components.ClipArt",k)});define("layout/specificComponents/documentMediaLayout",["zepto","lodash","layout/util/layout","imageClientApi","layout/specificComponents/imageLayout"],function(a,b,c,d,e){"use strict";function f(a,c,f,g,h){var i=b.defaults({displayMode:d.fittingTypes.LEGACY_FULL},g.dataItem);e.patchNodeImage(a+"img",c,f,h,i,f.custom[a].containerSize);c.css(a,{width:f.width[a]})}function g(b,c,d){var e=a(d[b]);var f=b+"label";var g=c.width[f];var h=c.height[f];var i=Math.max(c.width[b],g);var j=e.data("content-padding-left");var k=e.data("content-padding-right");var l=e.data("content-padding-top");var m=e.data("content-image-height");var n={width:i-j-k,height:Math.max(m-l-h,1)};c.custom[b]={containerSize:n};c.width[b]=i;c.minWidth[b]=g}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.documentmedia.DocumentMedia",[["label"],{pathArray:["img"],type:"core.components.Image"},["link"]]);c.registerCustomMeasure("wysiwyg.viewer.components.documentmedia.DocumentMedia",g);c.registerSAFEPatcher("wysiwyg.viewer.components.documentmedia.DocumentMedia",f)});define("layout/util/calculateScreenWidthDimensions",["siteUtils","layout/util/rootLayoutUtils"],function(a,b){"use strict";var c=a.layout.stretchInCenteredContainer;return function a(d,e,f){var g=Math.max(d.width.screen,b.getRootWidth(e,d,f));return c(b.getRootWidth(e,d,f),g)}});define("layout/specificComponents/bgImageLayout",["zepto","lodash","layout/util/layout","coreUtils","imageClientApi","layout/util/optimizedCssImageLayout","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f,g){"use strict";var h=d.balataConsts;function i(a){return!a||d.urlUtils.isExternalUrl(a)}function j(a,c,d,f,g,h){var i=g.mobile.getDevicePixelRatio();var j={width:f.width,height:f.height,alignment:c,htmlTag:h||"bg",pixelAspectRatio:i};var k={id:d.uri,width:d.width,height:d.height};var l=b.defaults({quality:85},d.quality||{});return e.getData(a,k,j,l,g.browser)}function k(a,b,c){var d=a+"bg";if(!c[d]){return}b.custom[a]={};f.cacheCssImageMeasureData(b.custom[a],c[d])}function l(b,c,d,e,i){var j=b+h.MEDIA+h.CONTENT;var k=d[j].getAttribute("data-type");c.custom[b]=c.custom[b]||{};c.custom[b].type=k;if(k===h.IMAGE){g.measureNodeImage(j,c,d,e,i)}else{var l=j+"image";d[l]=a(d[j]).find("#"+l)[0];var m=d[l];c.custom[j]={};f.cacheCssImageMeasureData(c.custom[j],m)}}function m(a,b,c,d,e){var f=c.width;var g=d||c.height;var h=p(a);if(!h||i(h.uri)){return}var k=a.fittingType;var l=a.alignType;return j(k,l,h,{width:f,height:g},e,b)}function n(a,c,d,e,i,j,k,l){var n=e.custom[a].type;var q=o(i);if(n===h.IMAGE){var r={width:l.width,height:k};var s=b.assign({displayMode:q.fittingType},p(q));g.patchNodeImage(c,d,e,j,s,r,q.alignType)}else{var t=c+"image";var u=m(q,"bg",l,k,j);var v=b.assign({height:k},u.css.container);f.patchCssImage(e.custom[c],t,d,v,u.uri,j)}}function o(a){if(b.isUndefined(a.designDataItem)){return a.dataItem.background}return a.designDataItem.background}function p(a){var b=a.mediaRef;if(b&&b.type==="WixVideo"){b=b.posterImageRef}return b}function q(a,b,c,d,e,g){var h=c.custom[a];var k=a+"bg";if(h){var l=d.dataItem;if(!l||i(l.uri)){return}var m=d.propertiesItem.fittingType;var n=d.propertiesItem.alignType;var o=j(m,n,l,g,e);f.patchCssImage(h,k,b,o.css.container,o.uri,e)}}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.background.bgImage",[["image"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.BgImageStrip",[["bg"]]);return{measureLegacyBgImageStrip:k,measureBgImageBalata:l,patchBgImage:n,patchLegacyBgImageStrip:q}});define("layout/specificComponents/balataLayout",["lodash","coreUtils","layout/specificComponents/bgImageLayout","layout/specificComponents/bgVideoLayout"],function(a,b,c,d){"use strict";var e=b.balataConsts;var f=b.containerBackgroundUtils;var g=[[e.BALATA],[e.BALATA,e.MEDIA],[e.BALATA,e.MEDIA,e.CONTENT],[e.BALATA,e.MEDIA,e.CONTENT,e.POSTER],[e.BALATA,e.OVERLAY],[e.BALATA,e.OVERLAY,e.OVERLAY]];function h(b,c,d,e,f){var g=b[e][d];if(a.isNumber(g)){return g}g=c[d][f];if(a.isNumber(g)){return g}return 0}function i(b,c,d,f,g,i){var k=n(b);var l=c.custom[k]={};var m=k+e.MEDIA;var o=m+e.CONTENT;var p=k+e.OVERLAY;l.hasBalata=Boolean(d[k]);l.hasMedia=Boolean(d[m]);l.hasMediaContent=Boolean(d[o]);l.hasOverlay=Boolean(d[p]);if(!l.hasBalata){return}a.forEach(i,function(a,b){c[b][k]=a});c.left[k]=h(c,d,k,"left","offsetLeft");c.top[k]=h(c,d,k,"top","offsetTop");j(k,c,d,f,g)}function j(a,b,f,g,h){var i=o(h);var j=i.mediaRef;var k=b.custom[a];var l=g.isTouchDevice()||g.isMobileView();if(k.hasMediaContent){if(j.type==="Image"||l){c.measureBgImageBalata(a,b,f,g,h)}else if(j.type==="WixVideo"){d.measureBgVideo(a+e.MEDIA+e.CONTENT,b,f,g,h)}}}function k(b,c,d,g,h,i,j){var k=n(b);if(!d.custom[k].hasBalata){return}var o=d.custom[k];var p=k+e.MEDIA;var q=!h.isTouchDevice();var r=f.getBgEffectName(g.behaviorsItem,q,h.isMobileView());var s=f.getHeightByEffect(r,d,i.height);var t={overflow:"hidden",left:i.left,width:i.width,clip:"rect(0px,"+i.width+"px,"+i.height+"px,0px)"};if(j){t=a.omit(t,["left","width"])}c.css(k,t);if(o.hasMedia){c.css(p,{width:i.width+"px",left:l(r,i,h),height:s+"px"});m(k,c,d,g,h,s,i)}}function l(a,b,c){if(f.isFullScreenByEffect(a,c.renderFlags.renderFixedPositionBackgrounds)){return Math.floor(b.absoluteLeft||0)}return 0}function m(a,b,f,g,h,i,j){var k=a+e.MEDIA;var l=k+e.CONTENT;var m=f.custom[a];var n=o(g).mediaRef;var p=h.isTouchDevice()||h.isMobileView();if(m.hasMediaContent){if(n.type==="Image"||p){c.patchBgImage(a,l,b,f,g,h,i,j)}else if(n.type==="WixVideo"){d.patchBgVideo(l,b,f,g,h,i,j)}}}function n(a){return a+e.BALATA}function o(b){return a.get(b,["designDataItem","background"],a.get(b,["dataItem","background"]))||{}}return{BALATA_PATHS_TO_REQUEST_MEASURE:g,measure:i,patch:k}});define("layout/specificComponents/containerAndScreenWidthLayout",["lodash","zepto","layout/util/layout","coreUtils","siteUtils","layout/util/rootLayoutUtils","layout/util/calculateScreenWidthDimensions","layout/specificComponents/bgImageLayout","layout/specificComponents/balataLayout"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=d.balataConsts;var k=j.BALATA;function l(a,b,c){b.height[a]=c[a].offsetHeight;q(a,b,c)}function m(a){return a.isMobileView()?"mobile":"desktop"}function n(b,c){return a.get(b.dataItem,["pageBackgrounds",m(c),"ref"])}function o(c,d,f,g,h){l(c,d,f);d.shrinkableContainer[c]=true;var i=e.layout.getPageBottomChildEnd(d,f,g,h)+d.containerHeightMargin[c];var j=g.getPageMinHeight();var m=a.get(h,["propertiesItem",g.isMobileView()?"mobile":"desktop"]);if(m&&m.minHeight){j=m.minHeight}d.pageBottomByComponents[c]=i;d.minHeight[c]=j;d.height[c]=Math.max(j,i);d.width[c]=f[c].offsetWidth;f.POPUPS_ROOT=b("#POPUPS_ROOT");if(h.dataItem.isPopup){var o={background:n(h,g)};var p=a.clone(h);p.id+=k;p.designDataItem=o;d.top[c]=0;r(c,d,f,g,p)}}function p(a,b,c){var d=b.height[a+"inlineContent"]||0;b.containerHeightMargin[a]=d?c[a].offsetHeight-d:0}function q(a,b,c){b.left[a]=0;p(a,b,c)}function r(a,b,c,d,e){q(a,b,c);if(J(e)){i.measure(a,b,c,d,e,{left:Math.max(0,.5*(b.clientWidth-b.width.screen)),width:b.width.screen,height:b.innerHeight.screen})}}function s(a,b,c,d,e){q(a,b,c);if(!J(e)){return}var f=g(b,d,e.rootId);b.width[a]=f.width;var h={width:f.width,left:f.left,height:b.height[a]};i.measure(a,b,c,d,e,h)}function t(a,b,c,d,e){b.custom[a]={isFixedPosition:e.layout.fixedPosition};q(a,b,c)}function u(a,b){b.css(a,{left:0})}function v(a,b,c,d,e,f){b.css(f,{width:c.width.screen,left:H(e.getSiteWidth(),c.width.screen,e)});u(a,b)}function w(a,b,c,d,e){var f=a+"screenWidthBackground";v(a,b,c,d,e,f)}function x(a,c,d){q(a,c,d);var e=b(d[a+"navigationArrows"]);c.custom[a]={offset:parseInt(e.attr("data-navigation-button-margin"),10)}}function y(a,c,d,e,f){var g=b(d[a]);var h=g.data("parent-id");c.minHeight[a]=g.data("min-height");c.height[a]=c.height[h];s(a,c,d,e,f)}function z(a,b,c,d,e){var h=a+"inlineContent";var i=h+"Parent";var j=g(c,d,e.rootId);b.css(i,{left:j.left,width:j.width});b.css(h,{left:j.left*-1,width:f.getRootWidth(d,c,e.rootId)})}function A(a,b,c,d,e){z(a,b,c,e,d)}function B(a,b,c,d,e){u(a,b,c);z(a,b,c,e,d);var f=H(d.layout.width,c.width.screen,e)+c.custom[a].offset;b.css(a,{width:e.getSiteWidth()});b.css(a+"prevButton",{left:f});b.css(a+"nextButton",{right:f})}function C(b,c,d,e,f){if(e.dataItem.isPopup){c.css("POPUPS_ROOT",{width:d.innerWidth.screen,height:d.innerHeight.screen});var g=b+k;var h=a.defaultsDeep({id:g,rootId:"masterPage",structure:{behaviors:[]}},e);var j=n(e,f);h.designDataItem={background:j};i.patch(b,c,d,h,f,{left:d.left[g],top:d.top[g],width:d.width[g],height:d.height[g]})}}function D(b,c,d,e,h,j){if(!J(e)){return}u(b,c);var k=g(d,h,e.rootId);var l=a.assign({top:0,left:k.left,width:k.width,height:d.height[b],absoluteLeft:0},j);c.css(b,{width:f.getRootWidth(h,d,e.rootId)});i.patch(b,c,d,e,h,l)}function E(b){return a.get(b,["dataItem","type"])==="Image"}function F(a,b,c,d,e){var f=g(b,d,e.rootId);b.width[a]=f.width;b.left[a]=f.left;if(E(e)){h.measureLegacyBgImageStrip(a,b,c,d,e)}}function G(a,b,c,d,e){b.css(a,{width:c.width[a]+"px",left:c.left[a]+"px"});if(E(d)){var f={width:c.width[a],height:c.height[a]};h.patchLegacyBgImageStrip(a,b,c,d,e,f)}else{var g=a+"bg";b.css(g,{backgroundImage:"none"})}}function H(a,b,c){if(c.isMobileView()||c.isMobileDevice()){return 0}return Math.min(parseInt(Math.floor((a-b)/2),10),0)}function I(a,b,c,d){var e=d.layout&&d.layout.fixedPosition;b.css(a,{height:c.height[a],bottom:e?c.siteMarginBottom:"auto",top:e?"auto":c.top[a]})}function J(b){if(a.isUndefined(b.designDataItem)){return b.dataItem.background}return b.designDataItem.background}c.registerRequestToMeasureDom("mobile.core.components.Container");c.registerRequestToMeasureDom("mobile.core.components.Page");c.registerRequestToMeasureDom("wixapps.integration.components.AppPage");c.registerRequestToMeasureDom("wysiwyg.viewer.components.FooterContainer");c.registerRequestToMeasureDom("wysiwyg.viewer.components.HeaderContainer");c.registerRequestToMeasureDom("wysiwyg.viewer.components.ScreenWidthContainer");c.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShow");c.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainer");c.registerRequestToMeasureDom("wysiwyg.viewer.components.StripColumnsContainer");c.registerRequestToMeasureDom("wysiwyg.viewer.components.Column");c.registerRequestToMeasureDom("wysiwyg.viewer.components.StripContainerSlideShowSlide");c.registerMeasureChildrenFirst("mobile.core.components.Page",true);c.registerMeasureChildrenFirst("wixapps.integration.components.AppPage",true);c.registerRequestToMeasureChildren("mobile.core.components.Container",[["inlineContent"]]);c.registerRequestToMeasureChildren("mobile.core.components.Page",function(a,b,c,d){if(d.dataItem.isPopup){return[["inlineContent"]].concat(i.BALATA_PATHS_TO_REQUEST_MEASURE)}return[["inlineContent"]]});c.registerRequestToMeasureChildren("wixapps.integration.components.AppPage",[["inlineContent"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.FooterContainer",[["screenWidthBackground"],["inlineContent"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.PagesContainer",[["screenWidthBackground"],["inlineContent"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.HeaderContainer",[["screenWidthBackground"],["inlineContent"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.ScreenWidthContainer",[["screenWidthBackground"],["inlineContent"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShow",[["background"],["inlineContentParent"],["inlineContent"],["shownOnAllSlides"],["navigationArrows"],["prevButton"],["nextButton"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainer",[["inlineContent"]].concat(i.BALATA_PATHS_TO_REQUEST_MEASURE));c.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripContainerSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(i.BALATA_PATHS_TO_REQUEST_MEASURE));c.registerCustomMeasure("mobile.core.components.Container",p);c.registerCustomMeasure("mobile.core.components.Page",o);c.registerCustomMeasure("wixapps.integration.components.AppPage",o);c.registerCustomMeasure("wysiwyg.viewer.components.FooterContainer",t);c.registerCustomMeasure("wysiwyg.viewer.components.PagesContainer",l);c.registerCustomMeasure("wysiwyg.viewer.components.HeaderContainer",t);c.registerCustomMeasure("wysiwyg.viewer.components.ScreenWidthContainer",q);c.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShow",x);c.registerCustomMeasure("wysiwyg.viewer.components.StripContainer",s);c.registerCustomMeasure("wysiwyg.viewer.components.StripContainerSlideShowSlide",y);c.registerCustomMeasure("wysiwyg.viewer.components.BgImageStrip",F);c.registerSAFEPatchers("wysiwyg.viewer.components.FooterContainer",[w,I]);c.registerSAFEPatcher("wysiwyg.viewer.components.HeaderContainer",w);c.registerSAFEPatcher("mobile.core.components.Page",C);c.registerSAFEPatcher("wysiwyg.viewer.components.PagesContainer",w);c.registerSAFEPatcher("wysiwyg.viewer.components.ScreenWidthContainer",w);c.registerSAFEPatcher("wysiwyg.viewer.components.StripContainerSlideShow",B);c.registerSAFEPatcher("wysiwyg.viewer.components.StripContainer",D);c.registerSAFEPatchers("wysiwyg.viewer.components.StripContainerSlideShowSlide",[A,D]);c.registerSAFEPatcher("wysiwyg.viewer.components.BgImageStrip",G);return{measureContainer:p,measureStripContainer:s,patchStripContainer:D}});define("layout/specificComponents/groupLayout",["lodash","layout/util/layout","coreUtils"],function(a,b,c){"use strict";function d(b,d,f,g,h){var i=c.dataUtils.getChildrenData(h.structure,g.isMobileView());var j=e(i,d);d.left[b]=h.layout.x;if(i.length>0){d.width[b]=j.right-j.left;d.height[b]=j.bottom-j.top;d.top[b]=h.layout.y+j.top;d.left[b]=h.layout.x+j.left;a.forEach(i,function(a){d.top[a.id]=a.layout.y-j.top;d.left[a.id]=a.layout.x-j.left})}}function e(b,d){var e,f,g,h;e=g=Number.MAX_VALUE;f=h=-Number.MAX_VALUE;a.forEach(b,function(a){var b=a.layout;var i=d.left&&d.left[a.id]?d.left[a.id]:b.x;var j=d.width&&d.width[a.id]?d.width[a.id]:b.width;var k=d.top&&d.top[a.id]?d.top[a.id]:b.y;var l=d.height&&d.height[a.id]?d.height[a.id]:b.height;var m=c.boundingLayout.getBoundingLayout({x:i,y:k,width:j,height:l,rotationInDegrees:b.rotationInDegrees});e=Math.min(e,m.x);f=Math.max(f,m.x+m.width);g=Math.min(g,m.y);h=Math.max(h,m.y+m.height)});return{left:e,right:f,top:g,bottom:h}}function f(b,d,e,f,g){d.css(b,{width:e.width[b],height:e.height[b],top:e.top[b],left:e.left[b]});var h=c.dataUtils.getChildrenData(f.structure,g.isMobileView());a.forEach(h,function(a){d.css(a.id,{top:e.top[a.id],left:e.left[a.id]})})}b.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group",true);b.registerRequestToMeasureDom("wysiwyg.viewer.components.Group");b.registerCustomMeasure("wysiwyg.viewer.components.Group",d);b.registerSAFEPatcher("wysiwyg.viewer.components.Group",f)});define("layout/wixappsLayout/proxyLayoutRegistrar",[],function(){"use strict";var a={};return{registerCustomMeasure:function(b,c){a[b]=c},getProxiesToMeasure:function(){return a}}});define("layout/specificComponents/wixappsLayout",["zepto","lodash","coreUtils","layout/wixappsLayout/proxyLayoutRegistrar","layout/util/layout","layout/util/singleCompLayout","experiment"],function(a,b,c,d,e,f){"use strict";var g="inlineContent";function h(){var c=b.toArray(arguments);var d=c.join("");var e=c.slice(1).join("");return a("#"+d)[0]||a("#"+e)[0]}function i(a,b,c){return c.custom[a]&&c.custom[a].appPartShouldRenderAgain}function j(a,b,c,d){f.measureComponentChildren(a,h,d,c,b)}function k(a,b,c,d){var e=a.compId;var g=h(e);b[e]=g;var i=a.structureInfo;i.id=e;i.type=a.compType;j(i,d,b,c);if(f.maps.classBasedCustomMeasures[a.compType]){f.maps.classBasedCustomMeasures[a.compType](e,c,b,d,a.structureInfo)}}function l(a,d,e){var f=a+g;var h=b.get(e,[a,"attributes","data-state","value"]);if(c.stringUtils.isTrue(e[a].getAttribute("data-dynamic-height"))&&h!=="loading"){d.height[a]=d.height[f];d.minHeight[a]=d.height[f]}}function m(a,c,e,f,h){var i=a.id;var j=i+g;var l=c.querySelector("#"+j);e.custom[i]=e.custom[i]||{};var m=false;b.forEach(d.getProxiesToMeasure(),function(a,c){var d=p(c,l);e.custom[i][c]=e.custom[i][c]||[];b.forEach(d,function(b,d){var g=a(b,h,e);e.custom[i][c][d]=g;if(g.comp){k(g.comp,f,e,h)}if(g.needsRelayout&&!e.custom[i][c][d].didRelayout){m=true;e.custom[i][c][d].didRelayout=true}})});var n={};n[a.id]=true;return{needsAdditionalInnerLayout:m,changedCompsMap:n}}function n(a,c,e,g,h){var i=a.id;c.custom[i].appPartShouldRenderAgain=b.reduce(d.getProxiesToMeasure(),function(a,d,j){var k=c.custom[i][j];var l=b.reduce(k,function(a,b){o(b.domManipulations);var d=false;var i=b.comp;if(i){d=f.patchComponent(i.structureInfo,e,g,c,h)}return a||d},false);return a||l},false)}function o(c){b.forEach(c,function(c){var d=a(c.node);var e=c.funcName;var f=b.isArray(c.params)?c.params:[c.params];if(b.isFunction(d[e])){d[e].apply(d,f)}})}function p(b,c){return a("[data-proxy-name="+b+"]",c)}e.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart",m,n);e.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPart2",m,n);e.registerRequestToMeasureChildren("wixapps.integration.components.AppPart",[[g]]);e.registerRequestToMeasureDom("wixapps.integration.components.AppPart");e.registerCustomMeasure("wixapps.integration.components.AppPart",l);e.registerSAFEPatcher("wixapps.integration.components.AppPart",i);e.registerRequestToMeasureChildren("wixapps.integration.components.AppPart2",[[g]]);e.registerRequestToMeasureDom("wixapps.integration.components.AppPart2");e.registerCustomMeasure("wixapps.integration.components.AppPart2",l);e.registerSAFEPatcher("wixapps.integration.components.AppPart2",i);return{appPartMeasureFunction:l,appPartPatcherFunction:i,inlineContentId:g,preMeasureProxies:m,postPatchProxies:n}});define("layout/specificComponents/svgShape/svgScalerUtils",[],function(){"use strict";return{trim:function(a){return a.replace(/^\s+|\s+$/g,"")},round:function(a){return Math.round(a*1e6)/1e6}}});define("layout/specificComponents/svgShape/svgPathParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(a,b){"use strict";return{getParsedPath:function(c){var d=b.trim(c);if(d===""){return[]}var e=d.match(/[a-z][^a-z]*/gi),f=e.map(function(c){c=c.replace(/-/g," -").replace(/,/g," ").replace(/(-?\d*[\.\-]\d+)/g,function(a,b){return" "+b});while(a.includes(c,"  ")){c=c.replace(/ {2}/g," ")}return[c.substring(0,1),b.trim(c.substring(1))]});return f.map(function(b){var c,d=[];if(!a.includes("QSCL",b[0].toUpperCase())||b[1].split(",").length!==1){return b}c=b[1].split(" ");if(c.length%2!==0){return b}c.forEach(function(a,b,c){if(b%2===0){d.push(a+" "+c[b+1])}});return[b[0],d.join(",")]})},stringifyParsedPath:function(a){var b="";a.forEach(function(a){a.forEach(function(a){b+=a})});return b}}});define("layout/specificComponents/svgShape/svgBasicScaler",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";var b=function(b,c){return a.round(parseFloat(b)*c)},c=function(a,c,d){var e=a.split(/[\s,]+/);return b(e[0],c)+" "+b(e[1],d)},d=function(b,d,e){if(b===""){return""}var f=b.split(",").map(function(b){return c(a.trim(b),d,e)});return f.join(",")},e=function(c,d){if(c===""){return""}var e=c.split(/[\s,]+/).map(function(c){return b(a.trim(c),d)});return e.join(",")};return{scaleSingleValue:b,scalePairString:c,scaleMultiplePairStrings:d,scaleMultipleSingleStrings:e}});define("layout/specificComponents/svgShape/svgPathScaler",["lodash","layout/specificComponents/svgShape/svgPathParser","layout/specificComponents/svgShape/svgBasicScaler","loggingUtils"],function(a,b,c,d){"use strict";var e=function(){return""},f=function(a,b,d){return c.scaleSingleValue(a,d/(b*360))},g=function(a,b,e){if(a.length!==7){d.log.verbose("incorrect arc string, should have exactly 7 parameters. (value was "+a.join(" "));return a.join(" ")}a[0]=c.scaleSingleValue(a[0],b);a[1]=c.scaleSingleValue(a[1],e);a[2]=f(a[2],b,e);a[5]=c.scaleSingleValue(a[5],b);a[6]=c.scaleSingleValue(a[6],e);return a.join(" ")},h=function(b,c,d){var e=b.split(/[\s,]+/);var f=a.chunk(e,7);var h=[];a.forEach(f,function(a){h.push(g(a,c,d))});return h.join(" ")},i=function(c,d,e){var f=b.getParsedPath(c.getAttribute("d"));a.forEach(f,function(a){var b=[a[1]],c=a[0].toUpperCase();if(c==="V"){b.push(e)}else if(c==="H"){b.push(d)}else{b.push(d);b.push(e)}a[1]=j[a[0].toUpperCase()].apply(null,b)});c.setAttribute("d",b.stringifyParsedPath(f))},j={M:c.scaleMultiplePairStrings,L:c.scaleMultiplePairStrings,H:c.scaleMultipleSingleStrings,V:c.scaleMultipleSingleStrings,Z:e,C:c.scaleMultiplePairStrings,S:c.scaleMultiplePairStrings,Q:c.scaleMultiplePairStrings,T:c.scaleMultiplePairStrings,A:h};return{scale:i}});define("layout/specificComponents/svgShape/svgPolygonParser",["layout/specificComponents/svgShape/svgScalerUtils"],function(a){"use strict";return{getParsedPoints:function(b){var c=a.trim(b),d=c.split(/[\s,]+/),e=[],f;if(c===""){return[]}for(f=0;f<d.length;f+=2){e.push([d[f],d[f+1]])}return e},stringifyPoints:function(b){var c="";b.forEach(function(a){c+=a.join(",")+" "});return a.trim(c)}}});define("layout/specificComponents/svgShape/svgPolygonScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolygonParser"],function(a,b,c){"use strict";return{scale:function(d,e,f){var g=c.getParsedPoints(d.getAttribute("points"));a.forEach(g,function(a){a[0]=b.scaleSingleValue(a[0],e);a[1]=b.scaleSingleValue(a[1],f)});d.setAttribute("points",c.stringifyPoints(g))}}});define("layout/specificComponents/svgShape/svgCircleScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("r"),h=Math.min(c,d);if(e&&f){b.setAttribute("cx",a.scaleSingleValue(e,h));b.setAttribute("cy",a.scaleSingleValue(f,h));b.setAttribute("r",a.scaleSingleValue(g,h))}}}});define("layout/specificComponents/svgShape/svgRectScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";var b=function(b,c,d,e){if(d){b.setAttribute(c,a.scaleSingleValue(d,e))}};return{scale:function(a,c,d){var e=a.getAttribute("width"),f=a.getAttribute("height"),g=a.getAttribute("rx"),h=a.getAttribute("ry"),i=a.getAttribute("x"),j=a.getAttribute("y");b(a,"width",e,c);b(a,"height",f,d);b(a,"rx",g,c);b(a,"ry",h,d);b(a,"x",i,c);b(a,"y",j,d)}}});define("layout/specificComponents/svgShape/svgEllipseScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("cx"),f=b.getAttribute("cy"),g=b.getAttribute("rx"),h=b.getAttribute("ry");if(e&&g){b.setAttribute("cx",a.scaleSingleValue(e,c));b.setAttribute("rx",a.scaleSingleValue(g,c))}if(f&&h){b.setAttribute("cy",a.scaleSingleValue(f,d));b.setAttribute("ry",a.scaleSingleValue(h,d))}}}});define("layout/specificComponents/svgShape/svgPolylineParser",["lodash","layout/specificComponents/svgShape/svgScalerUtils"],function(a,b){"use strict";return{getParsedPoints:function(a){var c=b.trim(a),d=c.split(/[\s,]+/),e=[],f;if(c===""){return[]}for(f=0;f<d.length;f+=2){e.push([d[f],d[f+1]])}return e},stringifyPoints:function(a){var c="";a.forEach(function(a){c+=a.join(",")+" "});return b.trim(c)}}});define("layout/specificComponents/svgShape/svgPolylineScaler",["lodash","layout/specificComponents/svgShape/svgBasicScaler","layout/specificComponents/svgShape/svgPolylineParser"],function(a,b,c){"use strict";return{scale:function(d,e,f){var g=c.getParsedPoints(d.getAttribute("points"));g=a.map(g,function(c){return a.map(c,function(a,c){return b.scaleSingleValue(a,c?f:e)})});d.setAttribute("points",c.stringifyPoints(g))}}});define("layout/specificComponents/svgShape/svgLineScaler",["layout/specificComponents/svgShape/svgBasicScaler"],function(a){"use strict";return{scale:function(b,c,d){var e=b.getAttribute("x1"),f=b.getAttribute("y1"),g=b.getAttribute("x2"),h=b.getAttribute("y2");if(e&&f&&g&&h){b.setAttribute("x1",a.scaleSingleValue(e,c));b.setAttribute("x2",a.scaleSingleValue(g,c));b.setAttribute("y1",a.scaleSingleValue(f,d));b.setAttribute("y2",a.scaleSingleValue(h,d))}}}});define("layout/specificComponents/svgShape/svgScaler",["lodash","layout/specificComponents/svgShape/svgScalerUtils","layout/specificComponents/svgShape/svgPathScaler","layout/specificComponents/svgShape/svgPolygonScaler","layout/specificComponents/svgShape/svgCircleScaler","layout/specificComponents/svgShape/svgRectScaler","layout/specificComponents/svgShape/svgEllipseScaler","layout/specificComponents/svgShape/svgPolylineScaler","layout/specificComponents/svgShape/svgLineScaler"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=function(b){return a.includes(["path","polygon","rect","circle","ellipse","polyline","line"],b.toLowerCase())},k=function(a,c,d,e){var f=c.width/c.height,g,h,i=f>e,j=f<e,k,l;if(!a.width){g=1}else if(d&&i){k=c.height*e;g=k/a.width}else{g=c.width/a.width}if(!a.height){h=1}else if(d&&j){l=c.width/e;h=l/a.height}else{h=c.height/a.height}return{scaleX:b.round(g),scaleY:b.round(h)}},l=function(a,b,c){return Math.abs(a.width-b.width)<c&&Math.abs(a.height-b.height)<c},m=function(a,b,c){a.setAttribute("transform","translate("+parseFloat(-1*c.x+b*.5)+","+parseFloat(-1*c.y+b*.5)+")")},n=function(a){var b=a.getAttribute("data-original-aspect-ratio");return b?Number(b):null},o=function(a,b){if(!a.hasAttribute("data-original-aspect-ratio")){a.setAttribute("data-original-aspect-ratio",b);a.setAttribute("viewBox","");a.removeAttribute("viewBox")}},p=function(b,p,q,r,s){var t=b.getElementsByTagName("g")[0],u=a.pick(q,["width","height"]),v=u.width/u.height,w=a.pick(q,["x","y"]),x={path:c,polygon:d,rect:f,circle:e,ellipse:g,polyline:h,line:i};if(!t){return}var y=n(b);if(!y){y=q.width/q.height;o(b,y)}if(l(p,u,1)&&(!s||v===y)){return}var z=k(u,p,s,y);a(t.childNodes).filter(function(a){return j(a.nodeName)}).forEach(function(a){var b=a.nodeName.toLowerCase();x[b].scale(a,z.scaleX,z.scaleY)});m(t,r,{x:w.x*z.scaleX,y:w.y*z.scaleY});b.style.width=Math.ceil(u.width*z.scaleX+r)+"px";b.style.height=Math.ceil(u.height*z.scaleY+r)+"px"};return{scale:p}});define("layout/specificComponents/shapeLayout",["lodash","zepto","siteUtils","layout/util/layout","layout/specificComponents/svgShape/svgScaler"],function(a,b,c,d,e){"use strict";var f=a.template("${x} ${y} ${width} ${height}");function g(b,c,d){d.shapesBoundaries=d.shapesBoundaries||{};var e;if(!d.shapesBoundaries[c]){e=a.pick(b.getBBox(),["x","y","width","height"]);if(a.some(e)){d.shapesBoundaries[c]={boxBoundaries:e}}}}function h(a,b,c){var d=c.width/c.height;a.shapesOriginalAspectRatio=a.shapesOriginalAspectRatio||{};a.shapesOriginalAspectRatio[b]=a.shapesOriginalAspectRatio[b]||d}function i(a,b,d,e){var g=b;var h;var i=e?"xMidYMid meet":"none";var l=d;var m=c.svgFeatureDetection.flags().isVectorEffect;if(!b){h=a}else if(m){h=k(a,b,d,e)}else{h=k(a,b,d,e);g=j(a,b,d)}return{viewBox:f(h),strokeWidth:g,size:l,preserveAspectRatio:i}}function j(a,b,c){var d=Math.min((c.width-b)/a.width,(c.height-b)/a.height);return b*(1/d)}function k(a,b,c,d){var e,f,g,h;if(!d){e=(c.width-b)/a.width;f=(c.height-b)/a.height}else{e=f=Math.min((c.width-b)/a.width,(c.height-b)/a.height)}g=c.width/e;h=c.height/f;return{width:g,height:h,x:a.x-(g-a.width)/2,y:a.y-(h-a.height)/2}}function l(a,b){var d=c.svgFeatureDetection.flags().isVectorEffect;return a>0&&b===false&&!d}function m(b,c,d,e,f){var i=a.get(f,["styleItem","skin"]);var j=d[b]&&d[b].getElementsByTagName("svg")[0];if(!i||!j){return}d[b+"svg"]=j;var k=a.get(f,["propertiesItem","maintainAspectRatio"]);var m=parseInt(a.get(f,["styleItem","style","properties","strokewidth"],1),10);if(l(m,k)){c.custom[b]={};var n=d[b+"svg-g"]=j.getElementsByTagName("g")[0];c.custom[b].boundingBox=n?n.getBBox():{};h(e,i,c.custom[b].boundingBox)}else{g(j,i,e)}}function n(c,d,f,g,h){var j=d[c+"svg"];var k=g.styleItem;if(!j||!k){return}var m=g.propertiesItem;var n=m&&m.maintainAspectRatio;var o=parseInt(a.get(k,["style","properties","strokewidth"],1),10);var p;if(l(o,n)){p={width:f.width[c]-o,height:f.height[c]-o};e.scale(j,p,f.custom[c].boundingBox,o,n)}else{var q=a.get(h,["shapesBoundaries",k.skin]);if(!q){return}p={width:f.width[c],height:f.height[c]};var r=i(q.boxBoundaries,o,p,n);b(j).css(a.pick(r,["strokeWidth","size"]));b(j).attr(a.pick(r,["preserveAspectRatio","viewBox"]))}}d.registerCustomMeasure("wysiwyg.viewer.components.svgshape.SvgShape",m);d.registerPatcher("wysiwyg.viewer.components.svgshape.SvgShape",n);d.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseIconButton",m);d.registerPatcher("wysiwyg.viewer.components.PopupCloseIconButton",n);return{}});define("layout/specificComponents/richtextLayout",["layout/util/layout"],function(a){"use strict";var b="wysiwyg.viewer.components.WRichText";function c(a,b){b.css(a,{height:""})}a.registerSAFEPatcher(b,c);a.registerCustomMeasure(b,function(a,b,c,d,e){var f=c[a];b.minHeight[a]=f.offsetHeight;if(e.propertiesItem&&e.propertiesItem.packed){b.height[a]=f.offsetHeight}});a.registerRequestToMeasureDom(b);return{}});define("layout/specificComponents/matrixGalleryLayout",["layout/util/layout","zepto","imageClientApi","lodash","coreUtils","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";var g=e.matrix.calculations;var h=e.galleriesCommonLayout;var i=e.matrix.scalingCalculations;var j=70;var k=45;function l(a,b,c,d,e){return i.getSizeAfterScaling({itemHeight:b,itemWidth:c,displayerData:a,imageMode:d.imageMode,heightDiff:parseInt(e.data("height-diff"),10)||0,widthDiff:parseInt(e.data("width-diff"),10)||0,bottomGap:parseInt(e.data("bottom-gap"),10)||0})}function m(a,e,f,i,j,k,m){var n=b(k);var o=n.data("image-index");var p=d.defaults({displayMode:c.fittingTypes.SCALE_TO_FILL},j[o]);var q=l(p,f,e,i,n);var r=h.getContainerSize(q.imageWrapperSize,n);var s=g.getItemPosition(m,e,f,i.margin,i.numCols);return{id:a+k.id,imageData:p,imageNodeId:a+k.id+"image",imageWrapperId:a+k.id+"imageWrapper",containerSize:r,sizeAfterScaling:q,position:s}}function n(a,c,e,f,i){h.measureFlexibleHeightGallery(a,c,e);var l=b(e[a]);var n=e[a+"itemsContainer"];var o=b(n).children();var p=i.dataItem.items;c.width[a]=Math.max(k,c.width[a]);c.height[a]=Math.max(j,c.height[a]);var q=parseInt(l.data("height-diff"),10)||0;
var r=parseInt(l.data("width-diff"),10)||0;var s=parseInt(l.data("presented-row"),10)||0;var t=i.propertiesItem;var u=g.getItemWidth(t.margin,t.numCols,c.width[a],r);var v=g.getItemHeight(t.margin,c.height[a],s,q);c.custom[a]={displayers:d.map(o,d.partial(m,a,u,v,i.propertiesItem,p))}}function o(a,b,c,e,g){var i=c.height[a];var j=c.width[a];var k=c.custom[a];b.css(a+"itemsContainer",{height:i,width:j});b.css(a,{height:i,width:j});d.forEach(k.displayers,function(a){var d=a.sizeAfterScaling;b.css(a.id,{height:d.displayerSize.height,width:d.displayerSize.width,left:a.position.left,top:a.position.top});h.updateImageWrapperSizes(b,a.imageWrapperId,d);f.patchNodeImage(a.imageNodeId,b,c,g,a.imageData,a.containerSize)})}function p(a,c){var e=[["itemsContainer"]];var f=b("#"+c+"itemsContainer").children();d.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};var c=[a.id,"imageWrapper"];var d=[a.id];e.push(b,c,d)});return e}a.registerRequestToMeasureDom("wysiwyg.viewer.components.MatrixGallery");a.registerCustomMeasure("wysiwyg.viewer.components.MatrixGallery",n);a.registerRequestToMeasureChildren("wysiwyg.viewer.components.MatrixGallery",p);a.registerSAFEPatcher("wysiwyg.viewer.components.MatrixGallery",o);return{}});define("layout/specificComponents/slideShowLayout",["layout/util/layout","zepto","coreUtils","imageClientApi","lodash","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";var g=c.matrix.scalingCalculations;var h=c.galleriesCommonLayout;function i(a,c,d,e,f){var h=b(f);return g.getSizeAfterScaling({itemHeight:c,itemWidth:d,displayerData:a,imageMode:e.imageMode,heightDiff:parseInt(h.data("height-diff"),10)||0,widthDiff:parseInt(h.data("width-diff"),10)||0,bottomGap:parseInt(h.data("bottom-gap"),10)||0})}function j(a,c,f,g,j,k){var l=b(k);var m=l.data("image-index");var n=e.defaults({displayMode:d.fittingTypes.SCALE_TO_FILL},j[m]);var o=i(n,c,f,g,l);var p=h.getContainerSize(o.imageWrapperSize,l);return{id:a+k.id,imageData:n,imageNodeId:a+k.id+"image",imageWrapperId:a+k.id+"imageWrapper",containerSize:p,sizeAfterScaling:o}}function k(a,c,d,f,g){h.measureFlexibleHeightGallery(a,c,d);var i=d[a+"itemsContainer"];var k=b(i).children();var l=b(d[a]);var m=c.height[a]-parseInt(l.data("height-diff"),10)||0;var n=c.width[a]-parseInt(l.data("height-diff"),10)||0;var o=g.dataItem.items;c.custom[a]={displayers:e.map(k,e.partial(j,a,m,n,g.propertiesItem,o))}}function l(a,b,c,d,g){var i=d.propertiesItem;var j=c.height[a];var k=c.width[a];var l=g.isMobileDevice()||g.isMobileView();var m=c.custom[a].displayers;if(e.isEmpty(m)){return}if(i.imageMode==="flexibleHeight"){var n=e.last(m);j=n.sizeAfterScaling.displayerSize.height}b.css(a,{height:j,width:k});e.forEach(m,function(a){b.css(a.id,{height:j,width:k});h.updateImageWrapperSizes(b,a.imageWrapperId,a.sizeAfterScaling);f.patchNodeImage(a.imageNodeId,b,c,g,a.imageData,a.containerSize,l)})}function m(a,c){var d=[["itemsContainer"]];var f=b("#"+c+"itemsContainer").children();e.forEach(f,function(a){var b={pathArray:[a.id,"image"],type:"core.components.Image"};var c=[a.id,"imageWrapper"];var e=[a.id];d.push(b,c,e)});return d}a.registerRequestToMeasureDom("wysiwyg.viewer.components.SlideShowGallery");a.registerCustomMeasure("wysiwyg.viewer.components.SlideShowGallery",k);a.registerRequestToMeasureChildren("wysiwyg.viewer.components.SlideShowGallery",m);a.registerSAFEPatcher("wysiwyg.viewer.components.SlideShowGallery",l);return{}});define("layout/specificComponents/anchorLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){b.css(a,{width:"0px"})}a.registerSAFEPatcher("wysiwyg.common.components.anchor.viewer.Anchor",b)});define("layout/specificComponents/tinyMenuLayout",["zepto","layout/util/layout","coreUtils","layout/util/rootLayoutUtils","lodash"],function(a,b,c,d,e){"use strict";var f="menuContainer";var g="menuButton";var h="menuItems";var i="menuBackground";var j="fullScreenOverlay";var k=20;var l="wysiwyg.viewer.skins.mobile.TinyMenuSkin";function m(a,b,c,h,m){var n=d.getRootWidth(m,c,h.rootId);var o=n-k*2;var p,q;var r=h.layout.fixedPosition;var s=+e.get(c,["top","WIX_ADS"],0)+e.get(c,["height","WIX_ADS"],0);if(r){q="calc(50% + "+(h.layout.x-n/2)+"px)";p=-h.layout.x+k}else{q=h.layout.x+"px";p=-c.custom[a].menuContainerLeft}b.css(a,{left:q});if(r){b.css(a+g,{marginTop:s+"px"})}if(e.get(h,["styleItem","skin"],l)===l){var t=a+f;b.css(t,{maxHeight:(r?c.clientHeight-s:c.height.masterPage)-e.get(c,["custom",a,"menuContainerTop"],0)})}else{var u=c.height[a+i]-c.top[a+f];b.css(a+f,{marginTop:s+"px",maxHeight:u+"px"});b.css(a+j,{height:c.height.screen+1+"px"});return}b.css(a+f,{width:o+"px",left:p+"px"})}function n(b,d,e){var j=a("#SITE_ROOT")[0];var l=c.domMeasurements.getElementRect(e[b],j);d.custom[b]={menuContainerTop:l.bottom,menuContainerLeft:l.left-k};d.top[b+f]=c.domMeasurements.getBoundingRect(e[b+f]).top;if(e[b+i]){d.height[b+i]=c.domMeasurements.getElementRect(e[b+i]).height}d.height[b]=d.height[b+g];var m=/_open\b/.test(e[b+g].className);if(m){var n=c.domMeasurements.getElementRect(e[b+h],j);d.minHeight.masterPage=Math.max(d.minHeight.masterPage||0,n.bottom)}}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.mobile.TinyMenu",[[f],[g],[h],[j],[i]]);b.registerCustomMeasure("wysiwyg.viewer.components.mobile.TinyMenu",n);b.registerSAFEPatcher("wysiwyg.viewer.components.mobile.TinyMenu",m)});define("layout/specificComponents/imageZoomLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/imageLayout","coreUtils","imageClientApi"],function(a,b,c,d,e,f){"use strict";var g=e.mediaZoomCalculations;function h(a){return a.dataItem||a.structure.compData}function i(a,b){return e.nonPageItemZoom.getZoomedImageData()||a.getDataByQuery(b)}function j(a){var b=e.nonPageItemZoom.getZoomedImageData();return a.getExistingRootNavigationInfo(a.getFocusedRootId()).pageItemId||b&&b.id}function k(b,c,e,g,h){var k=j(h);var l=!h.isMobileView()&&h.isMobileDevice()||h.isTabletDevice();var m=i(h,k);var n=a.defaults({displayMode:f.fittingTypes.LEGACY_FULL},m);n.quality=a.defaults({quality:90},n.quality||{});var o=e.custom[b];var p={width:o.imageContainerWidth,height:o.imageContainerHeight};d.patchNodeImage(b+k+"image",c,e,h,n,p);if(e.custom[b].hasPanel){var q=l?o.dialogBoxWidth:p.width;c.css(b+m.id+"panel",{width:q})}}function l(a,b,c,d,e){var f=c.custom[a];b.css(a+"dialogBox",{width:f.imageContainerWidth,minHeight:f.dialogBoxHeight,paddingTop:f.paddingTop});k(a,b,c,d,e);var g=j(e);if(f.showDescription&&f.descriptionHeight>f.descriptionHeightLimit){var h=a+g+"description";b.css(h,{height:f.descriptionHeightLimit});b.data(h,{expandable:"true"});b.css(h,{height:f.descriptionHeightLimit});b.css(a+g+"ellipsis",{display:""})}}function m(a,c,d,e){var f=j(e);var h=i(e,f);var k=!e.isMobileView()&&e.isMobileDevice()||e.isTabletDevice();var l=k?g.getNonOptimizedViewDimensions:g.getDesktopViewDimensions;var m=b(d[a]);var o=b(d[a+"dialogBox"]);var p=n(o);var q=a+f+"panel";c.custom[a]=l(h,e,c,parseInt(m.data("width-spacer"),10),parseInt(m.data("height-spacer"),10),c.height[q],p);c.custom[a].hasPanel=Boolean(d[q])}function n(a){var b=o(a,"padding-bottom")+o(a,"padding-top");var c=o(a,"padding-right")+o(a,"padding-left");return{horizontal:c,vertical:b}}function o(a,b){if(a&&b){return parseInt(a.css(b),10)||0}return 0}function p(a,c){var d=b(c);if(d.css("display")!=="none"){var e=parseInt(d.css("line-height"),10);a.showDescription=true;a.descriptionHeight=d.height();a.descriptionHeightLimit=Math.floor(e*3)}}function q(a,b,c,d,e){var f=j(d);var h=i(d,f);var k=g.getMobileViewDimensions(h,d,b);var l=c[a+f+"description"];p(k,l);k.isMobileZoom=e;b.custom[a]=k}var r="wysiwyg.components.imageZoom";c.registerCustomMeasure(r,function(a,b,c,d,e){var f=h(e).id;var g=d.isMobileView()?q:m;g(a+f,b,c,d)});c.registerSAFEPatcher(r,function(a,b,c,d,e){var f=h(d).id;var g=e.isMobileView()?l:k;g(a+f,b,c,d,e)});c.registerRequestToMeasureChildren(r,function(a,b,c,d){var e=h(d).id;var f=j(a);var g={pathArray:[e,f,"image"],type:"core.components.Image"};if(a.isMobileView()){return[[e],g,[e,"dialogBox"],[e,f,"description"],[e,f,"ellipsis"]]}return[[e],g,[e,"dialogBox"],[e,"buttonPrev"],[e,"buttonNext"],[e,f,"panel"]]})});define("layout/specificComponents/tpaGalleryLayout",["zepto","lodash","layout/util/layout","layout/util/calculateScreenWidthDimensions"],function(a,b,c,d){"use strict";function e(a){return function(b,c,d,e,f){a.forEach(function(a){a(b,c,d,e,f)})}}function f(a,b){b.width[a]=Math.max(10,b.width[a]);b.minHeight[a]=10}function g(a,b,c){b.css(a+"iframe",{width:c.width[a],height:c.height[a]})}function h(a,b,c,e,f){var g=d(c,e,f.rootId);b.css(a,{width:g.width+"px",left:g.left+"px"});b.attr(a+"iframe",{style:{width:g.width+"px"}});c.width[a]=g.width;c.left[a]=g.left}function i(a,b){var c=.33;b.height[a]=c*b.width[a]}function j(a,b,c,e,f){var g=f.propertiesItem;if(!g.fitToScreenWidth){return}var h=c[a];var i=d(b,e,f.rootId);h.style.width=i.width+"px";h.style.left=i.left+"px";b.width[a]=i.width;b.left[a]=i.left}function k(a,b,c,d,e){if(e.propertiesItem.orientation==="vertical"){l(a,b,c)}}function l(c,d,e){d.height[c]=b.head(a(e[c]).find("iframe")).offsetHeight}function m(a,b,c,d,e){h(a,b,c,e,d)}c.registerRequestToMeasureChildren("tpa.viewer.components.StripSlideshow",[["iframe"]]);c.registerRequestToMeasureChildren("tpa.viewer.components.StripShowcase",[["iframe"]]);c.registerRequestToMeasureChildren("tpa.viewer.components.Collage",[["iframe"]]);c.registerRequestToMeasureChildren("tpa.viewer.components.Honeycomb",[["iframe"]]);c.registerRequestToMeasureChildren("tpa.viewer.components.Accordion",[["iframe"]]);c.registerRequestToMeasureChildren("tpa.viewer.components.Masonry",[["iframe"]]);c.registerRequestToMeasureChildren("tpa.viewer.components.Impress",[["iframe"]]);c.registerRequestToMeasureChildren("tpa.viewer.components.Freestyle",[["iframe"]]);c.registerRequestToMeasureChildren("tpa.viewer.components.Thumbnails",[["iframe"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DGallery",[["iframe"]]);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.tpapps.TPA3DCarousel",[["iframe"]]);c.registerSAFEPatcher("tpa.viewer.components.StripShowcase",m);c.registerSAFEPatcher("tpa.viewer.components.StripSlideshow",m);c.registerSAFEPatcher("tpa.viewer.components.Collage",g);c.registerSAFEPatcher("tpa.viewer.components.Accordion",g);c.registerSAFEPatcher("tpa.viewer.components.Impress",g);c.registerSAFEPatcher("tpa.viewer.components.Freestyle",g);c.registerSAFEPatcher("tpa.viewer.components.Thumbnails",g);c.registerSAFEPatcher("tpa.viewer.components.Honeycomb",g);c.registerSAFEPatcher("tpa.viewer.components.Masonry",g);c.registerSAFEPatcher("wysiwyg.viewer.components.tpapps.TPA3DGallery",g);c.registerSAFEPatcher("wysiwyg.viewer.components.tpapps.TPA3DCarousel",g);c.registerCustomMeasure("tpa.viewer.components.Collage",e([l,j,f]));c.registerCustomMeasure("tpa.viewer.components.Masonry",e([l,f]));c.registerCustomMeasure("tpa.viewer.components.Honeycomb",f);c.registerCustomMeasure("tpa.viewer.components.Accordion",f);c.registerCustomMeasure("tpa.viewer.components.Impress",f);c.registerCustomMeasure("tpa.viewer.components.Freestyle",e([k,f]));c.registerCustomMeasure("tpa.viewer.components.StripShowcase",f);c.registerCustomMeasure("tpa.viewer.components.StripSlideshow",f);c.registerCustomMeasure("tpa.viewer.components.Thumbnails",f);c.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DGallery",f);c.registerCustomMeasure("wysiwyg.viewer.components.tpapps.TPA3DCarousel",e([f,i]))});define("layout/specificComponents/youTubeSubscribeButtonLayout",["layout/util/layout"],function(a){"use strict";var b={default:{width:145,height:33},defaultIE:{width:145,height:33},full:{width:212,height:55},fullIE:{width:212,height:67}};function c(a,c,d,e,f){var g=f.propertiesItem.layout,h=b[g+(e.browser.ie?"IE":"")];c.width[a]=h.width;c.height[a]=h.height}a.registerRequestToMeasureDom("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton");a.registerCustomMeasure("wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton",c);return{}});define("layout/specificComponents/wFacebookCommentLayout",["layout/util/layout","zepto"],function(a,b){"use strict";function c(a,c,d){var e=b(d[a]).find("iframe")[0];if(e){c.height[a]=Math.max(c.height[a],e.offsetHeight)}}a.registerCustomMeasure("wysiwyg.viewer.components.WFacebookComment",c)});define("layout/specificComponents/facebookLikeLayout",["layout/util/layout"],function(a){"use strict";var b={layout:"box_count",show_faces:"box_count",action:"like"};var c={standard:{like:{w:250,h:40},recommend:{w:290,h:40}},standard_showFaces:{like:{w:250,h:85},recommend:{w:290,h:85}},button_count:{like:{w:170,h:20},recommend:{w:137,h:20}},box_count:{like:{w:106,h:65},recommend:{w:125,h:65}},box_count_showFaces:{like:{w:85,h:65},recommend:{w:125,h:65}},button_count_showFaces:{like:{w:137,h:20},recommend:{w:137,h:20}}};function d(a){var d=a?a.layout:b.layout;d=a&&a.show_faces?d+"_showFaces":d;var e=a?a.action:b.action;return c[d][e]}function e(a,b,c,e,f){var g=d(f.propertiesItem);b.width[a]=g.w;b.height[a]=g.h}function f(a,b,c){var d=c.width[a];var e=c.height[a];b.css(a+"iframe",{width:d,height:e})}a.registerRequestToMeasureChildren("wysiwyg.viewer.components.WFacebookLike",[["iframe"]]);a.registerCustomMeasure("wysiwyg.viewer.components.WFacebookLike",e);a.registerSAFEPatcher("wysiwyg.viewer.components.WFacebookLike",f);return{}});define("layout/specificComponents/formMixinLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=b.height[a+"wrapper"];if(c){b.height[a]=c}}function c(a,c,d){b(a,c,d);var e=180;c.width[a]=Math.max(c.width[a],e);c.minWidth[a]=e;c.minHeight[a]=180}function d(a,b){var c=b.height[a+"wrapper"];if(c){b.height[a]=c}}a.registerCustomMeasure("wysiwyg.viewer.components.ContactForm",c);a.registerRequestToMeasureChildren("wysiwyg.viewer.components.ContactForm",[["wrapper"]]);a.registerRequestToMeasureDom("wysiwyg.common.components.subscribeform.viewer.SubscribeForm");a.registerRequestToMeasureChildren("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",[["wrapper"]]);a.registerCustomMeasure("wysiwyg.common.components.subscribeform.viewer.SubscribeForm",d)});define("layout/specificComponents/backOfficeTextLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a].childNodes[0];if(d){b.height[a]=Math.max(b.height[a],d.offsetHeight)}}a.registerCustomMeasure("wysiwyg.common.components.backofficetext.viewer.BackOfficeText",b)});define("layout/specificComponents/vkShareLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){var d=c[a];if(d){b.height[a]=d.offsetHeight;b.width[a]=d.offsetWidth}}a.registerCustomMeasure("wysiwyg.viewer.components.VKShareButton",b);a.registerRequestToMeasureDom("wysiwyg.viewer.components.VKShareButton")});define("layout/specificComponents/adminLoginLayout",["zepto","layout/util/layout"],function(a,b){"use strict";var c=17;function d(b,d,e){var f=b+"label";var g=a(e[f]);d.width[b]=Math.max(g.offset().width,d.width[b]);d.height[b]=Math.max(c,d.height[b]);d.minWidth[b]=g.offset().width}b.registerCustomMeasure("wysiwyg.viewer.components.AdminLoginButton",d);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.AdminLoginButton",[["label"]])});define("layout/specificComponents/homePageLoginLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(b,c,d){var e=a(d[b+"memberTitle"]);var f=a(d[b+"actionTitle"]);c.width[b]=Math.max(e.offset().width,f.offset().width,c.width[b]);c.height[b]=Math.max(e.offset().height+f.offset().height,c.height[b])}b.registerCustomMeasure("wysiwyg.viewer.components.wixhomepage.HomePageLogin",c);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.wixhomepage.HomePageLogin",[["memberTitle"],["actionTitle"]])});define("layout/specificComponents/iTunesButtonLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){b.minWidth[a]=110;b.width[a]=Math.min(400,b.width[a]);b.height[a]=b.width[a]*40/110}a.registerCustomMeasure("wysiwyg.viewer.components.ItunesButton",b)});define("layout/specificComponents/paypalLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.viewer.components.PayPalButton",function(a,b,c){b.height[a]=c[a+"submitImage"].offsetHeight;b.width[a]=c[a+"submitImage"].offsetWidth});a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PayPalButton",[["submitImage"]]);return{}});define("layout/specificComponents/wixSiteLayout",["zepto","layout/util/layout"],function(a,b){"use strict";var c;function d(){var b=a("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body");var c=a("<div>").css({width:"100%"}).appendTo(b).width();b.remove();return 100-c}function e(a){return a.rendererModel.siteInfo.documentType==="WixSite"}function f(a){return a.isTabletDevice()&&e(a)}function g(a,b){a.css("body",{width:b.width.body})}function h(a,b){c=c||d();var e=window.document.body.clientWidth;var f=window.innerWidth;var g=e;if(f>e+c){g=f}a.body=window.document.body;b.width.body=g}function i(a,b,c,d,e){if(f(e)){g(b,c)}}function j(a,b,c,d){if(f(d)){h(c,b)}}b.registerCustomMeasure("document",j);b.registerSAFEPatcher("document",i)});define("layout/specificComponents/buttonLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(a){return parseInt(a.paddingTop,10)+parseInt(a.paddingBottom,10)}function e(a){return parseInt(a.marginRight,10)+parseInt(a.marginLeft,10)}function f(b,c,f){var g=b+"label";var h=a(f[b]);var i=h.text();var j=h.data("should-use-flex");var k=window.getComputedStyle(f[b]);var l=window.getComputedStyle(f[g]);var m=k.minHeight;if(!m||!parseInt(m,10)){m=c.height[g]}c.minHeight[b]=parseInt(m,10);if(j){c.minWidth[b]=c.width[g]}else{c.minWidth[b]=c.width[g]+e(l)}var n=h.data("shouldPreventWidthMeasurement");if(!n){c.width[b]=q()&&r()&&s()&&c.width[g]>0?c.minWidth[b]:Math.max(c.width[b],c.minWidth[b])}c.height[b]=Math.max(c.height[b],c.minHeight[b]);c.custom[b]={align:h.attr("data-align"),margin:parseInt(h.attr("data-margin"),10),shouldPreventWidthMeasurement:n,shouldUseFlex:j,text:i};c.custom[g]={verticalPadding:d(l)};var o=c.width[g]+c.custom[b].margin>c.width[b];var p=c.custom[b].align;if(p!=="center"){if(j){c.custom[g].margin=o?c.width[b]-c.width[g]:c.custom[b].margin}else{c.custom[g]["margin-"+p]=o?c.width[b]-c.width[g]:c.custom[b].margin}}function q(){return i!==""+h.data("prevText")}function r(){return c.minWidth[b]<h.data("prevMinWidth")}function s(){return h.data("prevWidth")===h.data("prevMinWidth")}}function g(a,c,d){var e;if(d.custom[a].shouldUseFlex){e={};var f=d.custom[a].align;if(f!=="center"&&d.custom[c].margin){e["margin-"+f]=d.custom[c].margin}return e}e={"line-height":d.height[a]-d.custom[c].verticalPadding+"px"};return b.reduce(["margin-left","margin-right"],function(a,e){if(!b.isUndefined(d.custom[c][e])){a[e]=d.custom[c][e]}return a},e)}function h(a,b,c){var d={height:c.height[a],"min-height":c.minHeight[a]};if(!c.custom[a].shouldPreventWidthMeasurement){d.width=c.width[a]}b.css(a,d);var e=a+"label";var f=g(a,e,c);b.css(e,f);b.data(a,{prevText:c.custom[a].text,prevMinWidth:c.minWidth[a],prevWidth:c.width[a]})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.SiteButton",[["label"]]);c.registerCustomMeasure("wysiwyg.viewer.components.SiteButton",f);c.registerSAFEPatcher("wysiwyg.viewer.components.SiteButton",h);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupCloseTextButton",[["label"]]);c.registerCustomMeasure("wysiwyg.viewer.components.PopupCloseTextButton",f);c.registerSAFEPatcher("wysiwyg.viewer.components.PopupCloseTextButton",h)});define("layout/wixappsLayout/proxyLayout/util/masonryCalculations",["lodash"],function(a){"use strict";var b={getColumnSidePadding:function(a,b,c,d){var e=d==="rtl";var f=Math.floor(c/b);var g=a*f;var h=(b-1-a)*f;return{right:e?g:h,left:e?h:g}},getMasonryRowsAndColumns:function(b,c){var d=[];var e=[];var f=[];for(var g=0;g<c;g++){e.push(0);f.push(0)}for(var h=0;h<b.length;h++){var i=a.indexOf(e,a.min(e));d.push({col:i,row:f[i],topOffset:e[i]});e[i]+=b[h];f[i]++}return d}};return b});define("layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/util/masonryCalculations"],function(a,b,c,d){"use strict";function e(b){var c=parseInt(a(b).attr("data-columns"),10);var d=a(b).attr("data-direction");var e=parseInt(a(b).attr("data-horizontal-gap"),10);var f=parseInt(a(b).attr("data-vertical-gap"),10);return{columns:c,direction:d,horizontalGap:e,verticalGap:f}}function f(a){return b.map(a.childNodes,"clientHeight")}function g(a){var c=f(a);var g=e(a);var h=a.childNodes;var i=d.getMasonryRowsAndColumns(c,g.columns);var j=Math.floor(a.clientWidth/g.columns);var k={domManipulations:[],needsRelayout:true};var l=k.domManipulations;var m=[];b.forEach(h,function(a,b){var c=i[b];var e=c.row*g.verticalGap+c.topOffset;var f=d.getColumnSidePadding(c.col,g.columns,g.horizontalGap,g.direction);var h=c.col*j;m.push(e);var k={position:"absolute",top:e+"px","padding-right":f.right+"px","padding-left":f.left+"px"};if(g.direction==="rtl"){k.right=h+"px"}else{k.left=h+"px"}l[b]={node:a,funcName:"css",params:k}});var n=b(h).map(function(a,b){return m[b]+c[b]}).max();l.push({node:a,funcName:"css",params:{height:n+"px"}});return k}c.registerCustomMeasure("PaginatedColumnGalleryProxy",g)});define("layout/wixappsLayout/proxyLayout/galleryProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b,c){"use strict";function d(c,d,e){var f=c.id+"itemsContainer";var g=a("#"+f);var h=a(c);var i=Number(h.attr("data-total-columns"));var j=Number(h.attr("data-total-rows"));var k=Number(h.attr("data-gap"));var l=[];var m=g.children();if(m.length){var n=m[0];var o=n.offsetWidth;var p=n.offsetHeight;l=b.map(m,function(b){var c=parseInt(a(b).attr("data-index"),10);var d=Math.floor(c/i)%j;var e=d*k;var f=c%i;var g=f*k;return{node:b,funcName:"css",params:{top:d*p+e,left:f*o+g}}})}e.height[f]=c.offsetHeight;e.width[f]=c.offsetWidth;e.height[c.id]=c.offsetHeight;e.width[c.id]=c.offsetWidth;return{domManipulations:l}}c.registerCustomMeasure("GalleryProxy",d)});define("layout/wixappsLayout/proxyLayout/imageProxyLayout",["zepto","lodash","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b,c){"use strict";function d(b,c,d){var e=a(b);var f=b.firstChild;var g=f.id;var h={width:parseInt(e.attr("data-width"),10),height:parseInt(e.attr("data-height"),10),uri:e.attr("data-uri"),quality:c.getGlobalImageQuality()};var i={displayMode:e.attr("data-display-mode")};d.width[g]=b.offsetWidth;d.height[g]=b.offsetHeight;d.custom[g]={thisIsMyHeight:d.height[g]};return{comp:{compType:"wysiwyg.viewer.components.WPhoto",compId:g,structureInfo:{dataItem:h,propertiesItem:i,layout:null,styleItem:null}},domManipulations:[]}}c.registerCustomMeasure("Image",d)});define("layout/wixappsLayout/proxyLayout/buttonProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";function b(a,b,c){var d=a.id;c.width[d]=a.offsetWidth;c.height[d]=a.offsetHeight;return{comp:{compType:"wysiwyg.viewer.components.SiteButton",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}}a.registerCustomMeasure("Button",b);a.registerCustomMeasure("Button2",b)});define("layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout",["layout/wixappsLayout/proxyLayoutRegistrar"],function(a){"use strict";a.registerCustomMeasure("MediaLabel",function(a,b,c){var d=a.id;c.width[d]=a.offsetWidth;c.height[d]=a.offsetHeight;return{comp:{compType:"wysiwyg.viewer.components.MediaRichText",compId:d,structureInfo:{dataItem:null,propertiesItem:null,layout:null,styleItem:null}},domManipulations:[]}})});define("layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout",["zepto","layout/wixappsLayout/proxyLayoutRegistrar"],function(a,b){"use strict";function c(b,c,d){var e=a(b);var f=b.firstChild;var g=f.id;var h={aspectRatio:e.attr("data-aspect-ratio"),imageMode:e.attr("data-image-mode")};d.width[g]=b.offsetWidth;d.height[g]=b.offsetHeight;return{comp:{compType:"wysiwyg.viewer.components.SliderGallery",compId:g,structureInfo:{dataItem:null,propertiesItem:h,layout:null,styleItem:null}},domManipulations:[]}}b.registerCustomMeasure("SliderGallery",c)});define("layout/specificComponents/imageButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout","imageClientApi"],function(a,b,c,d){"use strict";var e=["defaultImage","hoverImage","activeImage"];function f(a,b){return{width:b.width[a],height:b.height[a]}}function g(b,e,f,g,h,i,j){var k=h.dataItem[b];if(!k){return}var l=e+b;var m=a.defaults({displayMode:d.fittingTypes.LEGACY_FULL},k);c.patchNodeImage(l,f,g,i,m,j)}function h(b,c,d,h,i){var j=f(b,d);a.forEach(e,function(a){g(a,b,c,d,h,i,j)});var k=b+"link";c.css(k,{width:j.width,height:j.height})}function i(){var b=a.map(e,function(a){return{pathArray:[a],type:"core.components.Image"}});b.push(["link"]);return b}b.registerRequestToMeasureDom("wysiwyg.common.components.imagebutton.viewer.ImageButton");b.registerRequestToMeasureChildren("wysiwyg.common.components.imagebutton.viewer.ImageButton",i());b.registerSAFEPatcher("wysiwyg.common.components.imagebutton.viewer.ImageButton",h)});define("layout/specificComponents/mediaRichTextLayout",["layout/util/layout","zepto"],function(a,b){"use strict";a.registerRequestToMeasureDom("wysiwyg.viewer.components.MediaRichText");a.registerCustomMeasure("wysiwyg.viewer.components.MediaRichText",function(a,c,d){var e=b(d[a]);c.custom[a]={prevWidth:e.data("width")}});a.registerSAFEPatcher("wysiwyg.viewer.components.MediaRichText",function(a,b,c){var d=c.custom[a].prevWidth;var e=parseInt(c.width[a],10);if(!d||parseInt(d,10)!==e){b.data(a,{width:e});return true}b.css(a,{height:""});return false})});define("layout/specificComponents/backToTopButtonLayout",["layout/util/layout"],function(a){"use strict";function b(a,b,c){b.custom[a]={siteStructureBoundingClientRect:c.masterPage.getBoundingClientRect()}}function c(a,b,c){var d=a+"bg";b.css(d,{right:c.custom[a].siteStructureBoundingClientRect.left})}a.registerRequestToMeasureChildren("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",[["bg"]]);a.registerCustomMeasure("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",b);a.registerSAFEPatcher("wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton",c)});define("layout/specificComponents/appPartZoomLayout",["lodash","layout/util/layout","layout/specificComponents/wixappsLayout"],function(a,b,c){"use strict";function d(a){return a.appPartName?a.id:a.dataItemRef.id}function e(a,b){var c=b.id;var e=d(b);return a+c+e}function f(a,b,c){var d=a+"inlineContent";var e=Math.max(c.height[a],c.height.screen);b.css(d,{height:e})}function g(a,b,c,d){var e=Math.max(d.height[b],d.height.screen);c.css(a,{height:e})}function h(b,c){var d=a.has(b,"dataItemRef")?b.dataItemRef.appInnerID:b.appInnerID;return!!c.getClientSpecMapEntry(d)}b.registerRequestToMeasureChildren("wixapps.integration.components.AppPartZoom",function(a,b,e,f){if(!h(f.dataItem,a)){return null}var g=d(f.dataItem);var i=f.dataItem.id;return[[i,g],[i,g,c.inlineContentId]]});b.registerCustomMeasure("wixapps.integration.components.AppPartZoom",function(a,b,d,f,g){if(!h(g.dataItem,f)){return null}var i=e(a,g.dataItem);c.appPartMeasureFunction(i,b,d,f);b.custom[a]={marginTop:Math.max((b.height.screen-b.height[i])/2,0),height:b.height[i]}});b.registerSAFEPatcher("wixapps.integration.components.AppPartZoom",function(a,b,d,i,j){if(!h(i.dataItem,j)){return}var k=e(a,i.dataItem);if(j.isMobileView()){g(a,k,b,d);f(k,b,d)}else{c.appPartPatcherFunction(k,b,d,null,j)}});b.registerLayoutInnerCompsFirst("wixapps.integration.components.AppPartZoom",function(a,b,d,f,g){if(!h(a.dataItem,g)){return null}var i=e(a.id,a.dataItem);var j={id:i};var k=window.document.getElementById(i);var l={};l[a.id]=true;return{needsAdditionalInnerLayout:c.preMeasureProxies(j,k,d,f,g),changedCompsMap:l}},function(a,b,d,f,g){if(!h(a.dataItem,g)){return null}var i=e(a.id,a.dataItem);var j={id:i};return c.postPatchProxies(j,b,d,f,g)})});define("layout/specificComponents/facebookShareLayout",["layout/util/layout"],function(a){"use strict";var b="wysiwyg.viewer.components.FacebookShare";function c(a,b,c){var d=c[a].children[0];if(d){b.height[a]=Math.max(b.height[a],d.offsetHeight);b.width[a]=Math.max(b.width[a],d.offsetWidth)}}function d(a,b,c){var d=c.width[a];var e=c.height[a];b.css(a,{width:d,height:e})}a.registerCustomMeasure(b,c);a.registerSAFEPatcher(b,d);a.registerRequestToMeasureDom(b)});define("layout/specificComponents/paginatedGridGalleryLayout",["layout/util/layout","zepto","lodash","imageClientApi","coreUtils","layout/specificComponents/imageLayout"],function(a,b,c,d,e,f){"use strict";var g=e.matrix.calculations;function h(a,b,e,h,i,j,k,l,m){c.forEach(a,function(a,n){var o=g.getItemPosition(n,b,e,h.margin,h.numCols);j.css(l+a.imageItemId,{width:b,height:e,left:o.left,top:o.top});var p=c.assign({},m.dataItem.items[a.imageIndex],{displayMode:d.fittingTypes.SCALE_TO_FILL});f.patchNodeImage(l+a.imageItemId,j,k,i,p,{width:b,height:e})})}function i(a,d){var e=[["itemsContainer"]];var f=b("#"+d+"itemsContainer").children();c.forEach(f,function(a){e.push({pathArray:[a.id],type:"core.components.Image"})});return e}function j(a){return c.map(a,function(a){return{imageItemId:a.id,imageIndex:b(a).data("image-index")}})}function k(a,c,d){var e=c.custom[a]={};var f=b(d[a]);e.heightDiff=parseInt(f.data("height-diff"),10);e.widthDiff=parseInt(f.data("width-diff"),10);var g=b(d[a+"itemsContainer"]);e.nextItemsData=j(g.children('div[data-page-desc="next"]'));e.prevItemsData=j(g.children('div[data-page-desc="prev"]'));e.currItemsData=j(g.children('div[data-page-desc="curr"]'))}function l(a,b,c,d,e){var f=c.height[a];var i=c.width[a];var j=c.custom[a];var k=d.propertiesItem;b.css(a+"itemsContainer",{width:i-j.widthDiff,height:f-j.heightDiff});var l=g.getItemWidth(k.margin,k.numCols,i,j.widthDiff);var m=g.getAvailableRowsNumber(k.maxRows,k.numCols,d.dataItem.items.length);var n=g.getItemHeight(k.margin,f,m,j.heightDiff);h(j.nextItemsData,l,n,k,e,b,c,a,d);h(j.prevItemsData,l,n,k,e,b,c,a,d);h(j.currItemsData,l,n,k,e,b,c,a,d)}a.registerSAFEPatcher("wysiwyg.viewer.components.PaginatedGridGallery",l);a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PaginatedGridGallery",i);a.registerCustomMeasure("wysiwyg.viewer.components.PaginatedGridGallery",k);return{}});define("layout/specificComponents/PinterestFollowLayout",["layout/util/layout"],function(a){"use strict";a.registerCustomMeasure("wysiwyg.viewer.components.PinterestFollow",function(a,b,c){b.height[a]=c[a+"followButtonTag"].offsetHeight;b.width[a]=c[a+"followButtonTag"].offsetWidth});a.registerRequestToMeasureChildren("wysiwyg.viewer.components.PinterestFollow",[["followButtonTag"]]);return{}});define("layout/specificComponents/videoLayout",["layout/util/layout"],function(a){"use strict";var b={VIMEO:{WIDTH:100,HEIGHT:100},YOUTUBE:{WIDTH:200,HEIGHT:200}};var c={WIDTH:10,HEIGHT:10};function d(a,d,e,f,g){var h=b[g.dataItem.videoType]||c;d.minWidth[a]=h.WIDTH;d.minHeight[a]=h.HEIGHT;d.width[a]=Math.max(d.width[a],h.WIDTH);d.height[a]=Math.max(d.height[a],h.HEIGHT)}a.registerCustomMeasure("wysiwyg.viewer.components.Video",d)});define("layout/specificComponents/soundCloudLayout",["layout/util/layout"],function(a){"use strict";function b(a,b){var c=250;var d=50;b.minWidth[a]=c;b.minHeight[a]=d;b.width[a]=Math.max(b.width[a],c);b.height[a]=Math.max(b.height[a],d)}a.registerCustomMeasure("wysiwyg.viewer.components.SoundCloudWidget",b)});define("layout/specificComponents/verticalLineLayout",["layout/util/layout"],function(a){"use strict";
var b=2e3;a.registerCustomMeasure("wysiwyg.viewer.components.VerticalLine",function(a,c,d){c.height[a]=Math.min(c.height[a],b);c.width[a]=parseInt(d[a].style.width,10);c.left[a]=parseInt(d[a].style.left,10)})});define("layout/specificComponents/boxSlideShowLayout",["zepto","coreUtils","layout/util/layout","layout/specificComponents/balataLayout"],function(a,b,c,d){"use strict";var e=50;var f=b.balataConsts;function g(a,b){b.height[a]=Math.max(e,b.height[a]);b.minHeight[a]=e}function h(b,c,e,g,h){c.top[b]=0;c.left[b]=0;var i=a(e[b]);var j=i.data("parent-id");c.minHeight[b]=i.data("min-height");c.height[b]=c.height[j];if(!h.designDataItem.background){return}var k=b+f.BALATA;c.width[k]=c.width[b];c.height[k]=c.height[b];c.left[k]=c.left[b];var l=e[b].getBoundingClientRect();c.custom[b]={absoluteLeft:l.left};d.measure(b,c,e,g,h)}function i(a,b,c,e,f){if(!e.designDataItem.background){return}var g={top:c.top[a],left:c.left[a],width:c.width[a],height:c.height[a],absoluteLeft:c.custom[a].absoluteLeft};d.patch(a,b,c,e,f,g)}c.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShow",g);c.registerCustomMeasure("wysiwyg.viewer.components.BoxSlideShowSlide",h);c.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShow");c.registerRequestToMeasureDom("wysiwyg.viewer.components.BoxSlideShowSlide");c.registerRequestToMeasureChildren("wysiwyg.viewer.components.BoxSlideShowSlide",[["inlineContentParent"],["inlineContent"]].concat(d.BALATA_PATHS_TO_REQUEST_MEASURE));c.registerSAFEPatcher("wysiwyg.viewer.components.BoxSlideShowSlide",i)});define("layout/specificComponents/mediaContainerLayout",["lodash","zepto","layout/util/layout","layout/specificComponents/balataLayout","experiment"],function(a,b,c,d,e){"use strict";var f=["wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.MediaPlayer"];var g="container";function h(c,f,h,i,j){if(!j.designDataItem.background){return}d.measure(c,f,h,i,j);var k=h[c].getBoundingClientRect();f.absoluteLeft[c]=k.left;if(e.isOpen("sv_cssDesignData")){var l=c+g;h[l]=h[l]||b(h[c]).find("#"+l)[0];var m=window.getComputedStyle(h[l]);var n=parseInt(m.getPropertyValue("border-left-width"),10);if(a.isUndefined(f.borderWidth)){f.borderWidth={}}f.borderWidth[c]=n;f.width[c]=j.layout.width||h[c].clientWidth||f.width[c]}}function i(a,b,c,f,h){if(!f.designDataItem.background){return}if(e.isOpen("sv_cssDesignData")){b.css(a+g,{left:-c.borderWidth[a],top:-c.borderWidth[a]})}var i={top:0,left:0,width:c.width[a],height:c.height[a],absoluteLeft:c.absoluteLeft[a]};d.patch(a,b,c,f,h,i)}a.forEach(f,function(a){c.registerCustomMeasure(a,h);c.registerRequestToMeasureChildren(a,d.BALATA_PATHS_TO_REQUEST_MEASURE);c.registerSAFEPatcher(a,i)})});define("layout/specificComponents/verticalAnchorsMenuLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(c,d,e){var f=a(e[c]);var g=f.find("[class*=link]");var h=f.find("[class*=label]");var i=f.find("[class*=symbol]");var j=g.length;var k=i.width();var l=Math.ceil(g.height()*j);var m=0;b.forEach(h,function(b){m=Math.max(m,a(b).width())});var n=m+k;d.width[c]=Math.max(d.width[c],n);d.height[c]=Math.max(d.height[c],l);d.custom[c]={minHeight:l,minWidth:n}}function e(a,b,c){b.css(a,{width:c.width[a],height:c.height[a]})}c.registerCustomMeasure("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",d);c.registerSAFEPatcher("wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",e)});define("layout/specificComponents/columnsLayout",["lodash","coreUtils","layout/util/layout","layout/specificComponents/balataLayout"],function(a,b,c,d){"use strict";var e=b.balataConsts;function f(b,c,d,e,f,g,h){var i=b.structure;var j=i.id;g(i);d.minHeight[j]=0;d.height[j]=i.layout.height;var k=h(i);if(f.isMobileView()){d.top[j]=e[j].offsetTop}return{needsAdditionalInnerLayout:false,changedCompsMap:a.mapValues(k,a.constant(true))}}function g(c,f,g,h,i){var j=h.isMobileView();var k=b.dataUtils.getChildrenData(i.structure,j);var l=a.map(k,"id");if(j){var m=2*i.propertiesItem.rowMargin+(k.length-1)*i.propertiesItem.columnsMargin;a.forEach(l,function(a,b){m+=f.height[a];f.minHeight[a]=f.height[a];var d=b===l.length-1;if(d){f.injectedAnchors[a]=[{fromComp:a,distance:i.propertiesItem.rowMargin,topToTop:0,originalValue:0,type:"BOTTOM_PARENT",locked:true,targetComponent:c}]}else{f.injectedAnchors[a]=[{fromComp:a,distance:i.propertiesItem.columnsMargin,locked:true,originalValue:0,targetComponent:l[b+1],topToTop:0,type:"BOTTOM_TOP"}]}});f.height[c]=m;f.height[c+e.BALATA]=m}else{var n=a(f.height).pick(l).values().max();a.forEach(l,function(a){f.top[a]=i.propertiesItem.rowMargin;f.minHeight[a]=n;f.injectedAnchors[a]=[{fromComp:a,distance:0,originalValue:0,type:"BOTTOM_PARENT",locked:true,targetComponent:c}]});f.height[c]=n+2*i.propertiesItem.rowMargin;f.containerHeightMargin[c]=i.propertiesItem.rowMargin;f.height[c+e.BALATA]=n+2*i.propertiesItem.rowMargin}d.measure(c,f,g,h,i);var o=g[c].getBoundingClientRect();var p=g[c+e.BALATA].offsetLeft;f.custom[c]={absoluteLeft:o.left+p,backgroundLeft:g[c+e.BALATA].offsetLeft,backgroundWidth:g[c+e.BALATA].offsetWidth}}function h(a,b,c,e,f){b.css(a,{height:c.height[a],left:0});var g={top:0,left:c.custom[a].backgroundLeft,width:c.custom[a].backgroundWidth,height:c.height[a],absoluteLeft:c.custom[a].absoluteLeft};d.patch(a,b,c,e,f,g,true)}function i(a,b,c,f,g){b.height[a+e.BALATA]=b.minHeight[a];b.height[a]=b.minHeight[a];b.width[a]=c[a].offsetWidth;d.measure(a,b,c,f,g);var h=c[a].getBoundingClientRect();var i=c[a+e.BALATA].offsetLeft;b.custom[a]={absoluteLeft:h.left+i,backgroundLeft:c[a+e.BALATA].offsetLeft,backgroundWidth:c[a+e.BALATA].offsetWidth}}function j(a,b,c,e,f){b.css(a,{height:c.height[a]});var g={top:0,left:c.custom[a].backgroundLeft,width:c.custom[a].backgroundWidth,height:c.height[a],absoluteLeft:c.custom[a].absoluteLeft};d.patch(a,b,c,e,f,g,true)}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.StripColumnsContainer",d.BALATA_PATHS_TO_REQUEST_MEASURE);c.registerRequestToMeasureChildren("wysiwyg.viewer.components.Column",d.BALATA_PATHS_TO_REQUEST_MEASURE);c.registerLayoutInnerCompsFirst("wysiwyg.viewer.components.Column",f,a.noop);c.registerCustomMeasure("wysiwyg.viewer.components.StripColumnsContainer",g);c.registerSAFEPatcher("wysiwyg.viewer.components.StripColumnsContainer",h);c.registerCustomMeasure("wysiwyg.viewer.components.Column",i);c.registerSAFEPatcher("wysiwyg.viewer.components.Column",j)});define("layout/util/popupContainerDocking",["layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/balataLayout","siteUtils"],function(a,b,c){"use strict";var d={NINE_GRID:"nineGrid",FULL_HEIGHT:"fullHeight",FULL_WIDTH:"fullWidth"};function e(a,b){return{top:0,left:0,width:a,height:b,absoluteLeft:0}}return{measure:function(e,f,g,h,i){var j=i.propertiesItem;var k={};if(j.alignmentType===d.FULL_WIDTH){a.measureStripContainer(e,f,g,h,i);return}if(j.alignmentType===d.FULL_HEIGHT){f.minHeight[e]=f.innerHeight.screen;f.shrinkableContainer[e]=true}k.width=f.width[e];f.left[e]=c.compAlignmentUtils.getLeft(j,f.width[e],f.width.screen,h.getSiteWidth());b.measure(e,f,g,h,i,k)},patch:function(f,g,h,i,j){var k=i.propertiesItem;var l;var m=j.getCurrentPopupId();var n=c.compAlignmentUtils.getTop(k,h.height[f],h.innerHeight.screen);h.top[f]=n;l=h.height[m]=n+h.height[f];g.css(m,{height:l});g.css(f,{left:h.left[f],top:n,width:h.width[f],height:h.height[f]});if(k.alignmentType===d.FULL_WIDTH){a.patchStripContainer(f,g,h,i,j,{width:h.width[f]})}else{b.patch(f,g,h,i,j,e(h.width[f],h.height[f]))}}}});define("layout/specificComponents/popupContainerLayout",["lodash","layout/util/layout","layout/util/popupContainerDocking","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/balataLayout"],function(a,b,c,d,e){"use strict";function f(a,b,e,f,g){d.measureContainer(a,b,e,f,g);c.measure(a,b,e,f,g);var h=g.propertiesItem;b.width["ROOT_"+g.rootId]=h.alignmentType==="fullWidth"?f.getSiteWidth():b.width[a];b.left["ROOT_"+g.rootId]=Math.floor(b.left[a]-f.getSiteX())}function g(a,b,d,e,f){c.patch(a,b,d,e,f)}b.registerMeasureChildrenFirst("wysiwyg.viewer.components.PopupContainer",true);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.PopupContainer",[["inlineContent"]].concat(e.BALATA_PATHS_TO_REQUEST_MEASURE));b.registerRequestToMeasureDom("wysiwyg.viewer.components.PopupContainer");b.registerCustomMeasure("wysiwyg.viewer.components.PopupContainer",f);b.registerSAFEPatcher("wysiwyg.viewer.components.PopupContainer",g)});define("layout/specificComponents/comboBoxInputLayout",["lodash","zepto","layout/util/layout"],function(a,b,c){"use strict";function d(c,d,e){var f=a.head(b(e[c]).find("select"));d.height[c]=f.offsetHeight;d.width[c]=f.offsetWidth}function e(a,b,c){var d=c.height[a];var e=c.width[a];b.css(a,{height:d,width:e})}c.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.ComboBoxInput",[["select"]]);c.registerCustomMeasure("wysiwyg.viewer.components.inputs.ComboBoxInput",d);c.registerSAFEPatcher("wysiwyg.viewer.components.inputs.ComboBoxInput",e)});define("layout/specificComponents/textComponentsLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b,c){var d=c[a+"textarea"];b.height[a]=d.offsetHeight;b.width[a]=d.offsetWidth}function d(a,b,c){var d=c[a+"input"];b.height[a]=d.offsetHeight;b.width[a]=d.offsetWidth}function e(a,b,c){b.css(a,{height:c.height[a],width:c.width[a]})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.TextInput",[["input"]]);b.registerCustomMeasure("wysiwyg.viewer.components.inputs.TextInput",d);b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.TextInput",e);b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.TextAreaInput",[["textarea"]]);b.registerCustomMeasure("wysiwyg.viewer.components.inputs.TextAreaInput",c);b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.TextAreaInput",e)});define("layout/specificComponents/radioButtonLayout",["lodash","layout/util/layout","zepto"],function(a,b,c){"use strict";function d(a,b,d){var e=d[a].id;var f=c("#"+e+"circle-shadow")[0];var g=c("#"+e+"text")[0];b.height[a]=Math.max(f.offsetHeight,g.scrollHeight);b.width[a]=f.offsetWidth+g.offsetWidth}function e(a,b,c){b.css(a,{height:c.height[a],width:c.width[a]})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.RadioButton",[["circle-shadow"],["text"]]);b.registerCustomMeasure("wysiwyg.viewer.components.inputs.RadioButton",d);b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.RadioButton",e)});define("layout/specificComponents/datePickerLayout",["zepto","layout/util/layout"],function(a,b){"use strict";function c(b,c,d){var e=d[b+"icon"];var f=d[b+"input"];var g=d[b+"inputWrapper"];var h=56;var i=e.height.baseVal.value+16;var j=parseInt(a(f).css("line-height"),10)||0;var k=parseInt(a(g).css("border-width"),10)||0;var l=k*2;c.height[b]=Math.max(g.offsetHeight,i);c.width[b]=Math.max(g.offsetWidth,h);c.minHeight[b]=Math.max(j,i)+l;c.minWidth[b]=h+l}function d(a,b,c){b.css(a,{height:c.height[a],width:c.width[a]})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.DatePicker",[["icon"],["inputWrapper"],["input"]]);b.registerCustomMeasure("wysiwyg.viewer.components.inputs.DatePicker",c);b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.DatePicker",d)});define("layout/specificComponents/radioGroupLayout",["lodash","layout/util/layout"],function(a,b){"use strict";function c(a,b,c){b.height[a]=c[a+"items"].offsetHeight}function d(a,b,c){b.css(a,{height:c.height[a]})}function e(b,c,d,e){return a.map(e.dataItem.options,function(a,b){return{type:"wysiwyg.viewer.components.inputs.RadioButton",pathArray:["radio"+b]}}).concat([["items"]])}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.inputs.RadioGroup",e);b.registerCustomMeasure("wysiwyg.viewer.components.inputs.RadioGroup",c);b.registerSAFEPatcher("wysiwyg.viewer.components.inputs.RadioGroup",d)});define("layout/specificComponents/gridLayout",["lodash","layout/util/layout"],function(a,b){"use strict";var c=200;var d={PAGES:"pagination",SCROLL:"virtual",NONE:"normal"};var e={MANUAL:"manual",AUTOMATIC:"auto"};var f="headerDivider_w";var g="rowDivider_w";function h(a,b){return a.styleItem.style.properties[b]||""}function i(a){var b=a.propertiesItem.pagination;return a.dataItem.numberOfDisplayedRows||(b&&b.type===d.PAGES?b.rowsPerPage:a.dataItem.rows.length)}function j(a,b,d,j,k){var l=d[a];b.width[a]=l.offsetWidth;b.height[a]=l.offsetHeight;var m=k.propertiesItem;var n=m.rowHeight+Number(h(k,g));var o=Math.min(i(k),c);var p=m.showHeader?m.headerHeight+Number(h(k,f)):0;var q=Number(k.styleItem.style.properties.containerBrw)||0;var r=p+o*n+2*q;var s=m.heightLayout===e.AUTOMATIC;var t=l.getElementsByClassName("ag-bl-center ag-bl-full-height-center");if(t.length){var u=l.getElementsByClassName("ag-body");var v=s?r:t[0].clientHeight;u[0].style.height=v-2*q-p+"px"}if(r&&s){b.height[a]=r}}b.registerCustomMeasure("wysiwyg.viewer.components.Grid",j)});define("layout/specificComponents/fileUploaderLayout",["zepto","lodash","layout/util/layout"],function(a,b,c){"use strict";function d(b,c,d){var e=a(d[b]);var f=e.find("#"+b+"files");var g=e.find("#"+b+"buttonLabel");var h=e.find("#"+b+"chooseFileButton");var i=window.getComputedStyle(f[0]);var j=window.getComputedStyle(h[0]);var k=parseInt(j.borderLeftWidth,10)*2;var l=15;var m=8;var n=16;var o=20;c.minHeight[b]=parseInt(i.height,10)+parseInt(i.marginTop,10)+Math.max(g[0].offsetHeight,l+m)+k;c.width[b]=Math.max(g[0].offsetWidth+k+n+o,c.width[b])}function e(a,b,c){var d={height:Math.max(c.minHeight[a],c.height[a]),width:c.width[a]};b.css(a,d)}c.registerCustomMeasure("wysiwyg.viewer.components.inputs.FileUploader",d);c.registerSAFEPatcher("wysiwyg.viewer.components.inputs.FileUploader",e)});define("layout/specificComponents/appControllerLayout",["layout/util/layout"],function(a){"use strict";var b="platform.components.AppController";a.registerCustomMeasure(b,function(a,b,c){if(c[a+"inlineContent"]){b.width[a]=b.width[a+"inlineContent"];b.height[a]=b.height[a+"inlineContent"]}});a.registerRequestToMeasureChildren(b,[["inlineContent"]])});define("layout/specificComponents/linkBarLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(a,b,c){"use strict";var d="image";function e(b,c,e,f){var g=f.dataItem.items;return a.map(g,function(a,b){return{type:"core.components.Image",pathArray:[""+b,d]}})}function f(b,e,f,g,h){var i=a.get(g,["propertiesItem","iconSize"]);var j={width:i,height:i};var k=g.dataItem.items;a.forEach(k,function(a,g){c.patchNodeImage(b+g+d,e,f,h,a,j,a.alignType)})}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.LinkBar",e);b.registerSAFEPatcher("wysiwyg.viewer.components.LinkBar",f)});define("layout/specificComponents/flashComponentLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(a,b,c){"use strict";function d(a,b,d,e,f){c.patchNodeImage(a+"noFlashImg",b,d,f,e.dataItem.placeHolderImage,{width:e.dataItem.placeHolderImage.width,height:e.dataItem.placeHolderImage.height},e.dataItem.placeHolderImage.alignType)}b.registerRequestToMeasureChildren("wysiwyg.viewer.components.FlashComponent",[{type:"core.components.Image",pathArray:[""+"noFlashImg"]}]);b.registerSAFEPatcher("wysiwyg.viewer.components.FlashComponent",d)});define("layout/specificComponents/rssButtonLayout",["lodash","layout/util/layout","layout/specificComponents/imageLayout"],function(a,b,c){"use strict";function d(b,c,d,e){return[{type:"core.components.Image",pathArray:[a.get(e,["dataItem","image","id"])]}]}function e(b,d,e,f,g){var h=a.get(f,"layout");var i=a.get(f,["dataItem","image"]);a.assign(i,{displayMode:"full"});c.patchNodeImage(b+a.get(i,"id"),d,e,g,i,h)}b.registerRequestToMeasureChildren("wysiwyg.common.components.rssbutton.viewer.RSSButton",d);b.registerSAFEPatcher("wysiwyg.common.components.rssbutton.viewer.RSSButton",e)});define("layout",["layout/util/layout","layout/specificComponents/wixHomepageMenuLayout","layout/specificComponents/fiveGridLineLayout","layout/specificComponents/domainSearchLayout","layout/specificComponents/registerToMeasureOnly","layout/specificComponents/registerToPureDomMeasure","layout/specificComponents/areaTooltipLayout","layout/specificComponents/menuLayout","layout/specificComponents/sliderGalleryLayout","layout/specificComponents/verticalMenuLayout","layout/specificComponents/loginButtonLayout","layout/specificComponents/dialogLayout","layout/specificComponents/siteBackgroundLayout","layout/specificComponents/wPhotoLayout","layout/specificComponents/documentMediaLayout","layout/specificComponents/containerAndScreenWidthLayout","layout/specificComponents/groupLayout","layout/specificComponents/wixappsLayout","layout/specificComponents/shapeLayout","layout/specificComponents/richtextLayout","layout/specificComponents/matrixGalleryLayout","layout/specificComponents/slideShowLayout","layout/specificComponents/anchorLayout","layout/specificComponents/tinyMenuLayout","layout/specificComponents/imageZoomLayout","layout/specificComponents/tpaGalleryLayout","layout/specificComponents/youTubeSubscribeButtonLayout","layout/specificComponents/wFacebookCommentLayout","layout/specificComponents/facebookLikeLayout","layout/specificComponents/formMixinLayout","layout/specificComponents/backOfficeTextLayout","layout/specificComponents/vkShareLayout","layout/specificComponents/adminLoginLayout","layout/specificComponents/homePageLoginLayout","layout/specificComponents/iTunesButtonLayout","layout/specificComponents/paypalLayout","layout/specificComponents/bgImageLayout","layout/specificComponents/wixSiteLayout","layout/specificComponents/buttonLayout","layout/wixappsLayout/proxyLayoutRegistrar","layout/wixappsLayout/proxyLayout/paginatedColumnGalleryProxyLayout","layout/wixappsLayout/proxyLayout/galleryProxyLayout","layout/wixappsLayout/proxyLayout/imageProxyLayout","layout/wixappsLayout/proxyLayout/buttonProxyLayout","layout/wixappsLayout/proxyLayout/mediaLabelProxyLayout","layout/wixappsLayout/proxyLayout/sliderGalleryProxyLayout","layout/specificComponents/imageButtonLayout","layout/specificComponents/mediaRichTextLayout","layout/specificComponents/backToTopButtonLayout","layout/specificComponents/appPartZoomLayout","layout/specificComponents/facebookShareLayout","layout/specificComponents/paginatedGridGalleryLayout","layout/specificComponents/PinterestFollowLayout","layout/specificComponents/videoLayout","layout/specificComponents/soundCloudLayout","layout/specificComponents/verticalLineLayout","layout/specificComponents/boxSlideShowLayout","layout/specificComponents/mediaContainerLayout","layout/specificComponents/verticalAnchorsMenuLayout","layout/specificComponents/columnsLayout","layout/specificComponents/popupContainerLayout","layout/specificComponents/comboBoxInputLayout","layout/specificComponents/textComponentsLayout","layout/specificComponents/radioButtonLayout","layout/specificComponents/datePickerLayout","layout/specificComponents/radioGroupLayout","layout/specificComponents/gridLayout","layout/specificComponents/fileUploaderLayout","layout/specificComponents/appControllerLayout","layout/specificComponents/linkBarLayout","layout/specificComponents/flashComponentLayout","layout/specificComponents/rssButtonLayout"],function(a){"use strict";return a});
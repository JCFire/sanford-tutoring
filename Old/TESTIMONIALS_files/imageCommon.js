define("imageCommon/bi/errors.json",[],function(){return{IMAGE_FILTER_NOT_VALID:{errorName:"image_filter_not_valid",errorCode:556,severity:"error",params:{p1:"filterName"}}}});define("imageCommon/bi/errors",["imageCommon/bi/errors.json","lodash","utils"],function(a,b,c){"use strict";b.forEach(a,function(a,b){a.errorName=b});c.logger.register("components","error",a);return a});define("imageCommon/utils/imageElementFactoryMixin",["react","lodash","utils","santaProps","imageCommon/bi/errors"],function(a,b,c,d,e){"use strict";var f=c.svgFilters;return{propTypes:{staticMediaUrl:d.Types.ServiceTopology.staticMediaUrl,reportBI:d.Types.reportBI,"data-type":a.PropTypes.string,effectName:a.PropTypes.string,id:a.PropTypes.string},contextTypes:{shouldRenderImageSource:a.PropTypes.bool},imageForLoadEvents:null,getSvgStyle:function(a){return{style:{width:b.get(a.style,"width",0),height:b.get(a.style,"height",0),left:0,top:0,overflow:"hidden",position:"absolute",visibility:"hidden"}}},assignLoadEvents:function(){if(!this.eventsToAssign){return}var a=this.eventsToAssign.readyCallback;var b=this.eventsToAssign.errorCallback;var c=this.eventsToAssign.uri;delete this.eventsToAssign;if(!this.imageForLoadEvents){this.imageForLoadEvents=new window.Image;if(a){this.imageForLoadEvents.onload=a}if(b){this.imageForLoadEvents.onerror=b}}this.imageForLoadEvents.src=c},getImageAttributes:function(a,c,d){var e=a.css||{};var f=c?{WebkitFilter:"url(#"+c+")",filter:"url(#"+c+")"}:{};var g={displayName:"Image Element",id:this.props.id+"image",ref:"image",key:"image"+c,style:f,alt:d,"data-type":this.props["data-type"],itemProp:a.itemProp};if(this.context&&this.context.shouldRenderImageSource){b.assign(g.style,e.img);g.src=a.uri}return g},getSvgImageAttributes:function(a,c){var d=a.attr||{};var e=b.assign({displayName:"SVG Image Element",id:this.props.id+"image",ref:"image",key:"image",xlinkHref:a.uri,"data-type":this.props["data-type"]},d.img);if(c){e.filter="url(#"+c+")"}return e},getSvgAttributes:function(a,c){return b.assign({displayName:"SVG Filter",ref:"svg",key:"svg"+c,version:"1.1"},a)},getValidEffectName:function(){var a="";var b=this.props.effectName;if(b&&b!=="none"){if(f.isFilterExists(b)){a=b}else{this.props.reportBI(e.IMAGE_FILTER_NOT_VALID,{filterName:b})}}return a},getSvgDefsAttributes:function(a,b,c){var d={ref:"defs",key:"defs"+b};if(b){d.dangerouslySetInnerHTML={__html:f.getFilter(b,a,c)}}return d},getSvgOnlyImageComponent:function(b,c,d){var e,f,g,h;var i=this.getValidEffectName();var j=i&&i+"-"+this.props.id;var k={staticMediaUrl:this.props.staticMediaUrl};if(c||d){this.eventsToAssign={uri:b.uri,readyCallback:c,errorCallback:d}}h=this.getSvgImageAttributes(b,j);f=this.getSvgAttributes(b.attr.container,j);g=i?this.getSvgDefsAttributes(i,j,k):{};e=a.createElement("svg",f,[a.createElement("defs",g),a.createElement("image",h)]);return e},getImageComponents:function(c,d,e){var f,g,h,i,j,k,l;var m=this.getValidEffectName();var n=m&&m+"-"+this.props.id;var o=b.get(this,"props.imageData.alt","");if(d||e){this.eventsToAssign={uri:c.uri,readyCallback:d,errorCallback:e}}j=this.getImageAttributes(c,n,o);g=a.createElement("img",j);if(m){l={staticMediaUrl:this.props.staticMediaUrl};k=this.getSvgStyle(j);h=this.getSvgAttributes(k,n);i=this.getSvgDefsAttributes(m,n,l);f=a.createElement("svg",h,a.createElement("defs",i));return[g,f]}return g},componentDidMount:function(){this.assignLoadEvents()},componentDidUpdate:function(){this.assignLoadEvents()}}});define("imageCommon",["imageCommon/utils/imageElementFactoryMixin"],function(a){"use strict";return{imageElementFactoryMixin:a}});
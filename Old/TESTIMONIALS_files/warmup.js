define("warmup/lib/indicator",[],function(){"use strict";var a;var b={INITIAL:"initial",LAYOUT:"layout",SUCCESS:"success",FAIL:"fail"};function c(){d();e();f(b.INITIAL)}function d(){var a=window.document.createElement("style");a.appendChild(window.document.createTextNode(""));window.document.body.appendChild(a);a.sheet.insertRule("#warmup-indicator { width: 120px; height: 20px; line-height: 20px; font-size: 15px; position: fixed; bottom: 0; left: 0; z-index: 2147483647; border: 2px solid black; text-align: center; border-radius: 4px; text-transform: capitalize; background-color: yellow; }",0);a.sheet.insertRule("#warmup-indicator.layout { background-color: orange; }",0);a.sheet.insertRule("#warmup-indicator.success { background-color: green; }",0);a.sheet.insertRule("#warmup-indicator.fail { background-color: red; }",0)}function e(){a=window.document.createElement("div");a.setAttribute("id","warmup-indicator");window.document.body.appendChild(a)}function f(b){if(!a){return}a.innerHTML=b;a.setAttribute("class",b)}return{init:c,updateState:f,STATES:b}});define("warmup/lib/layout",["lodash","coreUtils","siteUtils","wixUrlParser","warmup/lib/indicator","layout"],function(a,b,c,d,e,f){"use strict";function g(g,i){i=i||a.noop;var j=new c.SiteData(a.assign({},g,{pagesData:window.warmupData.pagesData}));var k=d.parseUrl(j,j.currentUrl.full);var l=k.pageId;var m={inner:{structure:j.pagesData[l].structure,pageId:l,getDomNodeFunc:h},outer:{structure:j.pagesData.masterPage.structure,pageId:"masterPage",getDomNodeFunc:h}};var n={getSiteData:function(){return j},getAllRenderedRootIds:function(){return["masterPage",l]},getRuntimeDal:function(){return{getCompData:function(){return null},getCompDesign:function(){return null},getCompProps:function(){return null},getActionsAndBehaviors:function(){return null}}}};j.anchorsMap=window.warmupData.anchorsMap;b.urlUtils.setPersistentCacheKiller(window.warmupData.persistentCacheKiller);f.reLayout(m,n);h("masterPage").style.visibility="";h(k.pageId).style.visibility="";e.updateState(e.STATES.LAYOUT);i()}function h(){var b=a.toArray(arguments);var c=b.join("");var d=window.document.getElementById(c);if(!d){var e=b[0];var f=b.slice(1).map(function(a){return a.replace(e,"")}).join("");d=window.document.getElementById(e+f)}return d}return{runLayout:g}});define("warmup/lib/iframesHandler",["zepto","lodash"],function(a,b){"use strict";var c=[];function d(){var a=f();a.forEach(function(a){c.push({ref:a,isLoaded:false});a.addEventListener("load",g,false)})}function e(){c.forEach(function(a){a.ref.removeEventListener("load",g)})}function f(){return a("iframe[data-src]")}function g(a){var d=b.filter(c,{ref:this})[0];d.isLoaded=true;d.event=a}function h(){e();b(c).filter(function(a){return a.isLoaded&&typeof a.ref.onload==="function"}).forEach(function(a){a.ref.onload(a.event)});c=null}return{registerIframesOnLoad:d,flushEvents:h}});define("warmup/lib/postMessageHandler",["lodash"],function(a){"use strict";var b=[];function c(){window.addEventListener("message",e,false)}function d(){window.removeEventListener("message",e)}function e(a){b.push(a)}function f(){d();a.forEach(b,function(a){window.dispatchEvent(a)});b=null}return{registerToPostMessages:c,flushPostMessages:f}});define("warmup",["zepto","coreUtils","warmup/lib/layout","warmup/lib/indicator","warmup/lib/iframesHandler","warmup/lib/postMessageHandler"],function(a,b,c,d,e,f){"use strict";function g(g,h){a(function(){if(b.urlUtils.isTrue("ssrindicator")){d.init()}f.registerToPostMessages();e.registerIframesOnLoad();a("#SITE_ROOT").css({"min-height":"100%",position:"relative",margin:"0 auto"});c.runLayout(g,h)})}function h(){e.flushEvents();f.flushPostMessages()}return{init:g,postClientRenderOperations:h,indicator:d}});
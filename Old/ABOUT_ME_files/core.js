define("core/siteRender/styleCollector",["lodash","utils","skins"],function(a,b,c){"use strict";var d=c.skins;var e={};function f(a,b,c){var d=c.styleId&&a.getDataByQuery(c.styleId,b,a.dataTypes.THEME);return{dataItem:c.dataQuery&&a.getDataByQuery(c.dataQuery,b),propertiesItem:c.propertyQuery&&a.getDataByQuery(c.propertyQuery,b,a.dataTypes.PROPERTIES),styleItem:d,structure:c}}function g(b,c){if(c&&!b[c]){b[c]="s"+a.size(b)}}function h(a,b){return a[b]&&d[a[b].skin]}function i(a,b,c){if(a.styleId&&h(b,a.styleId)){g(c,a.styleId)}else if(a.skin&&d[a.skin]){g(c,a.skin)}}function j(a,b,c,d,g){if(a.componentType&&e[a.componentType]){var h=f(c,g,a);e[a.componentType](h,b,c,d,g)}}function k(b,c,d){if(b.modes&&b.modes.overrides){a.forEach(b.modes.overrides,function(a){if(a.styleId&&h(c,a.styleId)){g(d,a.styleId)}})}}function l(c,d,e,f,g,h){i(c,d,f);k(c,d,f);j(c,d,e,f,g);var m=b.dataUtils.getChildrenData(c,!!h);a(m).compact().forEach(function(a){l(a,d,e,f,g)})}function m(c,d,e,f,g,h){i(c,d,f);j(c,d,e,f,g);var k=b.dataUtils.getChildrenData(c,!!h);a(k).compact().forEach(function(a){m(a,d,e,f,g)})}function n(a,b){e[a]=b}return{collectStyleIdsFromStructure:m,collectStyleIdsFromFullStructure:l,registerClassBasedStyleCollector:n}});define("core/fonts/FontRuler",["react","reactDOM","utils"],function(a,b,c){"use strict";function d(a){return a&&a.offsetWidth&&a.offsetHeight}function e(a,b){return a.offsetWidth!==b.offsetWidth||a.offsetHeight!==b.offsetHeight}function f(a){return a&&{offsetWidth:a.offsetWidth,offsetHeight:a.offsetHeight}}var g=a.createClass({displayName:"FontRuler",handleFontResize:function(){if(!this.isMounted()){return}if(this.triggeredResize){return}var a=this.trigger;if(!a){a=d(this.contentNodeOrigSize);if(a){var f=b.findDOMNode(this.refs.content);if(!f){return}a=e(f,this.contentNodeOrigSize)}}if(a){if(this.rafID){c.animationFrame.cancel(this.rafID);this.rafID=0}this.triggeredResize=true;this.props.onLoadCallback(this.props.fontFamily)}else if(!this.rafID){this.rafID=c.animationFrame.request(this.updateCurrentSize)}},updateCurrentSize:function(){this.rafID=0;var a=b.findDOMNode(this.refs.wrapper);if(!a){return}var c=b.findDOMNode(this.refs.content);var g=b.findDOMNode(this.refs.innerContent);var h=b.findDOMNode(this.refs.innerWrapper);var i=f(a);a.style.width=i.offsetWidth-1+"px";a.style.height=i.offsetHeight-1+"px";a.scrollLeft=a.scrollWidth-a.clientWidth;a.scrollTop=a.scrollHeight-a.clientHeight;g.style.width=i.offsetWidth+1+"px";g.style.height=i.offsetHeight+1+"px";h.scrollLeft=h.scrollWidth-h.clientWidth;h.scrollTop=h.scrollHeight-h.clientHeight;if(d(c)){if(this.contentNodeOrigSize){this.trigger=e(c,this.contentNodeOrigSize)}else{this.contentNodeOrigSize=f(c)}c.style.fontFamily=this.props.fontFamily+", serif"}},componentDidMount:function(){this.trigger=false;this.triggeredResize=false;this.updateCurrentSize()},componentWillUnmount:function(){if(this.rafID){c.animationFrame.cancel(this.rafID);this.rafID=0}},render:function(){var b=a.DOM.div({ref:"innerContent",refInParent:"innerContent"});var c=a.DOM.div({ref:"innerWrapper",refInParent:"innerWrapper",onScroll:this.handleFontResize,style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"}},b);var d=a.DOM.div({style:{position:"relative",whiteSpace:"nowrap",fontFamily:"serif"}},c,a.DOM.span({ref:"content",className:"font-ruler-content"}));var e=a.DOM.div({ref:"wrapper",refInParent:"wrapper",onScroll:this.handleFontResize,style:{position:"absolute",overflow:"hidden",fontSize:1200,left:-2e3,visibility:"hidden"}},d);return e}});return g});define("core/fonts/FontRulersContainer",["react","lodash","core/fonts/FontRuler","utils"],function(a,b,c,d){"use strict";var e=30;var f=e*10;var g=a.createFactory(c);var h=a.createClass({displayName:"FontRulersContainer",getInitialState:function(){var a=this.props.siteData;this.invokeCallback=b.debounce(this.invokeCallback,a.browser.firefox||a.os.ios?f:e);return{loadedFonts:[]}},fontLoaded:function(a){var b=this.state.loadedFonts.concat(a);if(this.isMounted()){this.setState({loadedFonts:b});d.fonts.renderedFontsList.set(b)}this.invokeCallback()},invokeCallback:function(){d.performance.finish("font ruler");this.props.onLoadCallback()},componentDidMount:function(){d.performance.startOnce("font ruler")},render:function(){var c=this.props.fontsList;var d=[{key:"fontRulersContainer",style:{overflow:"hidden",visibility:"hidden",maxHeight:0,maxWidth:0,position:"absolute"}},a.DOM.style({dangerouslySetInnerHTML:{__html:'.font-ruler-content::after {content:"@#$%%^&*~IAO"}'}})];b.forEach(c,function(a){if(!b.includes(this.state.loadedFonts,a)){d.push(g({key:a,fontFamily:a,onLoadCallback:this.fontLoaded}))}}.bind(this));return a.DOM.div.apply(undefined,d)},hasPendingFonts:function(){return b.difference(this.props.fontsList,this.state.loadedFonts).length>0}});return h});define("core/fonts/fontsLoader",["lodash","react","fonts","core/fonts/FontRulersContainer"],function(a,b,c,d){"use strict";var e=b.createFactory(d);function f(a,b,c,d){return e({fontsList:a,siteData:b,onLoadCallback:c,ref:d,key:d})}function g(b,d,e,f,g){var h=a.map(b,function(a){return c.fontUtils.getPageUsedFontsList(d,a)});var i=a(h).concat(e).flattenDeep().uniq().value();return this.getRulersNode(i,d,f,g)}return{getRulersNode:f,getFontsLoaderNode:g}});define("core/fonts/collectFontsFromLoadedCompStyles",["lodash","skins","fonts"],function(a,b,c){"use strict";var d=b.skins;var e=c.fontUtils;function f(a){return/^(font|color)_[0-9]+$/.test(a)?"theme":"value"}function g(b,c,h){var i=[];if(c.exports){i=a(c.exports).pickBy(function(a){return a.skin&&d[a.skin]}).flatMap(function(a){return g(b,d[a.skin],h)}).value()}if(c.params){var j=a.keys(a.omitBy(c.params,function(a){return a!=="FONT"}));if(a.has(h,"style.properties")){a.forEach(j,function(a){var d="";var g=h.style.properties[a]||c.paramsDefaults[a];var j=f(g);if(j==="value"){d=e.parseFontStr(g).family.toLowerCase()}else if(j==="theme"){d=e.getFontFamilyByStyleId(b,g)}if(d){i.push(d.replace(/\u0000$/,""))}})}}return i}function h(b,c){var e=a.get(b,["pagesData","masterPage","data","theme_data"]);var f=e.THEME_DATA;return a(e).pick(c).reduce(function(a,b,c){var e=d[b?b.skin:c];if(e){return a.concat(g(f,e,b))}return a},[])}return h});define("core/siteRender/WixThemeReact",["zepto","lodash","react","skins","fonts","utils","core/fonts/fontsLoader","core/fonts/collectFontsFromLoadedCompStyles","reactDOM"],function(a,b,c,d,e,f,g,h,i){"use strict";var j="testStyles";var k=1e3;var l=e.fontUtils;var m=e.fontCss;var n=f.fonts.uploadedFontsUtils;var o=f.cssUtils;var p=d.skinsRenderer;var q=d.skins;function r(a){var b=a.santaBase+"/static/css/mobileIEFix.css";return c.DOM.link({rel:"stylesheet",type:"text/css",href:b})}function s(a,d,e){if(e){d=b.map(d.trim().split("\n"),function(a){var c=a.split("{");var d=c[0].split(",");c[0]=b.map(d,function(a){return e+" "+a});return c.join("{")}).join("\n")}return c.DOM.style({type:"text/css",key:a,dangerouslySetInnerHTML:{__html:d||""}})}function t(a,b){var c=[];var d=m.getThemeFontsCss(a.THEME_DATA.font,a.THEME_DATA.color);c.push(s("theme_fonts",d,b));var e=o.getColorsCssString(a.THEME_DATA.color);c.push(s("theme_colors",e,b));return c}function u(a,c,d,e,f,g,h){var i=b.get(e,"style.properties")||{};var j=p.createSkinCss(c,i,a.THEME_DATA,d,f,h);return s(d,j,g)}function v(a,c,d,e,g){var h=[];b.forEach(b.keys(c),function(b){var f=c[b];var i=a[b];var j=q[i?i.skin:b];if(j){h.push(u(a,j,f,i,d,e,g))}});h.push(u(a,q["wysiwyg.viewer.skins.wixadsskins.WixAdsWebSkin"],"wixAds",null,d,e,g));h.push(u(a,q["skins.viewer.deadcomp.DeadCompPublicSkin"],"deadComp",null,d,e,g));h.push(u(a,q["wysiwyg.viewer.skins.siteBackgroundSkin"],"siteBackground",null,d,e,g));h.push(u(a,q["wysiwyg.viewer.skins.PasswordLoginSkin"],"loginDialog",null,d,e,g));var i=f.constants.POPUP.POPUP_OVERLAY_CONTAINER;h.push(u(a,q[i.SKIN],i.STYLE_ID,null,d,e,g));return h}function w(a,b){var d=(b?b+" ":"")+"."+j+" {position:absolute; display: none; z-index: "+a+"}";return[c.DOM.style({type:"text/css",key:"testStyle"},d),c.DOM.div({ref:j,className:j})]}function x(a,b){var c=window.document.getElementById("font_"+b);if(!c){return true}c.removeAttribute("media");return false}return c.createClass({displayName:"WixThemeReact",getInitialState:function(){this.testNodeIndex=0;this.waitingForStylesReady=false;this.waitingStartTime=0;this.skinsFonts=[];return null},render:function(){this.testNodeIndex=(this.testNodeIndex+1)%100;var a=[{key:"theme"}];var d=this.props.themeData;var e=this.props.siteData;var f=this.props.siteAPI;var i=this.props.masterPage.data.document_data.masterPage;if(d.THEME_DATA&&d.THEME_DATA.font){var j=h(e,b.keys(this.props.loadedStyles));this.skinsFonts=b.union(this.skinsFonts,j);if(e.getBrowser().ie&&!e.isMobileView()){a.push(r(e))}a=a.concat(t(d,this.props.styleRoot),v(d,this.props.loadedStyles,this.props.siteData.mobile,this.props.styleRoot,e.serviceTopology),w(this.testNodeIndex,this.props.styleRoot));var k=f.getRootIdsWhichShouldBeRendered();a=a.concat(this.getUploadedFontsStyles(k));if(this.props.shouldRenderPage){a=a.concat(this.getFontsCssLinks(e,i),g.getFontsLoaderNode(k,e,j,this.waitForStylesReady,"fontsLoader"))}}return c.DOM.div.apply(undefined,a)},componentWillUnmount:function(){this.afterStylesReadyCallback=null;this.waitingForStylesReady=false},registerStylesReadyCallback:function(a){this.afterStylesReadyCallback=a},initWaitForStylesReady:function(){if(!this.waitingForStylesReady){this.waitForStylesReady()}},waitForStylesReady:function(){if(!this.isMounted()){return}if(!this.waitingForStylesReady){this.waitingForStylesReady=true;this.waitingStartTime=b.now()}var c=a(i.findDOMNode(this.refs[j]));if(b.isFunction(this.afterStylesReadyCallback)&&c.css("z-index")==this.testNodeIndex){var d=b.now()-this.waitingStartTime>k;if(d||c.css("overflow-y")==="hidden"){if(d){f.log.error("waitForStylesReady waiting for testStyles",c.css("overflow-y"))}this.waitingForStylesReady=false;this.afterStylesReadyCallback();return}}f.animationFrame.request(this.waitForStylesReady)},getFontsCssLinks:function(){var a=this.props.siteData;var d=a.rendererModel.siteInfo.documentType;var e=l.getCssUrls(d,a.serviceTopology);if(typeof window!=="undefined"){x(null,"viewer");e=b.pickBy(e,x)}return b.map(e,function(a,b){return c.DOM.link({rel:"stylesheet",type:"text/css",href:a,key:b})})},getUploadedFontsStyles:function(a){this.uploadedFonts=this.uploadedFonts||[];var c=this;var d=this.props.siteData;b.forEach(a,function(a){c.uploadedFonts.push(l.getPageUsedFontsList(d,a))});if(this.skinsFonts){this.uploadedFonts.push(this.skinsFonts)}var e=b(this.uploadedFonts).flatten().union().filter(function(a){return n.isUploadedFontFamily(a)}).value();var f=n.getUploadedFontFaceStyles(e,this.props.siteData.serviceTopology.mediaRootUrl);return s("uploadedFonts",f)}})});define("core/components/animatableMixin",["reactDOM","lodash"],function(a,b){"use strict";function c(a){var b=a.style.display;a.style.display="none";a.offsetHeight;a.style.display=b}return{isAnimatable:true,shouldChildrenUpdate:true,componentWillMount:function(){this._animatableMixin={animationsCounter:0,deferredStates:[]}},componentDidMount:function(){this._animatableMixin.setStateOrig=this.setState},componentWillUnmount:function(){this._animatableMixin.updateOnAnimationEnded=false},animationStarted:function(){if(++this._animatableMixin.animationsCounter===1){this.setState=this.setStateDeferred;this.isCurrentlyAnimating=true}if(!this.shouldChildrenUpdate){b(this.refs).filter("isAnimatable").invokeMap("animationStarted").value()}},animationEnded:function(d){d=d!==false;if(!this.shouldChildrenUpdate){b(this.refs).filter("isAnimatable").invokeMap("animationEnded",false).value()}var e=this._animatableMixin;if(e.animationsCounter){if(--e.animationsCounter===0){this.setState=e.setStateOrig;this.isCurrentlyAnimating=false}}if(d){if(e.deferredStates.length){var f=e.deferredStates;for(var g=0;g<f.length;g+=2){e.setStateOrig.call(this,f[g],f[g+1])}f.length=0}else if(e.updateOnAnimationEnded){this.forceUpdate()}}this._updateOnAnimationEnded=false;if(this.forceRedrawOnAnimationEnded===true){c(a.findDOMNode(this))}},setStateDeferred:function(a,c){var d=this._animatableMixin.deferredStates;var e=d.length;if(e===0||d[e-1]||c){d.push(a);d.push(c)}else{b.assign(d[e-2],a);d[e-1]=c}},shouldComponentUpdateAnimatable:function(){var a=this._animatableMixin.animationsCounter===0;if(!a){this._animatableMixin.updateOnAnimationEnded=true}return a}}});define("core/components/compActionMixin",["lodash","santaProps","loggingUtils"],function(a,b,c){"use strict";function d(b){var d={id:a.get(b,"id")||this.props.id,timeStamp:c.performance.now()};if(!b){return d}d.timeStamp=b.timeStamp||d.timeStamp;return a.defaults(d,b)}return{propTypes:{id:b.Types.Component.id,handleAction:b.Types.Behaviors.handleAction,compActions:b.Types.Component.compActions},handleAction:function(b,c){var e=a.get(this.props.compActions,b);if(e){this.props.handleAction(e,d.call(this,c))}}}});define("core/components/compBehaviorsExecuterMixin",["lodash","santaProps"],function(a,b){"use strict";function c(b,c){var d=a.map(b.params,function(a){return c.params[a]});return c.callback?d.concat(c.callback):d}function d(b){a.forEach(b,function(b){var d=a.get(this.constructor,["behaviors",b.name])||a.get(this.constructor,["behaviorExtensions",b.name],{});if(a.isFunction(this[d.methodName])){var e=c(d,b);this[d.methodName].apply(this,e)}}.bind(this))}return{propTypes:{compDynamicBehaviors:b.Types.Component.compDynamicBehaviors,compDynamicBehaviorsClearAfterFlush:b.Types.Component.compDynamicBehaviorsClearAfterFlush},getDefaultProps:function(){return{compDynamicBehaviorsClearAfterFlush:a.noop}},componentWillMount:function(){d.call(this,this.props.compDynamicBehaviors)},componentWillReceiveProps:function(a){d.call(this,a.compDynamicBehaviors)},componentDidUpdate:function(){this.props.compDynamicBehaviorsClearAfterFlush()},componentDidMount:function(){this.props.compDynamicBehaviorsClearAfterFlush()}}});define("core/components/baseCompMixin",["lodash","react","santaProps","siteUtils","core/components/animatableMixin","core/components/compActionMixin","core/components/compBehaviorsExecuterMixin"],function(a,b,c,d,e,f,g){"use strict";var h=c.Types;var i={click:"onClick",dblclick:"onDoubleClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"};function j(b){var c=a.pick(b,a.values(i));if(a.get(this.props.compProp,"isDisabled")){return c}var d=a(this.props.compActions).pick(a.keys(i)).mapKeys(function(a,b){return i[b]}).mapValues(function(a){return this.handleAction.bind(this,a.name)}.bind(this)).value();return a.assignWith(d,c,function(a,b){var c=this;return function(){if(a){a.apply(c,arguments)}if(b){b.apply(c,arguments)}}}.bind(this))}function k(b){var c=a.defaults(b.style||{},this.props.style);if(a.get(this.props.compProp,"isHidden")){c.visibility="hidden"}if(b["data-collapsed"]){c.visibility="hidden"}if(!a.get(this.props.compProp,"isDisabled")&&a.has(this.props.compActions,"click")){c.cursor="pointer"}if(a.isFunction(this.transformRefStyle)){return this.transformRefStyle(c)}return c}function l(b){var c=a.compact([b,this.props.className]).join(" ");if(a.isFunction(this.transformRefClasses)){return this.transformRefClasses(c)}return c}var m={mixins:[e,d.renderDoneMixin,g,f],propTypes:{id:h.Component.id.isRequired,className:b.PropTypes.string,structure:h.Component.structure.isRequired,style:h.Component.style.isRequired,ref:h.Component.ref,key:h.Component.key,compActions:h.Component.compActions,compBehaviors:h.Component.compBehaviors,compProp:c.Types.Component.compProp,registerReLayoutPending:h.Layout.registerReLayoutPending,reLayoutIfPending:h.Layout.reLayoutIfPending,registerBehaviors:h.Behaviors.registerBehaviors,setBehaviorsForActions:h.Behaviors.setBehaviorsForActions,convertBehaviors:h.Behaviors.convertBehaviors,getRootIdsWhichShouldBeRendered:h.getRootIdsWhichShouldBeRendered,rootId:h.Component.rootId,renderFlags:h.renderFlags},registerReLayout:function(){if(this.props.registerReLayoutPending){this.props.registerReLayoutPending(this.props.id)}},componentDidUpdate:function(){if(this.props.reLayoutIfPending){this.callAfterRenderDone(this.props.reLayoutIfPending)}},isComponentActive:function(b){var c=b.getRootIdsWhichShouldBeRendered||b.siteAPI.getRootIdsWhichShouldBeRendered.bind(b.siteAPI);return a.includes(c(),b.rootId)||b.rootId==="masterPage"},shouldComponentUpdate:function(b,c){var d=!this.shouldComponentUpdateAnimatable||this.shouldComponentUpdateAnimatable(b,c);var e=this.isComponentActive(this.props);var f=this.shouldComponentUpdatePage&&this.shouldComponentUpdatePage(b,c);var g=!a.isFunction(this.componentSpecificShouldUpdate)||this.componentSpecificShouldUpdate(b,c);return d&&g&&(f||e)},updateRootRefDataStyles:function(b){var c=a.get(this.props.compProp,"isCollapsed")&&(!a.isFunction(this.shouldCollapse)||this.shouldCollapse());if(!a.get(this.props,"compProp.isHidden")&&!c){var d=j.call(this,b);a.assign(b,d)}if(c){b["data-collapsed"]=true}b.style=k.call(this,b);b.className=l.call(this,b.className);var e=this.props.structure;var f=a.get(e,"layout.rotationInDegrees");if(f){b["data-angle"]=f}}};return{baseComp:m,_testActionsMap:i}});define("core/components/util/animationsQueueHandler",["lodash","animations","reactDOM"],function(a,b,c){"use strict";function d(b){var c=b.comp;return a(b.animations).map(function(b){var d=[];if(a.isPlainObject(b.refNames)){d=j(c,b.refNames.sourceRefs);if(b.refNames.destRefs){d=d.concat(j(c,b.refNames.destRefs))}}else{d=j(c,b.refNames)}return d}).flattenDeep().compact().uniq().value()}function e(c,d,e){a.forEach(c.animations,function(c){var f=c.params||{};if(typeof f==="function"){f=c.params()}else{f=a.cloneDeep(f)}var g,h;var i;if(a.isPlainObject(c.refNames)){g=k(d,c.refNames.sourceRefs);h=c.refNames.destRefs&&k(d,c.refNames.destRefs)}else{g=k(d,c.refNames)}if(h){i=b.transition(c.animationName,g,h,c.duration,c.delay,f);if(i){e.add(i,c.position)}}else{i=b.animate(c.animationName,g,c.duration,c.delay,f);if(i){e.add(i,c.position)}}});return e.get()}function f(c,f){var i,j,k,l,m,n;while(c.length){l=c.pop();j=l.comp;i={};l.callbacks=l.callbacks||{};k=l.params||{};if(typeof k==="function"){k=l.params()}else{k=a.cloneDeep(k)}m={suppressReactRendering:k.suppressReactRendering!==false,forgetSequenceOnComplete:k.forgetSequenceOnComplete!==false,id:l.id};n=d(l);i.onStart=l.callbacks.onStart;i.onComplete=h.bind(null,n,m,l.callbacks.onComplete,f);i.onReverseComplete=h.bind(null,n,m,l.callbacks.onReverseComplete,f);i.onInterrupt=h.bind(null,n,m,l.callbacks.onInterrupt,f);k.callbacks=i;f[l.id]=e(l,j,b.sequence(k));if(l.callbacks.onInit){l.callbacks.onInit(f[l.id])}g(n,m)}}function g(b,c,d){if(c.suppressReactRendering){a.invokeMap(b,"animationStarted")}if(d){d()}}function h(b,c,d,e){if(c.forgetSequenceOnComplete){delete e[c.id]}if(c.suppressReactRendering){a.invokeMap(b,"animationEnded")}if(d){d()}}function i(a,b){return(a.refs.component||a).refs[b]}function j(b,c){c=!a.isArray(c)?[c]:c;return a(c).map(function(c){if(a.isArray(c)){return a.reduce(c,i,b)}return a.isString(c)?b.refs[c]:c}).compact().value()}function k(b,d){return a.map(j(b,d),c.findDOMNode)}return{flushQueue:f,getElementsByRefs:k}});define("core/components/animationsMixin",["lodash","santaProps","animations","core/components/util/animationsQueueHandler"],function(a,b,c,d){"use strict";var e=b.Types;function f(b){this.comp=b;this.animations=[];this.callbacks={};this.id=a.uniqueId("seq_")}f.prototype.add=function(a,b,c,d,e,f){this.animations.push({refNames:a,animationName:b,duration:c,delay:d,params:e,position:f});return this};f.prototype.onCompleteAll=function(a){this.callbacks.onComplete=a;return this};f.prototype.onReverseAll=function(a){this.callbacks.onReverseComplete=a;return this};f.prototype.onInterruptAll=function(a){this.callbacks.onInterrupt=a;return this};f.prototype.onStartAll=function(a){this.callbacks.onStart=a;return this};f.prototype.onInit=function(a){this.callbacks.onInit=a};f.prototype.execute=function(a){this.comp.executeAnimationsWhenPossible(this.comp,this.id,this.animations,this.callbacks,a);return this.id};f.prototype.getId=function(){return this.id};f.prototype.hasAnimations=function(){return!a.isEmpty(this.animations)};return{propTypes:{isSiteBusy:e.isSiteBusy},getInitialState:function(){this._animationsQueue=[];this._liveSequences={};this._isBusy=true;return null},executeAnimationsWhenPossible:function(b,c,e,f,g){if(a.isEmpty(this._liveSequences)){this._liveSequences={}}if(a.isEmpty(this._animationsQueue)){this._animationsQueue=[]}this._animationsQueue.push({comp:b,id:c,animations:e,callbacks:f,params:g});if(!this.isBusy()){d.flushQueue(this._animationsQueue,this._liveSequences)}},componentWillUpdate:function(){this._isBusy=true},componentDidUpdate:function(){this._isBusy=false;if(!this.isBusy()){d.flushQueue(this._animationsQueue,this._liveSequences)}},componentDidMount:function(){this._isBusy=false},componentDidLayoutAnimations:function(){d.flushQueue(this._animationsQueue,this._liveSequences)},componentWillUnmount:function(){this._isBusy=true;this.clearAnimationsQueue(false)},clearAnimationsQueue:function(b){a.forEach(this._liveSequences,function(a){c.kill(a,b?1:undefined)});this._liveSequences={};this._animationsQueue=[]},isBusy:function(){var a=this.props.isSiteBusy||this.props.siteAPI.isSiteBusy;return!this.isMounted()||this._isBusy||a()},animate:function(a,b,c,d,e,f){var g=this.sequence(a,b,c,d,e);f=f||{};if(f.onStart){g.onStartAll(f.onStart)}if(f.onInterrupt){g.onInterruptAll(f.onInterrupt)}if(f.onComplete){g.onCompleteAll(f.onComplete)}return g.execute()},transition:function(a,b,c,d,e,f,g){return this.animate({sourceRefs:a,destRefs:b},c,d,e,f,g)},sequence:function(a,b,c,d,e){var g=new f(this);if(arguments.length){g.add.apply(g,arguments)}return g},getSequence:function(a){return a?this._liveSequences[a]:null},stopSequence:function(a,b){var d=this.getSequence(a);if(d){c.kill(d,b);delete this._liveSequences[a]}},reverseSequence:function(a){var b=this.getSequence(a);if(b){b.reversed(!b.reversed())}},easeStartSequence:function(a,b,d,e){var f=this.getSequence(a);if(f){c.animateTimeScale(f,b,0,1,d,e)}},easeStopSequence:function(a,b,d,e){var f=this.getSequence(a);var g;if(f){e=e||{};g=e.onComplete||function(){};e.onComplete=function(){g();this.stopSequence(a)}.bind(this);if(!f.paused()){c.animateTimeScale(f,b,1,0,d,e)}else{this.stopSequence(a)}}},getAnimationProperties:function(a){return c.getProperties(a)},addTickerEvent:c.addTickerEvent,removeTickerEvent:c.removeTickerEvent}});define("core/components/actionsAspectActions/triggerTypesConsts",[],function(){"use strict";return{DID_LAYOUT:"didLayout",SCROLL:"scroll",RESIZE:"resize",PAGE_CHANGED:"pageChanged",PAGE_RELOADED:"pageReloaded",SITE_READY:"siteReady",TRANSITION_ENDED:"transitionEnded",MODE_CHANGED_INIT:"modeChangedInit",MODE_CHANGED_EXECUTE:"modeChangedExecute",ACTIONS_ADDED_LAYOUTED:"actionsAddedLayouted",ACTIONS_REMOVED:"actionsRemoved"}});define("core/siteRender/WixPageReact",["lodash","react","reactDOM","santaProps","utils","compUtils","core/components/baseCompMixin","core/components/animationsMixin","core/components/actionsAspectActions/triggerTypesConsts","experiment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d.componentPropsBuilder;var l=["wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAMultiSection","wysiwyg.viewer.components.tpapps.TPAWidget"];var m=["wysiwyg.viewer.components.PageGroup","wysiwyg.viewer.components.PagesContainer"];var n={ENTER:e.siteConstants.Animations.Modes.AnimationType.ENTER,LEAVE:e.siteConstants.Animations.Modes.AnimationType.LEAVE,TRANSITION:e.siteConstants.Animations.Modes.AnimationType.TRANSITION};function o(b){return a.zipObject(b,a.times(b.length,a.constant(true)))}function p(b,c,d){if(d[c.id]&&a.get(c,"layout.docked")){b.dimentions=d[c.id];if(b.style.width){b.style.width=d[c.id].width}if(b.style.height){b.style.height=d[c.id].height}}}function q(a){return a==="SITE_PAGES"}function r(a,c,d){var e=k.getRootProps(a,d.siteAPI,d.viewerPrivateServices,d.loadedStyles,d.measureMap);if(j.isOpen("sv_dpages")&&e.rootNavigationInfo&&e.rootNavigationInfo.routerDefinition){e.key=e.rootId+e.rootNavigationInfo.routersRendererIndex}e.firstPage=c;return b.createElement(R,e)}function s(a){var b={createPage:function(b,c){return r(b,c,a)},skin:"skins.core.InlineSkin"};b.activeModes=a.activeModes;b.measureMap=a.measureMap;return b}function t(b){return a.includes(["Page","Document"],b)}function u(a,b,c,d){var e={pageStub:a,style:{width:b}};if(a){e.style.display="none"}e.activeModes=c;e.measureMap=d;return e}function v(b,c,d,e,f,g){var h=w(e,b.rootId,b.structure.id,b.siteData);var i=k.getCompProps(e,b.siteAPI,b.rootId,b.loadedStyles,b.viewerPrivateServices);if(h){i.style=a.merge(i.style||{},h)}if(t(e.type)){a.merge(i,u(d,b.siteData.getSiteWidth(),b.activeModes,b.measureMap))}p(i,e,c);if(q(e.id)){a.merge(i,s(b))}i.isAffectedByModeChanges=f;if(g){i.className=(i.className||"")+" transitioning-comp"}return i}function w(b,c,d,e){if(b.id===d){return{visibility:"hidden"}}var f;var g=e.isPageLandingPage(e.getPrimaryPageId())&&c==="masterPage";var h=a.includes(m,b.componentType);if(g){if(!h){f={display:"none"}}else if(j.isOpen("sv_partialReLayout")){f={top:0}}}return f}function x(b,c){var d=[];var e=a.get(b,"modes.definitions");if(e&&e.length){var f=a.map(e,"modeId");var g=a.keys(c);d=a.intersection(g,f)}return!a.isEmpty(d)}function y(b,c){var d=a.get(b,["activeModes",c.rootId]);var f=a.get(c,["activeModes",c.rootId]);return e.modes.getModeChanges(d,f)}function z(b,c,d,f,g,h){var i={};var j=function(a,b){return{structure:b,anyChangeInParentActiveModes:a}};var k=c.siteData;var l=e.structureDimensions.createDimensionsMap(c.structure,k.getScreenSize(),k.getSiteWidth(),k.isMobileView());var m=[{structure:b,anyChangeInParentActiveModes:false}];var p=y(d,c);var q=!a.isEmpty(p);while(m.length){var r=m.shift();var s=r.structure;var t=q&&x(s,p);var u=r.anyChangeInParentActiveModes||t;var w=u&&!!g[s.id];var z=h[s.id]===n.TRANSITION;var A=z||w;var C=B(s,k.isMobileView(),f);var D=a.map(C,a.partial(j,u));var E=v(c,l,f,s,u,A);E.childrenSet=o(a.map(C,"id"));i[s.id]=E;m.push.apply(m,D)}return i}function A(b,c){var d;if(a.includes(l,c.componentType)){return true}d=e.dataUtils.getChildrenData(c,b);return a.some(d,A.bind(null,b))}function B(b,c,d){var f=e.dataUtils.getChildrenData(b,c);if(d){f=a.filter(f,A.bind(null,c))}return f}function C(a,b,c,d){if(c[a]){return c[a]}if(b[a]){return b[a]}return d[a]}function D(b,c,d){var e={};var f=a.partial(a.has,e);g(b);function g(b){var h=c[b];var i=a.keys(h.childrenSet);for(var j=0;j<i.length;j++){g(i[j])}var k=a.filter(i,f);var l=d[b]||k.length;if(l){e[b]=a.clone(h);e[b].childrenSet=o(k)}}return e}function E(b,c,d,e,f){var g=D(e,d,f);var h=a.mapValues(b,function(b){return a.pick(b,["id","childrenSet"])});var i=a.mapValues(c,function(b){return a.pick(b,["id","childrenSet"])});var j=a.mapValues(g,function(b){return a.pick(b,["id","childrenSet"])});return a.merge(h,i,j)}function F(b,c,d,e,f){var g=E(c,d,e,b,f);var h={};var i=[b];while(i.length){var j=i.shift();var k=g[j].childrenSet;h[j]=a.clone(C(j,c,d,e));h[j].childrenSet=k;i.push.apply(i,a.keys(k))}return h}function G(b){return a.omit(b,["childrenSet","isAffectedByModeChanges"])}function H(b,c){var d=b[c];var e=a.keys(d.childrenSet);var f=G(d);f.children=a.map(e,a.partial(H,b));return f}function I(b,c){var d={};a.forEach(c,function(a,c){var e=b&&b[c];if(a&&!e){d[c]=n.ENTER}});a.forEach(b,function(a,e){var f=c&&c[e];var g=b&&b[e];if(a&&!f){d[e]=n.LEAVE}else if(g&&f&&c[e].isAffectedByModeChanges){d[e]=n.TRANSITION}});return d}function J(a){return a&&f.compFactory.getCompClass(a)||b.DOM.div}function K(b){var c=a.clone(b);c.children=a.map(b.children,K);var d=J(c.structure.componentType);return d(c)}function L(a,b,c,d,e,f){var g=b.getSiteAspect("actionsAspect");g.executeAction("modeChange",i.MODE_CHANGED_INIT,{modeChanges:c,componentAnimations:d,transitioningComponentsPrevLayout:e,pageId:a,onComplete:f})}function M(a){var b=a.getSiteAspect("actionsAspect");b.executeAction("modeChange",i.MODE_CHANGED_EXECUTE)}function N(b){return!a.isEmpty(b)}function O(b,c,d,e,f){if(!e){return{}}var g=b.getSiteAspect("windowScrollEvent");var h=g.getScrollPosition();var i=a.partial(a.isEqual,n.TRANSITION);return a(d).pickBy(i).mapValues(function(a,b){var d=e.shownInFixed[b]?e.absoluteLeft[b]-h.x:e.absoluteLeft[b]-f.getSiteX()-h.x;return{width:e.width[b],height:e.height[b],left:d,top:e.absoluteTop[b]-h.y,rotation:c[b].structure.layout.rotationInDegrees}}).value()}function P(a){return!this.isComponentActive(a)}function Q(){var a=this.props.compBehaviors;if(!a){return}var b=this.props.rootId;var c=this.props.siteAPI.getSiteAspect("actionsAspect");var d=this.props.siteAPI.getSiteAspect("behaviorsAspect");c.registerBehaviors(b,b,a);d.setBehaviorsForActions(d.convertBehaviors(a,b),b,b)}var R=b.createClass({displayName:"WixPageReact",propTypes:{pageStub:b.PropTypes.bool},mixins:[g.baseComp,h],componentWillMount:function(){this.currentlyAnimatingComponents={};this.childrenAnimations={};this.transitioningChildrenPrevLayout={};this.renderedCompPropsMap={};this.prevCompPropsMap={};Q.call(this);this.updateRenderedCompPropsMap(this.props,this.props)},shouldComponentUpdatePage:function(a){return this.isComponentActive(a)},isStub:function(){return this.props.pageStub},updateRenderedCompPropsMap:function(b,c){var d=this.prevCompPropsMap;var e=this.currentlyAnimatingComponents;var f=z(b.structure,b,c,P.call(this,b),d,e);var g=y(c,b);var h=!a.isEmpty(g);if(h){this.childrenAnimations=I(d,f);this.transitioningChildrenPrevLayout=O(b.siteAPI,d,this.childrenAnimations,b.measureMap,b.siteData);a.assign(e,this.childrenAnimations);L(b.rootId,b.siteAPI,g,this.childrenAnimations,this.transitioningChildrenPrevLayout,this.handleModeChangeAnimationsFinished)}if(N(e)){this.renderedCompPropsMap=F(b.structure.id,d,f,this.renderedCompPropsMap,e)}else{this.renderedCompPropsMap=f}this.prevCompPropsMap=f},componentWillUpdate:function(a){if(P.call(this,a)){this.props.siteAPI.deactivateModesInPage(this.props.rootId)}Q.call(this);this.updateRenderedCompPropsMap(a,this.props)},render:function(){if(!this.props.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()){return this.renderedPage||b.createElement("div")}var a=H(this.renderedCompPropsMap,this.props.structure.id);this.renderedPage=K(a);return this.renderedPage},updateVisibility:function(){var a=this.props.siteAPI.getSiteAspect("WidgetAspect").isContextReady(this.props.rootId);if(a){c.findDOMNode(this).style.visibility=""}},componentDidLayout:function(){this.updateVisibility()},componentDidUpdate:function(b){var c=this.props.siteAPI;if(!a.isEmpty(this.childrenAnimations)){var d=y(b,this.props);L(this.props.rootId,this.props.siteAPI,d,this.childrenAnimations,this.transitioningChildrenPrevLayout,this.handleModeChangeAnimationsFinished);M(c);this.childrenAnimations={};this.transitioningChildrenPrevLayout={}}},handleModeChangeAnimationsFinished:function(b){this.currentlyAnimatingComponents=a.omit(this.currentlyAnimatingComponents,a.keys(b));if(!N(this.currentlyAnimatingComponents)){this.forceUpdate()}}});return R});define("core/siteRender/wixBackgroundInstantiator",["santaProps","compUtils"],function(a,b){"use strict";var c="wysiwyg.viewer.components.SiteBackground";var d={id:"SITE_BACKGROUND",skin:"wysiwyg.viewer.skins.siteBackgroundSkin",componentType:c,styleId:"siteBackground"};return{getWixBgStructure:function(){return d},getWixBgComponent:function(e){var f=a.componentPropsBuilder.getCompProps(d,e);var g=b.compFactory.getCompClass(c);return g(f)}}});define("core/bi/errors.json",[],function(){return{JAVASCRIPT_ERROR:{errorName:"JAVASCRIPT_ERROR",errorCode:111022,severity:"fatal",params:{p1:"errorMsg",p2:"url",p3:"line",p4:"column"}},CONSOLE_ERROR:{errorName:"CONSOLE_ERROR",errorCode:111023,severity:"error",
params:{p1:"errorMsg"}},REQUIREJS_ERROR:{errorName:"REQUIREJS_ERROR",errorCode:111024,severity:"fatal",params:{p1:"errorMsg",p2:"modules"}},REQUIREJS_RETRY_ERROR:{errorName:"REQUIREJS_RETRY_ERROR",errorCode:111025,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}},NULL_SITE_ERROR:{errorName:"NULL_SITE_ERROR",errorCode:112e3,severity:"error",params:{p1:"errorMsg",p2:"modules"}},MISSING_DESKTOP_BACKGROUND_ITEM:{errorName:"MISSING_DESKTOP_BACKGROUND_ITEM",errorCode:112001,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}},MISSING_DESKTOP_BACKGROUND_ITEM:{errorName:"MISSING_MOBILE_BACKGROUND_ITEM",errorCode:112002,severity:"recoverable",params:{p1:"errorMsg",p2:"modules"}}}});define("core/bi/errors",["core/bi/errors.json","lodash","utils"],function(a,b,c){"use strict";var d=c.logger;b.forEach(a,function(a,b){a.errorName=b});d.register("core","error",a);return a});define("core/siteRender/SiteAPI",["utils","zepto","lodash","core/bi/errors"],function(a,b,c,d){"use strict";var e=a.logger;function f(a,b){if(!a&&arguments.length&&typeof window!=="undefined"){b=b||"unknown";if(window.wixBiSession){window.wixBiSession.sendError(d.NULL_SITE_ERROR,b)}else{}}this._site=a;c.bindAll(this,["reLayout","registerReLayoutPending","reLayoutIfPending","getSiteAspect","getSiteData","getLoadedStyles","setBiParam","setBiMarker","onSiteUnmount","isZoomOpened","openPopup","isPageLandingPage","scrollToAnchor","getAllRenderedRootIds","getRootIdsWhichShouldBeRendered","navigateToPage","updateUrlIfNeeded","handleNavigation","updatePageNavInfo","forceUpdate","getComponentsByPageId","getPageUrl","getPageData","setPageTitle","setRunTimePageTitle","setPageMetaKeywords","setPageMetaOgTags","setPageJsonld","getPageUrlFor","initFacebookRemarketing","fireFacebookRemarketingPixel","initGoogleRemarketing","fireGoogleRemarketing","initYandexMetrika","reportYandexPageHit","reportBI","getBiVisitorId","reportCurrentPageEvent","reportPageEvent","reportBeatEvent","reportBeatStart","reportBeatFinish","reportPageBI","getUserSession","setUserSession","isSiteBusy","isSiteBusyIncludingTransition","startingPageTransition","endingPageTransition","setSiteScrollingEnabled","enterFullScreenMode","exitFullScreenMode","forceBackground","disableForcedBackground","passClickEvent","getRuntimeDal","hasPendingFonts","getCurrentPopupId","openPopupPage","closePopupPage","isPopupOpened","getSiteDataAPI","getPointers","getDisplayedDAL","getActiveModes","getPrevRenderActiveModes","activateModeById","activateMode","deactivateModeById","deactivateMode","deactivateModesInPage","switchModesByIds","resetAllActiveModes","setMobileView","showSelectionSharer","hideSelectionSharer","isSelectionSharerVisible","getWixCodeAppApi","getControllerStageData","getControllerState"])}function g(a,b,d){while(b){if(c.get(d,[b.id,"isCurrentlyAnimating"])){return true}b=a.components.getParent(b)}return false}function h(a,b,c){var d=this.getPointers().platform.getControllerStageDataPointer(a,b,c);return this.getDisplayedDAL().get(d)}function i(){var a=this.getSiteData();a.nonObservableUpdateIndex=a.observableUpdateIndex+1}function j(){var a=this.getSiteData();a.observableUpdateIndex++}function k(b){return b?a.constants.VIEW_MODES.MOBILE:a.constants.VIEW_MODES.DESKTOP}function l(a){var b=this.getRootIdsWhichShouldBeRendered();var d=this.getSiteDataAPI();var e=k(a);var f=this.getSiteData().anchorsMap;c.forEach(b,function(b){if(!c.has(f,[b,e])){d.anchors.createPageAnchors(b,a)}})}f.prototype={reLayout:function(){this._site.reLayout()},registerReLayoutPending:function(a){this._site.registerReLayoutPending(a)},reLayoutIfPending:function(){this._site.reLayoutIfPending()},getSiteAspect:function(a){return this._site&&this._site.siteAspects&&this._site.siteAspects[a]},getSiteData:function(){return this._site.props.siteData},getLoadedStyles:function(){return this._site.loadedStyles},setBiParam:function(a,b){var c=this.getSiteData();if(c&&c.wixBiSession&&c.wixBiSession[a]===undefined){c.wixBiSession[a]=b}},setBiMarker:function(a){this.setBiParam(a,c.now())},onSiteUnmount:function(){setTimeout(function(){delete this._site}.bind(this))},isZoomOpened:function(){var b=this._site.props.siteData;return!!(b.getExistingRootNavigationInfo(b.getFocusedRootId()).pageItemId||a.nonPageItemZoom.getZoomedImageData())},openPopup:function(a,b,c){window.open(a,b,c)},isPageLandingPage:function(a){return this.getSiteData().isPageLandingPage(a)},scrollToAnchor:function(b,c){var d=a.scrollAnchors.calcAnchorScrollToPosition(b,this);return this._site.scrollToAnchor(d,c)},getAllRenderedRootIds:function(){return this._site.getAllRenderedRootIds()},getRootIdsWhichShouldBeRendered:function(){return this._site.getRootIdsWhichShouldBeRendered()},navigateToPage:function(a,b,c){var d=false;this._site.tryToNavigate(a,b,d,c)},updateUrlIfNeeded:function(a){this._site.updateUrlIfNeeded(a)},handleNavigation:function(a,b,c){this._site.handleNavigation(a,b,c)},updatePageNavInfo:function(a,b,c){var d=this.getSiteData();var e=false;if(a.pageId!==d.getPrimaryPageId()&&a.pageId!==d.getCurrentPopupId()){throw"you need to navigate to page if it's a different page"}this._site.tryToNavigate(a,b,e,c)},forceUpdate:function(a){this._site.forceUpdate(a)},getComponentsByPageId:function(a){return this._site.getComponentsByPageId(a)},getPageUrl:function(a){return this.getPageUrlFor(this.getSiteData().getCurrentUrlPageId(),a)},getPageData:function(){return this.getSiteData().getDataByQuery(this.getSiteData().getCurrentUrlPageId())},setPageTitle:function(a,b,c){var d=this.getPageData();d.title=a;d.descriptionSEO=b;d.pageTitleSEO=c},setRunTimePageTitle:function(a,b,c){var d=this.getRuntimeDal()._siteData.getDataByQuery(this.getSiteData().getCurrentUrlPageId());d.title=a;d.descriptionSEO=b;d.pageTitleSEO=c;this._site.updateTitleAndMetaTags();this._site.notifyAspects(this._site.supportedEvents.siteMetadataChange,{title:this.getSiteData().getCurrentUrlPageTitle(),description:b})},setPageMetaKeywords:function(a){var b=this.getPageData();b.metaKeywordsSEO=a},setPageMetaOgTags:function(a){var b=this.getSiteData();b.setPageOgTags(b.getCurrentUrlPageId(),a)},setPageJsonld:function(a){var b=this.getSiteData();b.setJsonLd(b.getCurrentUrlPageId(),a)},getPageUrlFor:function(b,c){var d=this.getSiteData().getDataByQuery(b);if(!d){return""}var e=a.wixUrlParser.getUrl(this.getSiteData(),{pageId:b,title:d.pageUriSEO},c);return e},initFacebookRemarketing:function(a){if(a){e.initFacebookRemarketingPixelId(this.getSiteData(),a)}else{e.initFacebookRemarketingUserPixel(this.getSiteData())}},fireFacebookRemarketingPixel:function(a,b){e.fireFacebookRemarketingPixel(this.getSiteData(),a,b)},initGoogleRemarketing:function(){e.initGoogleRemarketingPixel(this.getSiteData())},fireGoogleRemarketing:function(){e.fireGoogleRemarketingPixel()},initYandexMetrika:function(){e.initYandexMetrika(this.getSiteData())},reportYandexPageHit:function(a){e.reportYandexPageHit(a)},reportBI:function(a,b){e.reportBI(this._site.props.siteData,a,b)},getBiVisitorId:function(){return e.getVisitorId(this._site.props.siteData)},reportCurrentPageEvent:function(a){var b=this._site.props.siteData;if(!a){a=c.isString(b.currentUrl)?b.currentUrl:b.currentUrl.full}var d=b.getExternalBaseUrl().replace(/\/$/,"");var f=a.replace(d,"");e.reportPageEvent(b,f)},reportPageEvent:function(a){e.reportPageEvent(this._site.props.siteData,a)},reportBeatEvent:function(a,b){e.reportBeatEvent(this._site.props.siteData,a,b)},reportBeatStart:function(a){this.reportBeatEvent("start",a)},reportBeatFinish:function(a){this.reportBeatEvent("finish",a)},reportPageBI:function(){e.reportBI(this._site.props.siteData)},getUserSession:function(){return this._site.props.siteData.getSvSession()},setUserSession:function(b){if(b!==this.getUserSession()){var c=this.getSiteData();c.pubSvSession(b);a.cookieUtils.deleteCookie("svSession",c.currentUrl.hostname,c.getMainPagePath());a.cookieUtils.setCookie("svSession",b,null,c.currentUrl.hostname,c.getMainPagePath());this._site.notifyAspects(this._site.supportedEvents.svSessionChange,b)}},isSiteBusy:function(){return this._site.isBusy},isSiteBusyIncludingTransition:function(){return this.isSiteBusy()||this._site.isDuringTransition},startingPageTransition:function(a){if(this.getSiteData().getFocusedRootId()!==a.pageId){this._site.isDuringTransition=true}},endingPageTransition:function(){this._site.isDuringTransition=false},setSiteScrollingEnabled:function(a){if(a){b("html").removeClass("disableSiteScroll")}else{b("html").addClass("disableSiteScroll")}},enterFullScreenMode:function(c){if(typeof window==="undefined"){a.log.warn("SiteAPI.enterFullScreenMode should only be called from client specific code!");return}b("body").addClass("fullScreenMode");if(!c||c.scrollable){b("body").addClass("fullScreenMode-scrollable")}},exitFullScreenMode:function(){if(typeof window==="undefined"){a.log.warn("SiteAPI.exitFullScreenMode should only be called from client specific code!");return}b("body").removeClass("fullScreenMode");b("body").removeClass("fullScreenMode-scrollable")},forceBackground:function(a){window.document.body.style.background=a},disableForcedBackground:function(){window.document.body.style.background=""},passClickEvent:function(a){this._site.clickHandler(a)},getRuntimeDal:function(){return this.getSiteDataAPI().runtime},hasPendingFonts:function(){return this._site.refs.theme.refs.fontsLoader.hasPendingFonts()},getCurrentPopupId:function(){return this.getSiteData().getCurrentPopupId()},openPopupPage:function(a){this.navigateToPage({pageId:a},true)},closePopupPage:function(){this.navigateToPage(this.getSiteData().getRootNavigationInfo(),true)},isPopupOpened:function(){return this.getSiteData().isPopupOpened()},getSiteDataAPI:function(){return this._site.props.viewerPrivateServices.siteDataAPI},getPointers:function(){return this._site.props.viewerPrivateServices.pointers},getDisplayedDAL:function(){return this._site.props.viewerPrivateServices.displayedDAL},getActiveModes:function(){return this.getSiteDataAPI().modes.getActiveModes()},getPrevRenderActiveModes:function(){return this._site.prevActiveModes},activateModeById:function(a,b,c){var d=this.getPointers();var e=d.components.getPage(b,this.getSiteData().getViewMode());var f=d.components.getComponent(a,e);this.activateMode(f,c)},activateMode:function(a,b){var c=this.getPointers();var d=c.components.getPageOfComponent(a);if(g(c,a,this._site.getComponentsByPageId(d.id))){return}var e=this.getSiteDataAPI().modes.activateMode(a,b);if(e){i.call(this);this.forceUpdate();j.call(this)}},deactivateModeById:function(a,b,c){var d=this.getSiteDataAPI().modes.deactivateModeById(a,b,c);if(d){i.call(this);this.forceUpdate();j.call(this)}},deactivateMode:function(a,b){var c=this.getSiteDataAPI().modes.deactivateMode(a,b);if(c){i.call(this);this.forceUpdate();j.call(this)}},deactivateModesInPage:function(a){var b=this.getSiteDataAPI().unloadNonVisiblePage(a);if(b){i.call(this);this.forceUpdate();j.call(this)}},switchModesByIds:function(a,b,c,d){var e=this.getSiteDataAPI().modes.switchModesByIds(a,b,c,d);if(e){i.call(this);this.forceUpdate();j.call(this)}},resetAllActiveModes:function(){this.getSiteDataAPI().modes.resetAllActiveModes();i.call(this);this.forceUpdate();j.call(this)},setMobileView:function(a){var b=this.getSiteData();if(b.isMobileView()!==a){l.call(this,a);b.setMobileView(a);this.getSiteAspect("WidgetAspect").restartApps()}},showSelectionSharer:function(a,b){this._site.refs.selectionSharer.show(a,b)},hideSelectionSharer:function(){if(this._site.refs.selectionSharer.isVisible()){this._site.refs.selectionSharer.hide()}},isSelectionSharerVisible:function(){return c.get(this._site,"refs.selectionSharer")&&this._site.refs.selectionSharer.isVisible()},getWixCodeAppApi:function(){return this._site.props.wixCodeAppApi},getControllerStageData:function(a,b,d){var e=h.call(this,a,b,d);if(d==="default"){return e}var f=h.call(this,a,b,"default");return c.defaults({},e,f)},getControllerState:function(a){var b=this.getSiteData();return c.get(b,["platform","appState",a],"default")},getAspectData:function(a){var b=this.getDisplayedDAL();return b.getByPath(["siteAspectsData",a])||{}}};return f});define("core/core/siteAspectsRegistry",[],function(){"use strict";var a={};return{registerSiteAspect:function(b,c){a[b]=c},getAllAspectConstructors:function(){return a},getSiteAspectConstructor:function(b){return a[b]}}});define("core/siteRender/SiteAspectsSiteAPI",["lodash","core/siteRender/SiteAPI"],function(a,b){"use strict";function c(c){b.call(this,c,"Site Aspect");a.bindAll(this,["getComponentById","getRootOfComponentId","getCurrentPage","getCurrentPopup","getAllRenderedRoots","getMasterPage","getPageById","registerToMessage","registerToSiteReady","registerToScroll","registerToResize","registerToOrientationChange","registerToModeChange","registerToSlideChange","registerToComponentDidMount","registerToSiteWillMount","registerToSiteWillUpdate","registerToDidLayout","unRegisterFromDidLayout","registerToWillUnmount","registerToUrlPageChange","registerToRenderedRootsChange","registerToAddedRenderedRootsDidLayout","registerToKeyDown","registerToWindowTouchEvent","registerToFocusEvents","registerToVisibilityChange","registerToDocumentClick","registerToSvSessionChange","registerToSiteMetadataChange","getSiteAPI","getSiteContainer","scrollSiteBy","scrollSiteTo","getWindowSize","getDocumentSize","getSiteScroll","getCurrentPopupScroll","getBrowserFlags","getVisibilityState","getAspectComponentByRef","setSiteRootHiddenState","notifyAspects"])}c.prototype=a.create(b.prototype,{constructor:c});c.prototype.getComponentById=function(a,b){var c=null;var d=b||this.getRootOfComponentId(a);if(d){c=this._site.getComponentByPageAndCompId(d,a)}if(!c){c=this._site.getAspectsContainer().refs[a]}if(!c&&(a==="SITE_BACKGROUND"||a==="WIX_ADS")){c=this._site.refs[a].refs.component}return c||null};c.prototype.getRootOfComponentId=function(b){var c=this._site.getPageOfComp(b);var d=c&&c.props.rootId;var e=this._site.getMasterPage();if(!d&&e&&e.refs.SITE_PAGES){a.forEach(this._site.getPageRefs(e),function(a,c){if(a.refs&&a.refs[b]){d=c;return false}})}return d||null};c.prototype.getCurrentPage=function(){return this._site.getPrimaryPage()};c.prototype.getCurrentPopup=function(){return this._site.getCurrentPopup()};c.prototype.getAllRenderedRoots=function(){return a.map(this.getAllRenderedRootIds,this.getPageById.bind(this))};c.prototype.getMasterPage=function(){return this._site.getMasterPage()};c.prototype.getPageById=function(a){return this._site.getPageById(a)};c.prototype.registerToMessage=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.message,a)};c.prototype.registerToSiteReady=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.siteReady,a)};c.prototype.registerToScroll=function(a){var b=this.getSiteAPI().getSiteData();this._site.registerAspectToEvent(this._site.supportedEvents.scroll,function(){var c={x:window.pageXOffset||(b.isMobileView()?window.document.scrollLeft:window.document.body.scrollLeft),y:window.pageYOffset||(b.isMobileView()?window.document.scrollTop:window.document.body.scrollTop)};a(c)})};c.prototype.registerToResize=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.resize,a)};c.prototype.registerToOrientationChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,a)};c.prototype.registerToModeChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.modeChange,a)};c.prototype.registerToSlideChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.slideChange,a)};c.prototype.registerToComponentDidMount=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.mount,a)};c.prototype.registerToSiteWillMount=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.willMount,a)};c.prototype.registerToSiteWillUpdate=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.willUpdate,a)};c.prototype.registerToDidLayout=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.didLayout,a)};c.prototype.unRegisterFromDidLayout=function(a){this._site.unregisterAspectFromEvent(this._site.supportedEvents.didLayout,a)};c.prototype.registerToWillUnmount=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.unmount,a)};c.prototype.registerToUrlPageChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.urlPageChange,a)};c.prototype.registerToRenderedRootsChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.renderedRootsChanged,a)};c.prototype.registerToAddedRenderedRootsDidLayout=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.addedRenderedRootsDidLayout,a)};c.prototype.registerToKeyDown=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.keydown,a)};c.prototype.registerToKeyUp=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.keyup,a)};c.prototype.registerToWindowTouchEvent=function(a,b){this._site.registerAspectToEvent(this._site.supportedEvents[a.toLowerCase()],b)};c.prototype.registerToFocusEvents=function(a,b){this._site.registerAspectToEvent(this._site.supportedEvents[a],b)};c.prototype.registerToVisibilityChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.visibilitychange,a)};c.prototype.registerToDocumentClick=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.click,a)};c.prototype.registerToOrientationChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.orientationchange,a)};c.prototype.registerToSvSessionChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.svSessionChange,a)};c.prototype.registerToSiteMetadataChange=function(a){this._site.registerAspectToEvent(this._site.supportedEvents.siteMetadataChange,a)};c.prototype.getSiteAPI=function(){return this._site.siteAPI};c.prototype.getSiteContainer=function(){return this._site.props.getSiteContainer()};c.prototype.scrollSiteBy=function(a,b){this.getSiteContainer().scrollBy(a,b)};c.prototype.scrollSiteTo=function(a,b){this.getSiteContainer().scrollTo(a,b)};c.prototype.getWindowSize=function(){var a=this.getSiteContainer();return{height:a.innerHeight,width:a.innerWidth}};c.prototype.getDocumentSize=function(){return{height:window.document.documentElement.clientHeight||window.document.body.clientHeight,width:window.document.documentElement.clientWidth||window.document.body.clientWidth}};c.prototype.getSiteScroll=function(){var a=this.getSiteContainer()||{};return{x:a.pageXOffset||a.scrollX||0,y:a.pageYOffset||a.scrollY||0}};c.prototype.getCurrentPopupScroll=function(){var b=window.document.getElementById("POPUPS_ROOT");return{x:a.get(b,"scrollLeft",0),y:a.get(b,"scrollTop",0)}};c.prototype.getBrowserFlags=function(){return this.getSiteAPI().getSiteData().browserFlags()};c.prototype.getVisibilityState=function(){var a=typeof document!=="undefined";return{hidden:a&&window.document.hidden}};c.prototype.getAspectComponentByRef=function(a){var b=this._site.refs.siteAspectsContainer;return b.refs[a]};c.prototype.setSiteRootHiddenState=function(a,b){this._site.setState({siteRootHidden:a},b)};c.prototype.notifyAspects=function(a){this._site.notifyAspects(a)};c.prototype.updateAspectGlobalData=function(a,b){var c=this.getDisplayedDAL();var d=["siteAspectsData",a,"globalData"];if(c.isPathExist(d)){c.mergeByPath(d,b)}else{c.setByPath(d,b)}};c.prototype.updateAspectComponentData=function(a,b,c){var d=this.getDisplayedDAL();var e=["siteAspectsData",a,"dataByCompId",b];if(d.isPathExist(e)){d.mergeByPath(e,c)}else{d.setByPath(e,c)}};return c});define("core/siteRender/siteAspectsMixin",["lodash","zepto","core/core/siteAspectsRegistry","core/siteRender/SiteAspectsSiteAPI","utils","coreUtils","experiment"],function(a,b,c,d,e,f,g){"use strict";var h=[];function i(b,c,d){return a.map(b,function(b){var e=b[c];return a.isFunction(e)&&e.apply(b,d)||h})}var j={mount:"mount",unmount:"unmount",urlPageChange:"urlPageChange",renderedRootsChanged:"renderedRootsChanged",addedRenderedRootsDidLayout:"addedRenderedRootsDidLayout",modeChange:"modeChange",slideChange:"slideChange",didLayout:"didLayout",siteReady:"siteReady",willMount:"willMount",willUpdate:"willUpdate",viewportChange:"viewportChange",svSessionChange:"svSessionChange",siteMetadataChange:"siteMetadataChange"};var k={scroll:"scroll",resize:"resize",focus:"focus",blur:"blur",message:"message",keydown:"keydown",keyup:"keyup",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",touchcancel:"touchcancel",orientationchange:"orientationchange"};var l={visibilitychange:"visibilitychange",click:"click"};var m=a.assign(a.clone(j),k,l);function n(){this.notifyAspects("orientationchange");this.timeout=window.setTimeout(this.notifyAspects.bind(this,k.resize),300)}function o(){var b=this.siteAPI.getRootIdsWhichShouldBeRendered();if(!a.isEqual(b,this._previoslyRenderedRoots)){var c=a.difference(this._previoslyRenderedRoots,b);var d=a.difference(b,this._previoslyRenderedRoots);this._rootsAddedAndNotYetLayouted=a(this._rootsAddedAndNotYetLayouted).concat(d).difference(c).uniq().value();this._previoslyRenderedRoots=a.clone(b);this.notifyAspects(j.renderedRootsChanged,d,c)}}function p(){var b=this.siteAPI.getSiteData().getRootNavigationInfo();var c=this._previoslyNavigationInfo;if(g.isOpen("sv_dpages")&&!a.isEqual(b,c)){if(f.dynamicPagesUtils.isSamePageNavigation(b,c)){if(f.dynamicPagesUtils.isInnerRouteChanged(b,c)){this.notifyAspects(m.urlPageChange)}}this._previoslyNavigationInfo=b}}var q={didLayout:function(){if(!a.isEmpty(this._rootsAddedAndNotYetLayouted)){var b=this._rootsAddedAndNotYetLayouted;this._rootsAddedAndNotYetLayouted=[];this.notifyAspects(j.addedRenderedRootsDidLayout,b)}}};return{supportedEvents:m,getAllSiteAspects:function(){this._addMissingAspects();return this.siteAspects},getInitialState:function(){this._aspectsSiteAPI=new d(this);this.siteAspects={};this._siteAspectsEventsRegistry={};this._listenersOnWindow=[];this._listenersOnDocument=[];this._previoslyRenderedRoots=[];this._previoslyNavigationInfo={};this._rootsAddedAndNotYetLayouted=[]},componentWillMount:function(){this._addMissingAspects();this.notifyAspects(this.supportedEvents.willMount)},componentWillUpdate:function(){this.notifyAspects(this.supportedEvents.willUpdate)},_addMissingAspects:function(){a.forEach(c.getAllAspectConstructors(),function(a,b){if(!this.siteAspects[b]){this.siteAspects[b]=new a(this._aspectsSiteAPI)}}.bind(this))},getAspectsContainer:function(){return this.refs.siteAspectsContainer},getAspectsReactComponents:function(){return a.flattenDeep(i(this.siteAspects,"getReactComponents",[this.loadedStyles]))},getAspectsComponentStructures:function(){return a.flattenDeep(i(this.siteAspects,"getComponentStructures"))},componentDidMount:function(){var c=b(window);var d=b(window.document);a.forEach(k,function(a){var b={eventName:a,listener:this.notifyAspects.bind(this,a)};this._listenersOnWindow.push(b);c.on(a,b.listener)}.bind(this));a.forEach(l,function(a){var b={eventName:a,listener:this.notifyAspects.bind(this,a)};this._listenersOnDocument.push(b);d.on(a,b.listener)}.bind(this));var e={eventName:k.orientationchange,listener:n.bind(this)};this._listenersOnWindow.push(e);c.on(e.eventName,e.listener);this.notifyAspects("mount");o.call(this);p.call(this)},componentDidUpdate:function(){if(this.isChangingUrlPage){this.notifyAspects("urlPageChange")}o.call(this);p.call(this)},componentWillUnmount:function(){var c=b(window);var d=b(window.document);a.forEach(this._listenersOnWindow,function(a){c.off(a.eventName,a.listener)});a.forEach(this._listenersOnDocument,function(a){d.off(a.eventName,a.listener)});window.clearTimeout(this.timeout);this._aspectsSiteAPI.onSiteUnmount();this.notifyAspects("unmount")},notifyAspects:function(b){if(a.has(q,b)){q[b].apply(this,a.tail(arguments))}var c=this._siteAspectsEventsRegistry[b];if(c&&c.length){var d=c.slice();a.invokeMap(d,"apply",undefined,a.tail(arguments))}},registerAspectToEvent:function(a,b){if(a===j.siteReady&&this.siteIsReady){b();return}if(!m[a]){e.log.error("this event isn't supported by site "+a);return}this._siteAspectsEventsRegistry[a]=this._siteAspectsEventsRegistry[a]||[];this._siteAspectsEventsRegistry[a].push(b)},unregisterAspectFromEvent:function(a,b){var c=this._siteAspectsEventsRegistry[a];if(c){var d=c.indexOf(b);if(d!==-1){c.splice(d,1)}}}}});define("core/siteRender/siteAspectsDomContainer",["lodash","react"],function(a,b){"use strict";return b.createClass({displayName:"siteAspectsDomContainer",render:function(){var c={};if(this.props.isMobileView){a.assign(c,{width:this.props.siteWidth})}return b.DOM.div({className:"siteAspectsContainer",style:c},this.props.aspectsCompsFunc())}})});define("core/siteRender/extraSiteHeight",["react"],function(a){"use strict";return a.createClass({displayName:"extraSiteHeight",render:function(){return a.DOM.div({style:{height:this.props.siteData.renderFlags.extraSiteHeight,position:"relative"}})}})});define("core/siteRender/blockingLayer",["lodash","react"],function(a,b){"use strict";var c=Math.pow(2,31)-2;return b.createClass({displayName:"blockingLayer",getStyle:function(){return a.merge({display:"inline-block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:c},this.props.siteData.renderFlags.blockingLayer||this.props.siteData.renderFlags.blockingPopupLayer)},render:function(){return b.DOM.div({style:this.getStyle()})}})});define("core/siteRender/wixAdsInstatiator",["lodash","santaProps","compUtils"],function(a,b,c){"use strict";var d={mobile:{footerLabel:"7c3dbd_67131d7bd570478689be752141d4e28a.jpg",adUrl:"http://www.wix.com/"},desktop:{topLabel:'<span class="smallMusa">(Wix-Logo) </span>Create a <span class="smallLogo">Wix</span> site!',topContent:'100s of templates<br />No coding needed<br /><span class="emphasis spacer">Start now >></span>',footerLabel:'<div class="adFootBox"><div class="siteBanner" ><div class="siteBanner"><div class="wrapper"><div class="bigMusa">(Wix Logo)</div><div class="txt shd" style="color:#fff">This site was created using </div> <div class="txt shd"><a href="http://www.wix.com?utm_campaign=vir_wixad_live" style="color:#fff"> WIX.com. </a></div> <div class="txt shd" style="color:#fff"> Create your own for FREE <span class="emphasis"> >></span></div></div></div></div></div>',adUrl:"http://www.wix.com/lpviral/en900viral?utm_campaign=vir_wixad_live"}};return{getStructure:function(a){var b=a.isMobileView();var c=b?"wysiwyg.viewer.components.WixAdsMobile":"wysiwyg.viewer.components.WixAdsDesktop";var d="wysiwyg.viewer.skins.wixadsskins.WixAdsWebSkin";return{id:a.WIX_ADS_ID,skin:d,componentType:c,styleId:"wixAds",layout:{position:b?"static":"absolute"}}},getWixAdsComponent:function(e){var f=e.getSiteData();var g=f.isMobileView();var h;if(g){h=f.mobileAdData&&!a.isEmpty(f.mobileAdData.adUrl)?f.mobileAdData:d.mobile}else{h=f.adData&&!a.isEmpty(f.adData.adUrl)?f.adData:d.desktop}var i=this.getStructure(f);var j=i.componentType;var k=c.compFactory.getCompClass(j);var l=b.componentPropsBuilder.getCompProps(i,e);l.adData=h;return k(l)}}});define("core/bi/events.json",[],function(){return{SITE_MEMBER_LOGIN_SUCCESS:{eventId:520,adapter:"hed",params:{c1:"userName"}},PAGE_PERFORMANCE_DATA:{eventId:350,adapter:"ugc-viewer",params:{c1:"preClient",c2:"client",c3:"santaVersion",i1:"timeoutSeconds",is_premium:"isPremium",is_wixsite:"isWixSite",dns_time:"dnsTime",response_time:"responseTime",experiment:"experiment",page_id:"pageId"},sampleRatio:1},LOAD_IMAGES_DATA:{eventId:341,adapter:"mlt",params:{c1:"imagePerf"}},LP_BUTTON_CLICK:{eventId:352,adapter:"ugc-viewer",params:{postSignUp:"postSignUp",postLogin:"postLogin",target_url:"targetUrl",button_name:"buttonName",active_fold:"activeFold",total_folds:"totalFolds",text:"text",component_id:"componentId",loginCompName:"loginCompName"},wixSiteSampleRatio:0},IMAGES_DOWNLOAD:{eventId:353,adapter:"ugc-viewer",params:{imagePerf:"imagePerf",kbps:"kbps",ttfb:"ttfb"}},MONOTYPE_FONTS_USED_ON_SITE:{eventId:355,adapter:"ugc-viewer",params:{}},USER_INTERACTION:{eventId:368,adapter:"ugc-viewer",params:{type:"type",time:"time"}},UNSAFE_HTML_IN_TEXT_COMPONENT:{eventId:369,adapter:"ugc-viewer",params:{filtered_content:"filtered_content",component_id:"component_id",component_type:"component_type"}},CLICK_TO_ACTION:{eventId:372,adapter:"ugc-viewer",params:{data:"data",field_type:"field_type",input_type:"input_type"}},SITE_MEMBER_OPEN_LOGIN_OR_SIGNUP_DIALOGS:{eventId:601,adapter:"site-members",src:5,params:{visitor_id:"visitor_id"}},SITE_MEMBER_EXIT_DIALOG:{eventId:602,adapter:"site-members",src:5,params:{context:"context",visitor_id:"visitor_id"}},SITE_MEMBER_SUBMIT_BUTTON:{eventId:603,adapter:"site-members",src:5,params:{context:"context",visitor_id:"visitor_id"}},SITE_MEMBER_CLICKED_FORGOT_PASSWORD:{eventId:604,adapter:"site-members",src:5,params:{visitor_id:"visitor_id"}},SITE_MEMBER_AUTH_DIALOG_OPENED:{eventId:607,adapter:"site-members",src:5,params:{context:"context",app_id:"app_id",initator:"initator",visitor_id:"visitor_id",has_social:"has_social"}},CDN_PERFORMANCE:{eventId:379,adapter:"ugc-viewer",params:{small_name:"smallName",small_dns_time:"smallDnsTime",small_connect_time:"smallConnectTime",small_ttfb:"smallTtfb",small_response_time:"smallResponseTime",small_kbps:"smallKbps",large_name:"largeName",large_dns_time:"largeDnsTime",large_connect_time:"largeConnectTime",large_ttfb:"largeTtfb",large_response_time:"largeResponseTime",large_kbps:"largeKbps"}}}});define("core/bi/events",["core/bi/events.json","lodash","utils"],function(a,b,c){"use strict";var d=c.logger;d.register("core","event",a);return a});define("core/core/siteBI",["lodash","zepto","utils","core/bi/events","fonts"],function(a,b,c,d,e){"use strict";var f=false;var g=c.logger;var h=["useHttps"];var i=25;var j=9216;var k=5;var l=2;var m=44;var n=11;if(typeof window==="undefined"){return{init:a.noop,send:a.noop}}var o=window.queryUtil&&window.queryUtil.isParameterTrue("isEdited");var p=["navigationStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","requestStart","responseStart","responseEnd"];var q=[5,15,30];var r=3;var s=10;var t=window.performance||{};var u=t.timing;u=a.pick(u,p);var v;function w(b){var c=b.rendererModel||b.editorModel||{};return a.reduce(c.runningExperiments,function(a,b,c){var d=h.indexOf(c);return d===-1?a:a+Math.pow(2,d)},0)}function x(b,c){if(v<c){return}if("lastTimeStamp"in b.wixBiSession){v=c}function e(a,b){if(typeof b!=="number"){return b}return b?b-a:undefined}var f=b.isPremiumDomain();var h=b.rendererModel.siteInfo.documentType==="WixSite";var i=a.assign({},u,{initialTimestamp:b.wixBiSession.initialTimestamp});i=a.mapValues(i,e.bind(null,i.navigationStart||i.initialTimestamp));var j=a.omitBy(b.wixBiSession,function(a,b){return typeof a!=="number"||b==="et"});if(t.getEntries){var k=t.getEntries().filter(function(a){return a.name.search(/.min.js$/)!==-1});if(k.length){var l=u.navigationStart||0;var m=a.find(k,function(b){return a.includes(b.name,"skins")});if(m){j.skinsStart=Math.round(l+m.startTime);j.skinsEnd=Math.round(j.skinsStart+m.duration)}j.packagesEnd=0;k.forEach(function(a){j.packagesEnd=Math.max(j.packagesEnd,a.startTime+a.duration)});j.packagesEnd=Math.round(l+j.packagesEnd)}}j=a.mapValues(j,e.bind(null,j.initialTimestamp||0));var n=b.santaBase.match(/([\d\.]+)\/?$/);n=n&&n[1]||"unknown";var o={isPremium:f?1:0,isWixSite:h?1:0,preClient:JSON.stringify(i),client:JSON.stringify(j),santaVersion:n,timeoutSeconds:c,experiment:w(b),pageId:b.getCurrentUrlPageId()};var p=i.domainLookupEnd-i.domainLookupStart;if(!isNaN(p)){o.dnsTime=p}var q=i.responseEnd-i.connectStart;if(!isNaN(q)){o.responseTime=q}if(b.wixBiSession.viewerSessionId){g.reportBI(b,d.PAGE_PERFORMANCE_DATA,o)}}function y(b){var c=[100,200,300,400,500,1e3,2e3,3e3];function e(a){return"_"+a+"k"}var f="_over"+a.last(c)+"k";
function h(b){var d=c.map(e).concat([f]);return a.zipObject(d,a.times(d.length,b))}function i(b,c){var d={url:b.src,hadError:false,width:b.width,height:b.height,size:b.width*b.height};var e=c?c.startTime:0;var f=c?c.duration:0;a.defaults(d,{hadError:!c,start:Math.round(e),end:Math.round(e+f),speed:Math.round(d.size/(f+.01)*100)/100});return d}function j(b){var d=a.findLastIndex(c,function(a){return a*1e3<b.size})+1;return d<c.length?e(c[d]):f}var k=a(window.document.getElementsByTagName("img")).filter(function(b){return a.startsWith(b.src,window.serviceTopology.staticMediaUrl)}).reduce(function(a,b){if(!b.complete){a.loading++}else{var c=t.getEntriesByName(b.src)[0];var d=i(b,c);if(d.hadError){a.errors++}else{var e=j(d);a.imagesBySize[e]++;if(a.imagesSamples[e].length<r){a.imagesSamples[e].push(d)}}}return a},{loading:0,imagesBySize:h(a.constant(0)),imagesSamples:h(function(){return[]}),errors:0});g.reportBI(b,d.LOAD_IMAGES_DATA,{imagePerf:JSON.stringify(k)})}function z(b){var e=window.serviceTopology?window.serviceTopology.staticMediaUrl:"nothing";function f(){return a(t.getEntriesByType("resource")).toArray().filter(function(b){return b.duration>i&&a.startsWith(b.name,e)}).value()}function h(a){var b=a.name.replace(e,"");var c=b.match(/\.([^\/]+).+w_(\d+),h_(\d+),/);if(c){var d=Number(c[2]);var f=Number(c[3]);return{url:b,format:c[1],width:d,height:f,size:d*f}}return{}}function l(b){var c=h(b);var d={start:Math.round(b.startTime),end:Math.round(b.startTime+b.duration),ttfb:Math.round(b.responseStart-b.requestStart),dns:Math.round(b.domainLookupEnd-b.domainLookupStart),ssl:b.secureConnectionStart?Math.round(b.connectEnd-b.secureConnectionStart):0,speed:b.duration>0?Math.round(c.size/b.duration):0,fileSize:b.fileSize,kbps:b.duration>0?Math.round(1e3*b.fileSize/b.duration):0};return a.assign({},c,d)}function m(e){function h(b){return new e(function(d){function e(c){d(a.assign(b,{fileSize:Math.round(c/1024)}))}var f=b.transferSize||b.encodedBodySize;if(f){e(f)}else{c.ajaxLibrary.ajax({type:"HEAD",url:b.name,success:function(a,b,c){var d=c.getResponseHeader("Content-Length")||0;e(d)},error:function(){e(0)}})}})}var i=f().map(h);e.all(i).then(function(c){var e=a(c).filter(function(a){return a.fileSize>k}).sortBy("fileSize").takeRight(s).map(l).filter(function(a){return a.kbps<=j}).value();if(e.length){var f=a.reduce(e,function(a,b){return{size:a.size+b.fileSize,duration:a.duration+b.end-b.start,ttfb:a.ttfb+b.ttfb}},{size:0,duration:0,ttfb:0});g.reportBI(b,d.IMAGES_DOWNLOAD,{imagePerf:JSON.stringify(e),kbps:Math.round(1e3*f.size/f.duration),ttfb:Math.round(f.ttfb/e.length)})}},a.noop)}if(window.Promise&&window.Promise.all){m(window.Promise)}else{requirejs(["bluebird"],m,a.noop)}}function A(c){if(!b){return}var e=function(f){b(window).off(".bi");e=a.noop;g.reportBI(c,d.USER_INTERACTION,{type:f})};var f=0;function h(){if(++f>l){e("key")}}var i=0;function j(){if(++i>m){e("mouse")}}var k=0;function o(){if(++k>n){e("scroll")}}b(window).on({"keydown.bi":h,"mousemove.bi":j,"scroll.bi":o})}var B=a.now();return{init:function(b){if(o){return}if(g.shouldSendReport(b,d.USER_INTERACTION)){setTimeout(function(){A(b)},300)}if(!g.shouldSendReport(b)){return}v=Infinity;B=a.now();a.forEach(q,function(a){setTimeout(x.bind(null,b,a),a*1e3)});if(t.getEntriesByName){setTimeout(function(){y(b);z(b)},10500)}},send:function(b){if(!o){if(g.shouldSendReport(b,d.PAGE_PERFORMANCE_DATA)){setTimeout(function(){x(b,Math.round((a.now()-B)/1e3))},300)}}},trackFontsIfNeeded:function(a,b){var c=e.fontsTracker;if(!o&&!f&&c.shouldTrackFonts(a,b)){f=true;g.reportBI(a,d.MONOTYPE_FONTS_USED_ON_SITE,{})}}}});define("core/siteRender/WixPopupRoot",["lodash","react","reactDOM","santaProps","core/siteRender/WixPageReact","core/siteRender/blockingLayer"],function(a,b,c,d,e,f){"use strict";var g=b.createFactory(e);var h=b.createFactory(f);function i(a){return a.renderFlags.componentViewMode==="preview"}return b.createClass({displayName:"WixPopupRoot",getInitialState:function(){return{activePopupId:this.props.currentPopupId,activePopupKey:1,animating:false}},shouldComponentUpdate:function(b,c){if(!b.currentPopupId&&this.state.activePopupId&&!this.state.animating){var d=this.props.siteAPI.getSiteAspect("actionsAspect");var e=a.keys(this.refs[this.state.activePopupId].refs);this.setState({animating:true});d.registerComponentsExit(e,function(){if(!b.currentPopupId){this.setState({activePopupId:null,animating:false})}d.handleNavigationComplete()}.bind(this));return false}else if(c.animating&&!b.currentPopupId){return false}return true},componentWillReceiveProps:function(a){if(a.currentPopupId!==this.state.activePopupId){this.setState({activePopupId:a.currentPopupId,activePopupKey:(this.state.activePopupKey||0)+1,animating:false})}},componentDidUpdate:function(){var a=this.state.activePopupId,b;if(a&&i(this.props.siteData)){b=this.props.siteAPI.getRuntimeDal();b.markPopupAsBeenOpened(a)}},render:function(){var a=this.props.siteData;var c=this.state.activePopupId;var e=a.isMobileView();if(c){var f=d.componentPropsBuilder.getRootProps(this.props.currentPopupId,this.props.siteAPI,this.props.viewerPrivateServices,this.props.loadedStyles,this.props.measureMap);f.key=this.state.activePopupKey;var i=[g(f),this.props.blockingPopupLayer?h({siteData:a}):null];var j=a.getSiteWidth();var k=b.DOM.div({id:"POPUPS_WRAPPER",className:"POPUPS_WRAPPER",key:"POPUPS_WRAPPER",style:{minWidth:j,minHeight:a.getScreenHeight(),margin:"0 auto",width:e?j:"auto"},children:i});return b.DOM.div({id:"POPUPS_ROOT",className:e?"POPUPS_ROOT mobile":"POPUPS_ROOT",key:"POPUPS_ROOT",style:{overflow:a.renderFlags.allowSiteOverflow?null:"hidden"},tabIndex:0,children:[k]})}return null},componentDidMount:function(){var a=c.findDOMNode(this);if(a){a.focus()}}})});define("core/siteRender/siteClickHandler",["lodash","zepto","utils","core/bi/events.json"],function(a,b,c,d){"use strict";function e(a){a.stopPropagation();a.preventDefault();return false}function f(a,b){if(a.attr("data-mobile")){var d=c.stringUtils.isTrue(a.attr("data-mobile"));b.setMobileView(d);c.mobileViewportFixer.fixViewportTag(b.getSiteData())}}function g(a,b,d){var e=this.props.siteData;var f=c.linkRenderer.isExternalLink(e,d);var g=c.linkRenderer.isEmailLink(d);var h=b.attr("target")==="_self";var i=e.renderRealtimeConfig.previewTooltipCallback;var j=!e.renderFlags.isExternalNavigationAllowed&&i&&(f&&h||g);if(j){var k=a.target.getBoundingClientRect();i(k,"text_editor_inactive_link_on_preview");return true}return false}function h(a,b,d){var e=a.attr("data-no-physical-url");var f=e||b;return c.wixUrlParser.parseUrl(d,f)}function i(a){return!a.attr("data-no-physical-url")}function j(a){return!!a.attr("data-keep-roots")}function k(b,c){a.assign(b,{pageItemAdditionalData:c.attr("data-page-item-context"),anchorData:c.attr("data-anchor")})}function l(a,b){var c=this.props.siteData;var d=h(a,b,c);if(!d||a.attr("target")==="_blank"){return false}k(d,a);var e=i(a);var f=j(a);this.handleNavigation(d,b,e,f);return true}function m(a,b){if(!b.attr("data-type")){return}a.reportBI(d.CLICK_TO_ACTION,{field_type:b.attr("data-type"),data:b.attr("data-content"),input_type:b.attr("data-auto-recognition")?"auto_recognized":"user_input"})}function n(a){var c=a.target.tagName.toLowerCase()==="a"?b(a.target):b(a.target).parents("a");var d=c[0];var h=c.attr("href")||d&&d.href;m(this.siteAPI,c);f(c,this.siteAPI);var i=g.call(this,a,c,h);if(!i){i=l.call(this,c,h)}if(this.siteAPI.isSelectionSharerVisible()){this.siteAPI.hideSelectionSharer()}return i?e(a):true}return{clickHandler:n}});define("core/siteRender/siteTraversalMixin",["lodash"],function(a){"use strict";var b=["refs","component"];function c(a,b){return a[b]&&!a[b].isStub()}function d(b){return a(b).omit("").pickBy(function(a){return!a.isStub()}).keys().value()}function e(){var b=this.getMasterPage();if(!b){return[]}var e=this.props.siteData;var f=i(b);if(!f){return[]}var g=j(this);var h=e.getPrimaryPageId();var k=e.getCurrentPopupId();if(c(f,h)&&(!k||c(g,k))){return a.compact(["masterPage",h,k])}return a.flatten(["masterPage",d(f),d(g)])}function f(){var b=this.props.siteData;if(!this.getMasterPage()){var c=b.getExistingRootNavigationInfo(b.getCurrentUrlPageId());var d=this.siteAPI.getSiteAspect("siteMembers").isPageAllowed(c);if(!d){return[]}}return a.compact(["masterPage",b.getPrimaryPageId(),b.getCurrentPopupId()])}function g(c){var d=this.getPageById(c);var e=d&&d.refs;if(!e){return null}return a.mapValues(e,function(c){return a.get(c,b,c)})}function h(c,d){var e=this.getComponentsByPageId(c)[d];return a.get(e,b,e)}function i(b){return a.get(b,["refs","SITE_PAGES","refs","component","refs"])}function j(b){return a.get(b,["refs","popupRoot","refs"],{})}return{getAllRenderedRootIds:e,getRootIdsWhichShouldBeRendered:f,getComponentsByPageId:g,getComponentByPageAndCompId:h,getPageRefs:i}});define("core/components/selectionSharer/selectionSharer",["lodash","react","utils"],function(a,b,c){"use strict";var d=c.wixappsClassicsLogger;var e=c.socialShareHandler;var f="/static/images/selectionSharerSocialIcons/";var g="facebook.svg";var h="twitter.svg";var i="mail.svg";return b.createClass({displayName:"selectionSharer",getInitialState:function(){return{visible:false,position:null,shareInfo:null}},sharePostWrapper:function(a){var b=this.state.shareInfo;b.url=a;e.handleShareRequest({url:a,service:b.service,title:b.title,storeId:b.storeId,postId:b.postId,hashTags:b.hashTags||"",imageUrl:b.imgSrc,addDeepLinkParam:false,description:b.description},this.props.siteAPI)},show:function(a,b){d.reportEvent(this.props.siteAPI.getSiteData(),d.events.SELECTION_SHARER_OPENED,{post_id:b.postId,site_id:b.siteId});this.setState({visible:true,position:a,shareInfo:b})},hide:function(){this.setState({visible:false,position:null,shareInfo:null})},isVisible:function(){return this.state.visible},twitterClickHandler:function(){d.reportEvent(this.props.siteAPI.getSiteData(),d.events.SELECTION_SHARER_CLICKED,{type:"twitter",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId});this.hide();var a=this.state.shareInfo;a.service="twitter";a.title=a.description;e.shortenURL(a.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,a.url))},facebookClickHandler:function(){d.reportEvent(this.props.siteAPI.getSiteData(),d.events.SELECTION_SHARER_CLICKED,{type:"facebook",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId});this.hide();var a=this.state.shareInfo;a.service="facebook";e.shortenURL(a.url,2e3,this.sharePostWrapper,this.sharePostWrapper.bind(null,a.url))},mailClickHandler:function(){d.reportEvent(this.props.siteAPI.getSiteData(),d.events.SELECTION_SHARER_CLICKED,{type:"mail",post_id:this.state.shareInfo.postId,site_id:this.state.shareInfo.siteId});this.hide();var a=this.state.shareInfo;a.service="email";a.description=a.description+"\r\n"+"( "+a.url+" )";e.handleShareRequest(a,this.props.siteAPI)},render:function(){if(this.state.visible){var a={position:"absolute",left:this.state.position.x+"px",top:this.state.position.y+"px"};var c=this.props.siteBasePath+f;return b.createElement("div",{className:"selectionSharerContainer",style:a},[b.createElement("img",{key:"selection-sharer-facebook-img",className:"selectionSharerOption",src:c+g,onClick:this.facebookClickHandler}),b.createElement("div",{key:"selection-sharer-first-separator",className:"selectionSharerVerticalSeparator"}),b.createElement("img",{key:"selection-sharer-twitter-img",className:"selectionSharerOption",src:c+h,onClick:this.twitterClickHandler}),b.createElement("div",{key:"selection-sharer-second-separator",className:"selectionSharerVerticalSeparator"}),b.createElement("img",{key:"selection-sharer-mail-img",className:"selectionSharerOption",src:c+i,onClick:this.mailClickHandler})])}return null}})});define("core/siteRender/WixSiteReact",["zepto","lodash","react","reactDOM","santaProps","core/siteRender/styleCollector","core/siteRender/WixThemeReact","core/siteRender/WixPageReact","core/siteRender/wixBackgroundInstantiator","layout","utils","core/siteRender/SiteAPI","core/siteRender/siteAspectsMixin","animations","core/siteRender/siteAspectsDomContainer","core/siteRender/extraSiteHeight","core/siteRender/blockingLayer","core/siteRender/wixAdsInstatiator","mousetrap","core/core/siteBI","core/siteRender/WixPopupRoot","core/siteRender/siteClickHandler","core/siteRender/siteTraversalMixin","core/components/selectionSharer/selectionSharer","experiment"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){"use strict";var z=e.componentPropsBuilder;var A={"components.layout.update":true,"renderPlugins.setCompsToShowOnTop":true,"components.layout.updateAndAdjustLayout":true,"siteSegments.layout.update":true,"components.layout.updateDock":true,"components.layout.setDock":true,"components.layout.unDock":true};var B=A.hasOwnProperty.bind(A);var C={"wysiwyg.viewer.components.BoxSlideShow":true,"wysiwyg.viewer.components.StripContainerSlideShow":true,"wysiwyg.viewer.components.StripColumnsContainer":true};var D={"wysiwyg.viewer.components.Column":N};var E={"wysiwyg.viewer.components.Column":N};var F=k.style.MAX_Z_INDEX;var G=c.createFactory(g);var H=c.createFactory(h);var I=c.createFactory(u);var J=c.createFactory(o);var K=c.createFactory(p);var L=c.createFactory(q);var M=k.dataUtils;function N(a){return!a.getSiteData().isMobileView()}function O(a,c){return b.isFunction(a)?a(c):a}function P(a,b,c){return S(c)||O(D[a],b)}function Q(a,b){return O(E[a],b)}function R(a,b){return O(C[a],b)}function S(a){return a==="wysiwyg.viewer.components.Group"}function T(a,c){var d=c.getSiteData();var e=b.last(a);var f=M.getChildrenData(e,d.isMobileView());var g=[e].concat(f);if(a.length>1){var h=a[a.length-2];if(P(e.componentType,c,h.componentType)){g.push(h)}if(Q(e.componentType,c)){var i=M.getChildrenData(h,d.isMobileView());g=g.concat(i)}if(R(e.componentType,c)){b.forEach(f,function(a){var b=M.getChildrenData(a,d.isMobileView());g=g.concat(b)})}}return g}var U=function(a,b,c,e,f,g,h){a=a&&b?a.refs[b]:a;a=a&&c?a.refs[c]:a;a=a&&e?a.refs[e]:a;a=a&&f?a.refs[f]:a;a=a&&g?a.refs[g]:a;a=a&&h?a.refs[h]:a;return a&&d.findDOMNode(a)};var V={desktop:k.math.interpolateSegmentsFunction([[0,.6],[360,.8],[720,1],[1440,1.2],[7200,2.8],[9600,3],[1e4,3]]),mobile:k.math.interpolateSegmentsFunction([[0,.5],[360,.7],[720,.9],[1440,1.1],[7200,2.7],[9600,2.9],[1e4,2.9]])};function W(a,c){var d=this.deletedMeasureMap||this.props.siteData.measureMap;var e=z.getRootProps(this.props.rootId,a,this.props.viewerPrivateServices,c,d);e.structure=b.merge({},e.structure,{layout:{position:this.props.siteRootPosition}});e.ref=this.props.rootId;e.refInParent=e.ref;e.className="SITE_ROOT";e.firstPage=true;delete e.id;e.style={width:this.props.siteData.getSiteWidth()};e.key=(a.getSiteData().isMobileView()?"mobile_":"desktop_")+"siteRoot";return e}function X(){var a=this;return b.throttle(function(){if(!a.dead&&a.getMasterPage()){a.props.siteData.updateScreenSize();a.forceUpdate()}},500,{leading:false,trailing:true})}function Y(){if(window.rendererModel){var a=b(window.rendererModel.runningExperiments).pickBy(function(a){return a==="new"}).keys().value();s.bind("ctrl+alt+shift+e",function(){window.alert("Active Experiments:\n"+a).join("\n")})}}function Z(){var a=this.props.siteData;var c=a.baseVersion||"could not retrieve version!";s.bind("ctrl+alt+shift+v",function(){window.alert("You are running React!\nVersion: "+c)});var d=b.find(a.currentUrl.query,function(a,b){return b.toLowerCase()==="alertversion"});if(d&&(a.isMobileDevice()||a.isTabletDevice())){window.alert("You are running React!\nVersion: "+c)}}function $(a){if(a.componentDidLayout){a.componentDidLayout.call(a)}if(a.componentDidLayoutAnimations){a.componentDidLayoutAnimations.call(a)}b.forOwn(a.refs,$)}function _(a){b.forEach(a,$)}function aa(a){var c=b.clone(a.getMasterPageData().structure);["children","mobileComponents"].forEach(function(a){var d=b.chain(c[a]).find({id:"PAGES_CONTAINER"}).cloneDeep().value();d.layout.y=0;ba(d);c[a]=[d]});return c}function ba(a){if(a.layout.anchors){var b={distance:0,locked:true,originalValue:a.layout.height,targetComponent:"masterPage",topToTop:a.layout.height,type:"BOTTOM_PARENT"};while(a.layout.anchors.length){a.layout.anchors.pop()}a.layout.anchors.push(b)}}function ca(a){var c=this.getAspectsComponentStructures();var d=this.props.siteData;var e=b.transform(c,function(a,b){a[b.id]={structure:b,getDomNodeFunc:U.bind(null,this.refs.siteAspectsContainer)}}.bind(this),{});var f=this.state.currentUrlPageId;if(!a){return e}e.inner={structure:d.pagesData[f].structure,pageId:f,getDomNodeFunc:U.bind(null,this.getPageById(f))};e.outer={structure:d.getMasterPageData().structure,getDomNodeFunc:U.bind(null,this.refs[this.props.rootId])};var g;var h=d.getViewMode();if(d.isPageLandingPage(f)){e.outer.structure=aa(d);g=b.get(d,["anchorsMap","landingPageMasterPage",h])}else{g=b.get(d,["anchorsMap","defaultMasterPage",h])}if(g){b.set(d,["anchorsMap",d.getMasterPageData().structure.id,h],g)}e.siteBackground={structure:i.getWixBgStructure(),getDomNodeFunc:U.bind(null,this)};var j=this.state.currentPopupId;if(j){e[j]={structure:d.getPageData(j).structure,getDomNodeFunc:U.bind(null,this.refs.popupRoot,j),pageId:j}}if(d.shouldShowWixAds()){var k=r.getStructure(d);e.wixAds={structure:k,getDomNodeFunc:U.bind(null,this)}}return e}function da(b){var c=a(".hiddenTillReady");if(b.isMobileDevice()){a(".wix-menu-enabled").removeClass("wix-menu-enabled");c.css({display:"none"})}else{c.removeClass("hiddenTillReady")}}function ea(a){return{x:a.pageXOffset||a.scrollX||0,y:a.pageYOffset||a.scrollY||0}}function fa(a,b,c){var d=Math.abs(b-a);var e=c?V.mobile(d):V.desktop(d);return e}function ga(c,e){if(!c){return}var f=b.assign({},e);var g=k.style.getPrefixedTransform();var h=ha(g);f[h]=e[g];if(g!==h){f[g]=""}if(c.hasOwnProperty("getRootStyle")){b.assign(f,c.getRootStyle(f))}a(d.findDOMNode(c)).css(f)}function ha(a){return a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}function ia(a,b){return a.getSiteAspect("siteMembers").isPageAllowed(b)}function ja(a,c){var d=b.keys(c);var e=function(d){return b.isEmpty(ka(a,c,d))};return!b.every(d,e)}function ka(a,c,d){var e=b.get(a,d,{});var f=b.get(c,d,{});return k.modes.getModeChanges(e,f)}function la(a,b){var c=a.getSiteData();var d=c.getFocusedRootId()!==b.pageId;var e=c.getFocusedRootId()===a.getCurrentPopupId();if(y.isOpen("sv_platform1")&&d&&!e){a.getSiteAspect("WidgetAspect").loadApps([b.pageId])}}function ma(a,c,d){if(!y.isOpen("sv_partialReLayout")){return null}if(!a.measureMap||b.isEmpty(c)&&b.isEmpty(d)){return null}return b.assign({},d,c)}function na(a){return a?50:49}function oa(a,c){var d=b.get(a,"lastScale");return!d||c.layout.scale===d}return c.createClass({displayName:"WixSite",mixins:[m,k.renderDoneMixin,v,w],propTypes:{wixCodeAppApi:c.PropTypes.shape({init:c.PropTypes.func,sendMessage:c.PropTypes.func,registerMessageHandler:c.PropTypes.func,registerMessageModifier:c.PropTypes.func})},getDefaultProps:function(){return{siteRootPosition:"static",scopedRoot:null,rootId:"masterPage",wixCodeAppApi:{init:b.noop,sendMessage:b.noop,registerMessageHandler:b.noop,registerMessageModifier:b.noop}}},getPrimaryPage:function(){var a=this.refs[this.props.rootId];if(this.props.rootId==="masterPage"&&a){var b=this.props.siteData.getPrimaryPageId();a=this.getPageComponent(a,b)}return a},getCurrentPopup:function(){var a=this.props.siteData.getCurrentPopupId();if(a){return k.reactComponentUtils.getRef(this,"popupRoot",a)}return null},getMasterPage:function(){var a=this.refs[this.props.rootId];return a},getPageById:function(a){var b=this.getMasterPage();if(a===this.props.rootId){return b}if(b&&this.getPageComponent(b,a)){return this.getPageComponent(b,a)}return k.reactComponentUtils.getRef(this,"popupRoot",a)},getPageComponent:function(a,c){return b.get(this.getPageRefs(a),c)},isDomOnly:function(a,c,d,e){return b.every(e,B)&&d.style.position===a.props.style.position&&oa(a,c)&&b.isEqual(d.compProp,a.props.compProp)&&d.style.transform===a.props.style.transform},isDomOnlyByMethodNamesAndCompId:function(a,c){var d=this.getPageOfComp(c);var e=d.props.rootId;var f=this.getComponentByPageAndCompId(e,c);var g=M.findHierarchyInStructure(c,this.props.siteData.isMobileView(),this.props.siteData.pagesData[e].structure);var h=b.last(g);var i=z.getCompProps(h,this.siteAPI,e,this.loadedStyles);return this.isDomOnly(f,h,i,a)},updateMultipleComps:function(a,c){this.tempMeasureMap=this.props.siteData.measureMap;var d=[];function e(c){d.push(c);if(d.length===a.length){this.lockedCompIds=b.flatten(d);this.reLayout()}}this.noEnforceAnchors=c;b.forEach(a,this.updateDOMOnlySingleComp.bind(this,e.bind(this)))},updateDOMOnlySingleComp:function(a,c){var d=this.getPageOfComp(c);var f=d.props.rootId;var g=this.getComponentByPageAndCompId(f,c);var h=M.findHierarchyInStructure(c,this.props.siteData.isMobileView(),this.props.siteData.pagesData[f].structure);var i=b.last(h);var j=z.getCompProps(i,this.siteAPI,f,this.loadedStyles);var k=T(h,this.siteAPI);var l=b.map(k,"id");ga(g,j.style);var m=b.reject(k,i);var n=this.componentsUpdatedBySingleCompUpdateBehindReactsBack[c]||b.clone(g.props.style);this.componentsUpdatedBySingleCompUpdateBehindReactsBack[c]=n;if(j.style.zIndex===F&&(!n||!n.hasOwnProperty("zIndex"))){var o=i.layout.fixedPosition?na(this.props.siteData.renderFlags.renderFixedPositionContainers):"";this.componentsUpdatedBySingleCompUpdateBehindReactsBack[c]=b.assign(n,{zIndex:o})}b.forEach(m,function(a){ga(d.refs[a.id],e.propsBuilderUtil.getStyle(a.layout,this.siteAPI,a.id))}.bind(this));a(l)},getPageOfComp:function(a){var c=b.find(this.siteAPI.getAllRenderedRootIds(),function(b){var c=this.getPageById(b);if(!c){return false}var d=c.refs;return!!d[a]}.bind(this));return this.getPageById(c)},updateSingleComp:function(a,c,d){var e=this.props.siteData;e.dataResolver.setReadingFromCache(false);this.tempMeasureMap=e.measureMap;this.deletedMeasureMap=e.measureMap;delete e.measureMap;var f=this.getPageOfComp(a);var g=f.props.rootId;var h=this.getComponentByPageAndCompId(g,a);var i=M.findHierarchyInStructure(a,e.isMobileView(),e.pagesData[g].structure);var j=b.clone(b.last(i));j.layout=b.clone(j.layout);var l=z.getCompProps(j,this.siteAPI,g,this.loadedStyles);e.dataResolver.setReadingFromCache(true);var m=k.style.getPrefixedTransform();var n=ha(m);l.style[n]=l.style[m];this.markInvokedMethodNames(d);var o=[];var p=null;var q=null;function r(){if(p){h.componentWillUpdate=p}if(q){h.componentDidUpdate=q}this.noEnforceAnchors=c;b.forEach(o,function(a){a()});this.lockedCompIds=b.map(T(i,this.siteAPI),"id");this.reLayout()}if(this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]){ga(h,this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]);delete this.componentsUpdatedBySingleCompUpdateBehindReactsBack[a]}var s={};if(h.componentWillReceiveProps){var t=h.setState;h.setState=function(a,c){b.assign(s,a);if(c){o.push(c)}};h.componentWillReceiveProps(l,h.state);h.setState=t}if(h.componentWillUpdate){p=h.componentWillUpdate;h.componentWillUpdate=function(a,b){p.call(h,l,b)}}var u=["compProp","compData","style","compDesign"];if(h.componentDidUpdate){q=h.componentDidUpdate;var v=b.clone(h.props);b.forEach(u,function(a){v[a]=b.clone(v[a])});h.componentDidUpdate=function(a,b){q.call(h,v,b)}}b.forEach(u,function(a){if(b.has(h.props,a)){b.assign(h.props[a]||{},l[a])}});h.setState(s,r.bind(this))},scrollToAnchor:function(a,b){var c=this.props.getSiteContainer();var d=this.props.siteData.isMobileView();var e=fa(ea(c).y,a.y,d);var f=d?"Quint.easeOut":"Sine.easeInOut";n.animate("BaseScroll",c,e,0,{y:a.y,ease:f,callbacks:{onUpdate:b}})},scrollToTop:function(){this.scrollToAnchor({y:0})},getInitialState:function(){this.loadedStyles=this.loadedStyles||{};this.reLayoutPending=false;this.pendingReLayoutCompsMap={};this.siteAPI=new l(this);this.isBusy=true;this.isChangingUrlPage=true;this.noEnforceAnchors=false;this.siteAPI.reportBeatEvent(7,this.props.siteData.getPrimaryPageId());this.componentsUpdatedBySingleCompUpdateBehindReactsBack={};this.prevActiveModes=k.objectUtils.cloneDeep(this.props.siteData.activeModes);return{}},componentWillMount:function(){var a=this.props.siteData;var b=a.getCurrentUrlPageId();var c=a.getExistingRootNavigationInfo(b);var d=ia(this.siteAPI,c)?b:null;this.setState({currentUrlPageId:d,currentPopupId:null})},_addSiteStylesToLoaded:function(a,c){var d=a.getAllTheme();var e=this.getAspectsComponentStructures();if(c){var g=a.getAllPossiblyRenderedRoots();e=b.reduce(g,function(b,c){b.push(a.pagesData[c].structure);return b},e)}else{e.push(a.getMasterPageData().structure)}b.forEach(e,function(b){var c=a.pagesData[b.id]?b.id:a.MASTER_PAGE_ID;f.collectStyleIdsFromStructure(b,d,a,this.loadedStyles,c,a.isMobileView())}.bind(this))},markInvokedMethodNames:function(a){this.invokedMethodNames=b.union(this.invokedMethodNames||[],a)},componentWillUpdate:function(a,c){k.performance.start("reRender");this.isBusy=true;this.isChangingUrlPage=c.currentUrlPageId!==this.state.currentUrlPageId;b.forEach(this.componentsUpdatedBySingleCompUpdateBehindReactsBack,function(a,b){var c=this._aspectsSiteAPI.getComponentById(b);if(c){ga(c,a)}}.bind(this));this.componentsUpdatedBySingleCompUpdateBehindReactsBack={};if(c.noEnforceAnchors&&c.noEnforceAnchors!==this.state.noEnforceAnchors){this.noEnforceAnchors=true}if(c.forceUpdateIndex!==this.state.forceUpdateIndex){this.props.siteData.clearCache();this.tempMeasureMap=this.props.siteData.measureMap;this.deletedMeasureMap=this.props.siteData.measureMap;delete this.props.siteData.measureMap}else{this.markInvokedMethodNames(["*"])}if(ja(this.prevActiveModes,a.siteData.activeModes)){this.deletedMeasureMap=this.props.siteData.measureMap;delete this.props.siteData.measureMap}},render:function(){var a=this.props.siteData;var d=a.getExistingRootNavigationInfo(a.getCurrentUrlPageId());var e=ia(this.siteAPI,d);var f=[G({themeData:a.getAllTheme(),siteData:a,masterPage:a.getMasterPageData(),loadedStyles:this.loadedStyles,styleRoot:this.props.scopedRoot?"#"+this.props.scopedRoot:null,ref:"theme",shouldRenderPage:e,siteAPI:this.siteAPI}),a.shouldShowWixAds()?r.getWixAdsComponent(this.siteAPI):undefined,J({ref:"siteAspectsContainer",key:"siteAspectsContainer",siteWidth:this.props.siteData.getSiteWidth(),isMobileView:this.props.siteData.isMobileView(),aspectsCompsFunc:this.getAspectsReactComponents}),c.createElement(x,{ref:"selectionSharer",siteBasePath:a.santaBase,siteAPI:this.siteAPI})];if(a.renderFlags.extraSiteHeight>0&&!a.isMobileView()){f.push(K({siteData:a}))}if(a.renderFlags.blockingLayer){f.push(L({siteData:a}))}if(e){var g=W.call(this,this.siteAPI,this.loadedStyles);var h=i.getWixBgComponent(this.siteAPI);var j=this.getRootStyle();f.splice(2,0,h,c.DOM.div({className:"SITE_ROOT",key:"SITE_ROOT",id:this.props.scopedRoot?null:"SITE_ROOT",style:j},H(g)));f.splice(4,0,I({currentPopupId:this.state.currentPopupId,viewerPrivateServices:this.props.viewerPrivateServices,siteAPI:this.siteAPI,siteData:a,loadedStyles:this.loadedStyles,ref:"popupRoot",siteRootStyle:j,blockingPopupLayer:a.renderFlags.blockingPopupLayer,measureMap:this.deletedMeasureMap}))}else{this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(d)}this._addSiteStylesToLoaded(a,e);return c.DOM.div(b.assign({className:this.props.className,id:this.props.scopedRoot?this.props.scopedRoot:null,onClick:this.clickHandler,children:f},this.props.extraEventsHandlers))},getRootStyle:function(){var a={};a.width=this.props.siteData.getSiteWidth();a.paddingBottom=this.props.siteData.getPageBottomMargin();if(this.state.siteRootHidden){a.height=0;a.overflowY="hidden"}return a},onPopState:function(){var a=window.location.href;var b=k.wixUrlParser.parseUrl(this.props.siteData,a);if(b){this.tryToNavigate(b,true)}},onHashChange:function(){var a=k.wixUrlParser.parseUrl(this.props.siteData,window.location.href);if(a&&this.props.siteData.isUsingUrlFormat("slash")){this.tryToNavigate(a)}},isPageExists:function(a){return b.includes(this.props.siteData.getAllPageIds(),a)},updateUrlIfNeeded:function(a){var b=this.siteAPI.getSiteData();this.props.updateUrlIfNeededMethod(b,a)},navigateIfPossible:function(a,c,d,e){var f=b.get(this.props,"viewerPrivateServices.siteDataAPI");var g=this.siteAPI.getSiteData();if(this.isPageExists(a.pageId)){if(ia(this.siteAPI,a)){var h=g.getDataByQuery(a.pageId);if(!h){return}if(!h.isPopup){this.siteAPI.getSiteAspect("siteMembers").forceCloseDialog()}var i=b.clone(a);i.title=a.title||h.pageUriSEO;var j=k.wixUrlParser.getUrl(g,i);var l=g.isPopupPage(a.pageId)||c;this.siteAPI.startingPageTransition(i);this.props.navigateMethod(this,f,j,i,!l,d,e)}else{this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(a);this.forceUpdate()}}},tryToNavigate:function(a,c,d,e){var f=this.siteAPI.getSiteData();this.currNav=a;if(y.isOpen("sv_dpages")&&a.routerDefinition&&!a.pageId){this.props.getDynamicPageRealPage(f,a,function(g){if(!b.isEqual(this.currNav,a)){return}if(g.isStaticPageRedirect){a=g}else{b.assign(a,g)}la(this.siteAPI,a);if(f.getPrimaryPageId()===a.pageId){var h=a.innerRoute!==f.getRootNavigationInfo().innerRoute;if(h){this.siteAPI.getSiteAspect("WidgetAspect").stopApps([a.pageId]);this.siteAPI.getSiteAspect("WidgetAspect").loadApps([a.pageId])}this.handleSamePageAnchorNavigation(a);if(!h&&a.imageZoom===f.getRootNavigationInfo().imageZoom){return}}this.navigateIfPossible(a,c,d,e)}.bind(this));return}la(this.siteAPI,a);this.navigateIfPossible(a,c,d,e)},handleSamePageAnchorNavigation:function(a){var b=this.siteAPI;var c=this.props.siteData;if(a.anchorData){var d=function(d){var e=d.ratio===1;if(e){b.getSiteAspect("anchorChangeEvent").setSelectedAnchorAsync(c,a.anchorData,a.pageId,k.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL)}};b.scrollToAnchor(a.anchorData,d.bind(this))}else if(!c.isImageZoom(a)&&!a.routerDefinition){this.scrollToTop()}},handleNavigation:function(a,c,d,e){var f=this.props.siteData;if(a.pageId===f.getPrimaryPageId()){if(c!=="#"){var g=b.get(this.props,"viewerPrivateServices.siteDataAPI");this.props.navigateMethod(this,g,c,a,d,e)}this.handleSamePageAnchorNavigation(a)}else{this.tryToNavigate(a,!d)}},renderCompsAfterLayout:function(a){this.props.siteData.componentsToRender=b.union(this.props.siteData.componentsToRender,a);if(!b.isEmpty(a)){this.forceUpdate(function(){this.props.siteData.componentsToRender=[]})}},reLayout:function(){if(this.siteAPI.getSiteAspect("WidgetAspect").allContextsReady()){var a=this.lockedCompIds&&k.arrayUtils.toTrueObj(this.lockedCompIds);var b=this.props.siteData;var c=b.getExistingRootNavigationInfo(b.getCurrentUrlPageId());var d=ia(this.siteAPI,c);j.updateBodyNodeStyle(b);var e=ca.call(this,d);var f=ma(b,a,this.pendingReLayoutCompsMap);var g=j.reLayout(e,this.siteAPI,this.noEnforceAnchors,a,f);b.measureMap=g.measureMap;b.reLayoutedCompsMap=g.reLayoutedCompsMap;delete this.tempMeasureMap;delete this.lockedCompIds;if(d){this.pendingReLayoutCompsMap={};this.reLayoutPending=false;this.noEnforceAnchors=false;this.renderCompsAfterLayout(g.componentsToRender);this.isBusy=false;var h=this.getMasterPage();var i=[h,this.getPrimaryPage(),this.refs.siteAspectsContainer];var l=this.getCurrentPopup();if(l){i.push(l)}_(i)}else{this.siteAPI.getSiteAspect("siteMembers").showDialogOnNextRender(c);_([this.refs.siteAspectsContainer])}this.isBusy=false;var m=this.invokedMethodNames||[];this.invokedMethodNames=[];this.notifyAspects("didLayout",m);if(!this.siteIsReady){this.siteIsReady=true;if(this.siteAPI&&this.siteAPI.setBiMarker){this.siteAPI.setBiMarker("lastTimeStamp")}this.notifyAspects("siteReady")}}},registerReLayoutPending:function(a){this.pendingReLayoutCompsMap[a]=true;this.reLayoutPending=true},reLayoutIfPending:function(){if(!this._reLayoutAnimationFrameRequested&&this.reLayoutPending){this._reLayoutAnimationFrameRequested=true;k.animationFrame.request(function(){this._reLayoutAnimationFrameRequested=false;if(this.reLayoutPending){this.reLayoutPending=false;this.refs.theme.initWaitForStylesReady();
}}.bind(this))}},componentDidMount:function(){if(this.props.siteData.isUsingUrlFormat(k.siteConstants.URL_FORMATS.SLASH)){this.siteAPI.reportCurrentPageEvent()}else{this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full)}this.siteAPI.initFacebookRemarketing();this.siteAPI.initGoogleRemarketing();this.siteAPI.initYandexMetrika();this.siteAPI.setBiMarker("renderEnd");this.registerAspectToEvent("siteReady",function(){this.siteAPI.reportBeatFinish(this.props.siteData.getCurrentUrlPageId());t.send(this.siteAPI.getSiteData());da(this.props.siteData)}.bind(this));this.registerAspectToEvent("resize",X.call(this));Y.call(this);Z.call(this);this.updateTitleAndMetaTags();this.refs.theme.registerStylesReadyCallback(this.reLayout);this.siteAPI.reportBeatEvent(8,this.props.siteData.getPrimaryPageId());this.reLayoutPending=false;this.pendingReLayoutCompsMap={};this.refs.theme.initWaitForStylesReady();if(y.isOpen("fontsTrackingInViewer")){var a=this.props.siteData.getCurrentUrlPageId();var b=this.props.siteData.getExistingRootNavigationInfo(a);if(ia(this.siteAPI,b)){t.trackFontsIfNeeded(this.props.siteData,a)}}},componentDidUpdate:function(){this.prevActiveModes=k.objectUtils.cloneDeep(this.props.siteData.activeModes);if(this.tempMeasureMap&&!this.props.siteData.measureMap){this.props.siteData.measureMap=this.tempMeasureMap;delete this.deletedMeasureMap;delete this.tempMeasureMap}if(this.isChangingUrlPage){this.siteAPI.setBiMarker("renderEnd");var a=this.props.siteData.getCurrentUrlPageId();this.siteAPI.reportBeatFinish(a);if(!this.props.siteData.isUsingUrlFormat(k.siteConstants.URL_FORMATS.SLASH)){this.siteAPI.reportPageEvent(this.props.siteData.currentUrl.full)}this.siteAPI.fireGoogleRemarketing();this.siteAPI.reportYandexPageHit(this.props.siteData.currentUrl.full);if(y.isOpen("fontsTrackingInViewer")){t.trackFontsIfNeeded(this.props.siteData,a)}}this.reLayoutPending=false;this.pendingReLayoutCompsMap={};this.refs.theme.initWaitForStylesReady();k.performance.finish("reRender")},updateTitleAndMetaTags:function(){if(this.props.updateHeadMethod){this.props.updateHeadMethod(this.props.siteData,this.props.rootId)}},componentWillUnmount:function(){this.dead=true;this.siteAPI.onSiteUnmount()}})});define("core/siteRender/WixSiteHeadRenderer",["lodash","experiment"],function(a,b){"use strict";function c(){this.blankFavicons=null}function d(b){return a.includes(b.rendererModel.premiumFeatures,"AdsFree")}function e(a,b){return f(a.getDynamicPageSEOMetaData(b))}function f(b){var c=[];a.forEach(b,function(b,d){if(a.startsWith(d,"og:")){c.push('<meta property="'+d+'" content="'+b+'">')}else{c.push('<meta name="'+d+'" content="'+b+'">')}});return c}function g(a,b){b=a.getCurrentUrlPageId()||b;if(!b||b==="masterPage"){b=a.getMainPageId()}return b}c.prototype={getFavicons:function(a){if(a.isPremiumUser&&a.isPremiumUser()&&d(a)){return this._getPremiumUserFavicon(a)}return this._getDefaultWixFavicon()},createBlankFavicons:function(){if(this.blankFavicons===null){this.blankFavicons=this._createEmptyFaviconElements()}return this.blankFavicons},getPageMetaTags:function(a,c){c=g(a,c);if(b.isOpen("sv_dpages")&&a.isDynamicPage(c)){return e(a,c)}return this._getMetaTagsForPage(a,c)},getPageJsonldTag:function(b,c){var d=b.getPageJsonld(c);if(a.size(d)===0){return""}return['<script type="application/ld+json">',JSON.stringify(d),"</script>"].join("")},_getPremiumUserFavicon:function(a){var b=a.getFavicon();if(b){var c=this._getFaviconMimeType(b);b=a.getMediaFullStaticUrl(b);return this._createFaviconLinkElements(b,c)}return this._createEmptyFaviconElements()},_getDefaultWixFavicon:function(){var a="http://www.wix.com/favicon.ico";var b=this._getFaviconMimeType(a);return this._createFaviconLinkElements(a,b)},_createEmptyFaviconElements:function(){return this._createFaviconLinkElements(null,null)},_createFaviconLinkElements:function(a,b){var c=[];if(a&&b){c.push({rel:"shortcut icon",href:a,type:b});c.push({rel:"apple-touch-icon",href:a,type:b})}return c},_getStaticMediaUrl:function(a){return a.serviceTopology.mediaRootUrl},_getFaviconMimeType:function(a){var b=null;if(a){if(this._isExtension(a,"png")){b="image/png"}else if(this._isExtension(a,"gif")){b="image/gif"}else if(this._isExtension(a,"ico")||this._isExtension(a,"icon")){b="image/x-icon"}else if(this._isExtension(a,"jpg")){b="image/jpg"}}return b},_isExtension:function(a,b){return this._getExtension(a).toLowerCase()===b},_getExtension:function(a){if(a){var b=a.lastIndexOf(".");if(b>=0){return a.substr(b+1)}}return""},_getMetaTagsForPage:function(c,d){var e=c.getPageSEOMetaData(d);var f=[this._getDescriptionSEOMetaTag,this._getKeywordsSEOMetaTag,this._getOgMetaTag];if(b.isOpen("sv_addRobotsIndexingMetaTag")){if(a.get(c,"publicModel.indexable")){f.push(this._getRobotsIndexMetaTag)}}return a.flatMap(f,function(a){return a(e)})},_getRobotsIndexMetaTag:function(a){if(a&&a.robotIndex){return'<meta name="robots" content="'+a.robotIndex+'">'}},_getDescriptionSEOMetaTag:function(a){if(a&&a.description){return['<meta name="description" content="'+a.description+'">']}},getGoogleTagManagerScript:function(){var a="(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MDD5C4');";return"<script async>"+a+"</script>"},_getKeywordsSEOMetaTag:function(a){if(a&&a.keywords){return['<meta name="keywords" content="'+a.keywords+'">']}},_getOgMetaTag:function(b){return a.map(a.get(b,"ogTags"),function(a){return'<meta property="'+a.property+'" content="'+a.content+'">'})}};return new c});define("core/core/site",["react","lodash","zepto","utils","core/siteRender/WixSiteReact","core/siteRender/WixSiteHeadRenderer","core/core/siteBI","core/bi/events","experiment"],function(a,b,c,d,e,f,g,h,i){"use strict";var j=d.urlUtils;var k=a.createFactory(e);var l={PAGE_LOADED_FIRST_RENDER:"page_loaded_first_render",PAGE_LOADED:"page_loaded"};var m={};var n={pageId:d.errorPages.IDS.INTERNAL_ERROR};var o=0;function p(a,c,d){if(typeof window!=="undefined"&&b.get(window,"history.pushState")&&d){try{window.history.pushState(null,c,a)}catch(a){}}}function q(a,c,e){var f=a.getExternalBaseUrl()+c;var g=d.wixUrlParser.parseUrl(a,f);var h=d.wixUrlParser.getUrl(a,g);K(h,g.title,a);if(g.routerDefinition){t(a,g,function(a){e(b.assign(g,a))})}else{g.isStaticPageRedirect=true;e(g)}}function r(a,b,c){var d=!!a.documentServicesModel;var e=a.renderFlags.componentViewMode==="editor";if(d&&e){return}var f=b.redirectUrl;if(j.isExternalUrl(f)){if(d){window.open(f,"_blank");return}window.location=f}else if(j.isRelativeUrl(f)&&o<4){o++;q(a,f,c)}else{c(n)}}function s(a,c,d,e){a.addDynamicPageData(c.pageId,c.pageData,d);a.addDynamicPageHeadData(c.pageId,c.pageHeadData);e({pageId:c.pageId,title:b.get(c.pageHeadData,"title","")})}function t(a,b,c){var e=b.routerDefinition;var f=d.routersBackEndRequests.makeParamObjFromSiteData(a,e,b.innerRoute);d.routersBackEndRequests.getPage(f,function(b){if(b.redirectUrl){r(a,b,c)}else{s(a,b,e,c)}},function(){})}function u(a,c,d){if(typeof window!=="undefined"&&b.get(window,"history.replaceState")&&d){try{window.history.replaceState(null,c,a)}catch(a){}}}function v(a,b){m[a]=m[a]||[];m[a].push(b)}function w(a,c){b.forEach(m[a],function(a){a.apply(null,c)})}function x(a,b,c,e){var f=a.isPopupPage(e.pageId);var g=a.isUsingUrlFormat(d.siteConstants.URL_FORMATS.SLASH);return!f&&c!==b&&g}function y(a){if(typeof window!=="undefined"&&window.performance&&performance.getEntriesByType){try{var c=/(skins|require)\.min\.js$/;var e=b(performance.getEntriesByType("resource")).toArray().filter(function(a){return c.test(a.name)}).map(function(a){var b=a.name.match(c);var d=a.responseEnd-(a.responseStart||a.startTime);var e={Name:b[1],DnsTime:Math.round(a.domainLookupEnd-a.domainLookupStart),ConnectTime:Math.round(a.connectEnd-a.connectStart),Ttfb:Math.round(a.duration-d),ResponseTime:Math.round(d)};var f=a.transferSize||a.encodedBodySize;if(f&&a.duration){e.Kbps=Math.round(f/a.duration)}return e}).map(function(a){var c=b.includes(a.Name,"require")?"small":"large";return b.mapKeys(a,function(a,b){return c+b})}).reduce(function(a,c){return b.assign(a,c)},{});d.logger.reportBI(a,h.CDN_PERFORMANCE,e)}catch(a){}}}function z(a,b,c,d,e,f,g){var h=a.props.siteData;var i=a.siteAPI;if(h.getCurrentUrlPageId()!==d.pageId){i.reportBeatStart(d.pageId)}if(h.getPrimaryPageId()!==d.pageId&&d.anchorData||d.anchorData&&h.getCurrentUrlPageId()===d.pageId&&d.routerDefinition){var k=i.getSiteAspect("actionsAspect");k.registerNextAnchorScroll(d.anchorData)}var m=true;var n=h.currentUrl.full;var o=function(){w(l.PAGE_LOADED,[i,d]);if(m){m=false;if(c.indexOf("#")===0){h.currentUrl.hash=c}else{h.currentUrl=j.parseUrl(c)}if(x(h,n,c,d)){i.reportCurrentPageEvent(c)}h.setRootNavigationInfo(d,!f);a.setState({currentUrlPageId:h.getCurrentUrlPageId(),currentPopupId:h.getCurrentPopupId()});if(h.isViewerMode()){if(g){u(c,d.title,g)}else{p(c,d.title,e)}}D(h,d.pageId)}else{a.forceUpdate()}};b.loadPage(d,o);return true}function A(a,c,d){var e="wixSiteProperties";if(i.isOpen("mobileNonOptimizedOverflow")){e+=" mobile-non-optimized-overflow"}return k(b.assign({},d,{className:a.rendererModel.siteInfo.documentType==="WixSite"?e:"noop",siteData:a,viewerPrivateServices:c,rootId:"masterPage",navigateMethod:z,updateUrlIfNeededMethod:L,getDynamicPageRealPage:t,updateHeadMethod:C,getSiteContainer:B}))}function B(){return window}function C(a,b){D(a,b);if(a.rendererModel.siteInfo.documentType==="WixSite"){c(I()).append(f.getGoogleTagManagerScript())}}function D(a,b){J(a);G(a);F(a,b);E(a,b)}function E(a,b){c('script[type="application/ld+json"]').remove();var d=f.getPageJsonldTag(a,b);if(d){c(I()).append(d)}}function F(a,b){var c=f.getPageMetaTags(a,b);H(c)}function G(a){var d=I();var e=["[name=description]","[name=keywords]",'[property="og:title"]','[property="og:description"]','[property="og:url"]','[property="og:image"]'];if(i.isOpen("sv_addRobotsIndexingMetaTag")&&b.get(a,"publicModel.indexable")){e.push("[name=robots]")}if(i.isOpen("sv_dpages")){var f=a.getCurrDynamicPageMetaTags();b.forEach(f,function(a,b){e.push('[name="'+b+'"]')});a.resetCurrDynamicPageMetaTags()}e.forEach(function(a){c(a,d).remove()})}function H(a){b.forEach(a,function(a){this.append(a)}.bind(c(I())))}function I(){return window.document.head}function J(a){window.document.title=a.getCurrentUrlPageTitle()}function K(a,b,c){u(a,b,true);c.currentUrl=j.parseUrl(a)}function L(a,b){if(i.isOpen("sv_dpages")&&d.errorPages.isErrorPage(b.pageId)){return}var c=d.wixUrlParser.getUrl(a,b);if(!b.routerDefinition&&a.isViewerMode()&&c!==a.currentUrl.full){K(c,b.title,a)}}function M(a,b,c,e){function f(f){a.setRootNavigationInfo(f);d.logger.reportBeatEvent(a,6,f.pageId);y(a);g.init(a);var h=function(){w(l.PAGE_LOADED_FIRST_RENDER,[a,c.wixCodeAppApi]);var g=d.wixUrlParser.parseUrl(a,a.currentUrl.full);if(g.pageId!==f.pageId){g.pageId=f.pageId;g.title=f.title}if(i.isOpen("sv_dpages")&&d.errorPages.isErrorPage(g.pageId)){d.errorPages.updateErrorPageMasterData(a,g.pageId)}a.setRootNavigationInfo(g);d.mobileViewportFixer.fixViewportTag(a);L(a,g);e(A(a,b,c))};b.siteDataAPI.loadPage(f,h)}var h=d.wixUrlParser.parseUrl(a,a.currentUrl.full);if(i.isOpen("sv_dpages")&&h.routerDefinition){o=0;t(a,h,function(a){f(a)});return}f(h);return a}return{renderSite:M,WixSiteReact:e,hooks:{types:l,registerHook:v}}});define("core/siteRender/compRegistrar",["santaProps","compUtils"],function(a,b){"use strict";return{register:function(c,d,e){b.compFactory.register(c,d,e);a.propsSelectorsFactory.registerComponent(c,d);return this}}});define("core/core/pageRequests",["lodash","coreUtils","loggingUtils","dataFixer","siteUtils","experiment"],function(a,b,c,d,e,f){"use strict";var g="masterPage";function h(b,c){return a.some(b.failedRequests,function(b){var d=b.destination;return a.size(d)===2&&d[0]==="pagesData"&&d[1]===c})}function i(a,b){c.logger.reportBI(a,c.bi.errors.ALL_PAGE_RETRIEVAL_ATTEMPTS_FAILED,{pageId:b})}function j(a,b){var c=e.pagesUrlUtils.getMasterPageURLs(b);return p(a,c,g,b)}function k(b,c){return function(e){return d.fix(e,a.map(c.pages,"pageId"),b.requestModel,b.currentUrl,b.urlFormatModel,b.isViewerMode(),b.rendererModel.clientSpecMap)}}function l(a,b,c){if(a.currentUrl&&a.currentUrl.query.fakePage){var d=a.currentUrl.query.fakePage;return{urls:[a.santaBase+"/static/fakePages/"+d+".json"],destination:["pagesData",c],transformFunc:k(a,b)}}var f=e.pagesUrlUtils.getPageURLs(b,c);if(!f){c=b.mainPageId;f=e.pagesUrlUtils.getPageURLs(b,b.mainPageId)}return p(a,f,c,b)}var m=typeof document!=="undefined"&&window.document.location.protocol==="https:";var n=/http:\/\/[a-z]+\.[a-z]+\.com\//;var o="//static.wixstatic.com/";function p(d,e,g,h){if(m){e[0]=e[0].replace(n,o)}var i={urls:e,destination:["pagesData",g],isValidResponse:function(b){return a.isObject(b)},transformFunc:k(d,h),error:function(){d.failedRequests.push(this)},onUrlRequestFailure:function(a,e){var f=b.urlUtils.parseUrl(a);c.logger.reportBI(d,c.bi.errors.SINGLE_PAGE_RETRIEVAL_ATTEMPT_FAILED,{pageId:g,hostname:f.hostname,url:a,responseStatusCode:e})}};if(f.isOpen("pageRequestTimeout")){a.merge(i,{maxTimeouts:1,requestTimeout:2e3,ontimeout:function(){c.logger.reportBeatEvent(d,"reset",g)}})}return i}function q(c,d,e){if(!c.publicModel){return[]}var k=[];var m=c.publicModel.pageList;if(h(c,g)){i(c,g)}else if(!d.pagesData[g]){k.push(j(c,m))}var n=a.isArray(e)?e:[e];a.forEach(n,function(a){if(a.pageId){if(f.isOpen("sv_dpages")&&b.errorPages.isErrorPage(a.pageId)){k.push(p(c,b.errorPages.getJSONS(c,a.pageId),a.pageId,m))}else if(h(c,a.pageId)){i(c,a.pageId)}else if(s(c,a)){k.push(p(c,a.jsonUrls,a.pageId,m))}else if(!r(c,a)&&!d.pagesData[a.pageId]){k.push(l(c,m,a.pageId))}}});return k}function r(b,c){var d=a.get(b,"rendererModel.passwordProtectedPages",[]);return a.includes(d,c.pageId)}function s(b,c){var d=a.find(b.publicModel.pageList.pages,{pageId:c.pageId});return!a.isEmpty(c.jsonUrls)&&a.isEmpty(a.get(d,"urls"))}return q});define("core/core/dataRequirementsChecker",["utils","lodash","core/core/pageRequests"],function(a,b,c){"use strict";var d=a.dataUtils;var e="masterPage";var f={};var g={};var h={};var i={};function j(a,c,d){var e=d.styleId&&a.getDataByQuery(d.styleId,c,a.dataTypes.THEME);var f=e?e.skin:d.skin;var g=[f];if(d.modes){return g.concat(b(d.modes.overrides).flatMap(b.partial(j,a,c)).compact().value())}return g}function k(a,b,c){return{data:c.dataQuery?a.getDataByQuery(c.dataQuery,b):null,properties:c.propertyQuery?a.getDataByQuery(c.propertyQuery,b,a.dataTypes.PROPERTIES):null,skins:j(a,b,c),id:c.id,pageId:b}}function l(a,c,e,h){var j=k(a,e,h);var m=b.has(g,h.componentType);if(m){i[h.componentType]=i[h.componentType]||[];i[h.componentType].push(j)}var n=f[h.componentType];var o=n?n(a,j,c):[];var p=d.getChildrenData(h,a.isMobileView());return b.reduce(p,function(b,d){return b.concat(l(a,c,e,d))},o)}function m(a,b,c){if(!c.pageItemId){return[]}var d=b.pagesData[e];var g=d.data.document_data[c.pageItemId];if(!g||g.type!=="PermaLink"){return[]}var h=d.data.document_data[g.dataItemRef.replace(/^#/,"")];if(!h){return[]}var i=d.data.component_properties[g.dataItemRef.replace(/^#/,"")];var j=f["Zoom:"+h.type];if(j){var k={data:h,properties:i};return j(a,k,c)}return[]}function n(a,c){return b.flatMap(i,function(b,d){var e=g[d];return e(a,b,c)})}function o(a,c){return b(h).map(function(b,d){var e=a.getClientSpecMapEntryByAppDefinitionId(d);if(e){return b(a,e,c)}}).compact().flatten().value()}function p(a,c,d){var f=b.isArray(d)?d:[d];i={};var g=l(a,f[0],e,c.pagesData[e].structure);b.forEach(f,function(b){g=g.concat(l(a,b,b.pageId,c.pagesData[b.pageId].structure),m(a,c,b),n(a,b),o(a,b))});return g}function q(a,c){return b.every(a,function(a){return!b.isEmpty(c.pagesData[a.pageId])})}return{getNeededRequests:function(a,b,d){a.santaBase=a.santaBase||a.serviceTopology.scriptsLocationMap.santa;var e=[d];if(a.isPopupPage(d.pageId)){e.push(a.getExistingRootNavigationInfo(a.getPrimaryPageId()))}if(q(e,b)){return p(a,b,e)}return c(a,b,e)},registerCheckerForCompType:function(a,b){f[a]=b},registerCheckerForAllCompsOfType:function(a,b){g[a]=b},registerCheckerForAppDefId:function(a,b){h[a]=b}}});define("core/core/Touchy",["lodash"],function(a){"use strict";var b={touched:false,moved:false,deltaCoords:{x:0,y:0},evObj:{}};var c=["onSwipeLeft","onSwipeRight","onSwipeUp","onSwipeDown","onTap"];var d={left:"onSwipeLeft",right:"onSwipeRight",up:"onSwipeUp",down:"onSwipeDown"};function e(a){if(a.touches&&a.touches.length){var b=a.touches[0];return{x:b.pageX,y:b.pageY}}}function f(){this.data={}}f.prototype={onTouchStart:function(c){this.data=a.defaults({touched:true,numOfTouches:c.touches.length,startCoords:e(c),startTime:Date.now(),evObj:a.clone(c)},b)},onTouchMove:function(a){var b=e(a);if(b){if(!this.data.startCoords){this.data.startCoords=b}var c=this.data.startCoords.x-b.x;var d=this.data.startCoords.y-b.y;this.data.moved=true;this.data.deltaCoords={x:c,y:d}}},onTouchEnd:function(b){var c,e;this.data.endTime=Date.now();if(a.isEmpty(b)){return}if(this.isValidSwipe()){c=this.getSwipeDirection(this.data.deltaCoords.x,this.data.deltaCoords.y);e=d[c];if(b[e]){b[e](this.data.evObj)}}else if(this.isValidTap()){if(b.onTap){b.onTap(this.data.evObj)}}},registerTouchEvents:function(b){var d=a.pick(b,c);if(!a.isEmpty(d)){b.onTouchStart=this.onTouchStart.bind(this);b.onTouchMove=this.onTouchMove.bind(this);b.onTouchEnd=this.onTouchEnd.bind(this,d)}},isValidSwipe:function(){return this.data.moved&&this.data.numOfTouches===1&&this.data.endTime-this.data.startTime<500&&(Math.abs(this.data.deltaCoords.x)>100||Math.abs(this.data.deltaCoords.y)>60)},isValidTap:function(){return this.data.touched&&!this.data.moved&&this.data.numOfTouches===1},getSwipeDirection:function(a,b){var c;if(Math.abs(a)>Math.abs(b)){c=a>0?"left":"right"}else{c=b>0?"up":"down"}return c}};return f});define("core/components/fixedPositionRenderPlugin",["lodash"],function(a){"use strict";return function(b,c,d,e){if(b[""]){var f=b[""].style;if(f&&a.get(d,"layout.fixedPosition")){var g=e.renderFlags.renderFixedPositionContainers?50:49;f.zIndex=Math.max(f.zIndex||0,g)}}}});define("core/components/skinBasedComp",["lodash","santaProps","skins","react","utils","compUtils","core/components/baseCompMixin","core/core/Touchy","core/components/fixedPositionRenderPlugin","experiment"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b.Types;var l=b.propsSelectorsFactory;var m=c.skinsRenderer;var n=c.skins;m.registerRenderPlugin(i);function o(){var b;if(a.isFunction(this.getTransformedCssStates)){var c=this.getTransformedCssStates();b=c!==undefined?c:this.state}else{b=this.state}if(!b){return{}}var d={};var e=[];a.forOwn(b,function(a,b){if(b.lastIndexOf("$",0)===0){e.push(a)}});if(a.isEmpty(e)&&b.hasOwnProperty("cssState")){e=a.values(b.cssState)}if(!a.isEmpty(e)){d["data-state"]=e.join(" ")}return d}function p(a){var b=a.props.skin;var c=n[b];if(!c&&a.getDefaultSkinName){b=a.getDefaultSkinName();c=n[b]}return c}function q(b){a(b).filter(function(b){return a.has(b,"onClick")}).forEach(function(b){b.style=a.assign(b.style||{},{cursor:"pointer"})})}function r(b){if(this.props.structure&&this.props.structure.modes){var c=a.find(this.props.structure.modes.definitions,{type:e.siteConstants.COMP_MODES_TYPES.HOVER});if(c){var d=this.props.structure.id;b[""].onMouseEnter=x(this.props.activateModeById,d,this.props.rootId,c.modeId);b[""].onMouseLeave=y(this.props.deactivateModeById,d,this.props.rootId,c.modeId)}}}function s(b,c){var d=a.get(b,"modes.definitions");return a.filter(d,{type:c})}function t(a){return s(a,"SCROLL")}function u(b){return a.sortBy(s(b,"WIDTH"),"params.width")}function v(){var a=t(this.props.structure);if(a.length){this.props.windowScrollEventAspect.registerCompScrollModes(this.props.id,this.props.rootId,a)}}function w(){var b=this.props.structure;var c=u(b);if(!c.length){return}var d=b.id;var e=b.layout.width;var f=this.props.rootId;var g=a.findLast(c,function(a){return a.params.width<=e});this.props.activateModeById(d,f,g.modeId)}function x(a,b,c,d){return function(){if(this.props.isMobileView){return}return a(b,c,d)}}function y(a,b,c,d){return function(){if(this.props.isMobileView){return}return a(b,c,d)}}function z(b,c){return a.get(this.props.compTheme,["style","properties",b],c)}function A(){var a=this.getComponentPreviewState();if(a){return{"data-preview":a}}}function B(b){var c=this.getSkinProperties();if(a.isFunction(this.transformRefDataTemp)){this.transformRefDataTemp(c)}else if(a.isFunction(this.transformRefData)){this.transformRefData(c)}if(this.props.transformSkinProperties){c=this.props.transformSkinProperties(c)}if(!c[""]){c[""]={}}if(this.props.isMobileDevice){q(c)}r.call(this,c);if(j.isOpen("scrollModes")){v.call(this)}if(j.isOpen("widthModes")){w.call(this)}this.updateRootRefDataStyles(c[""]);a.assign(c[""],o.call(this),A.call(this));if(!b.react||b.react.length===0){c[""]=a.defaults(c[""],c.inlineContent)}return c}function C(a,c){var d=l.getPropTypesForChildComponent(a);return b.santaTypesUtils.resolveComponentProps(d,c)}function D(b,c,d,e){e=e||{};var f=this.getSkinExports();var g=typeof d==="string"?{skin:f[d].skin,styleId:this.props.styleId+d}:d;var h={siteData:this.props.siteData,siteAPI:this.props.siteAPI,compProp:a.omit(this.props.compProp,"isHidden"),loadedStyles:this.props.loadedStyles,compData:b,refInParent:a.get(b,"id",""),skin:g.skin,styleId:g.styleId,pageId:this.props.pageId,rootId:this.props.rootId,rootNavigationInfo:this.props.rootNavigationInfo,currentUrlPageId:this.props.currentUrlPageId};if(!b&&!e.id){throw new Error("Unable to set child comp id - no data item\\custom id were passed")}h.id=e.id||this.props.id+b.id;if(!b&&!e.ref){throw new Error("Unable to set child comp ref - no data item\\custom ref were passed")}h.ref=e.ref||b.id;h.compDesign=this.props.compDesign;h.structure=a.assign({componentType:c,styleId:this.props.structure?this.props.structure.styleId:"",skinPart:e.skinPart||h.ref},e.structure);var i=C(c,h);h=a.merge(i,h,a.omit(e,"structure"));return a.omitBy(h,a.isUndefined)}function E(c,d,e,f){f=f||{};var g=this.getSkinExports();var h=typeof e==="string"?{skin:g[e].skin,styleId:this.props.styleId+e}:e;var i={rootId:this.props.rootId,rootNavigationInfo:this.props.rootNavigationInfo,compProp:a.omit(this.props.compProp,"isHidden"),compData:c,refInParent:a.get(c,"id",""),skin:h.skin,styleId:h.styleId};if(!c&&!f.id){throw new Error("Unable to set child comp id - no data item\\custom id were passed")}i.id=f.id||this.props.id+c.id;if(!c&&!f.ref){throw new Error("Unable to set child comp ref - no data item\\custom ref were passed")}i.ref=f.ref||c.id;i.structure=a.assign({componentType:d,styleId:this.props.structure?this.props.structure.styleId:"",skinPart:f.skinPart||i.ref},f.structure);var j={};if(b.propsSelectorsFactory.isSantaTypedComponentReactElement(this)){var k=l.getPropTypesForChildComponent(d);j=a.pick(this.props,a.keys(k))}else{j=C(d,a.assign(a.pick(this.props,["siteAPI","siteData","loadedStyles"]),i))}return a.assign(j,i,a.omit(f,"structure"))}var F={mixins:[g.baseComp],propTypes:{isTouchDevice:k.Device.isTouchDevice,isMobileView:k.isMobileView,isMobileDevice:k.Device.isMobileDevice,isDebugMode:k.isDebugMode,structure:k.Component.structure,id:k.Component.id,key:k.Component.key,ref:k.Component.ref,refInParent:k.Component.refInParent,rootId:k.Component.rootId,rootNavigationInfo:k.Component.rootNavigationInfo,currentUrlPageId:k.Component.currentUrlPageId,styleId:k.Component.styleId,skin:k.Component.skin,style:k.Component.style,compProp:k.Component.compProp,compData:k.Component.compData,compActions:k.Component.compActions,compTheme:k.Component.theme,renderFlags:k.renderFlags,getActiveModes:k.Modes.getActiveModes,activateModeById:k.Modes.activateModeById,deactivateModeById:k.Modes.deactivateModeById,switchModesByIds:k.Modes.switchModesByIds,windowScrollEventAspect:k.SiteAspects.windowScrollEvent.isRequired,loadedStyles:k.Component.loadedStyles,transformSkinProperties:d.PropTypes.func},renderHelper:function(){var b=p(this);if(!b){var c=this.props.structure&&this.props.structure.componentType||"";e.log.error("Skin ["+this.props.skin+"] not found for comp ["+c+"]");return d.DOM.div()}var f=B.call(this,b);if(this.props.isTouchDevice){var g=new h;a.forEach(f,function(a){g.registerTouchEvents(a)})}return m.renderSkinHTML.call(this,b.react,f,this.props.styleId,this.props.id,this.props.structure,this.props,this.state)},getComponentPreviewState:function(){return a.get(this,["props","renderFlags","componentPreviewStates",this.props.id])},render:function(){try{return this.renderHelper()}catch(b){if(this.props.isDebugMode){throw b}e.log.error("Cannot render component",this.constructor.displayName,this.props.id,b);var a={"":{style:this.props.style,"data-dead-comp":true}};return m.renderSkinHTML.call(this,n["skins.viewer.deadcomp.DeadCompPublicSkin"].react,a,"deadComp",this.props.id,this.props.structure,this.props,this.state)}},getSkinExports:function(){var a=p(this);return a&&a.exports},classSet:function(b){return e.classNames(a.reduce(b,function(a,b,c){a[this.styleId+"_"+c]=b;return a}.bind(this.props),{}))},componentWillUpdate:function(){if(this.props.onComponentWillUpdate){this.props.onComponentWillUpdate()}},componentWillUnmount:function(){this.props.windowScrollEventAspect.clearCompScrollModes(this.props.id)},getStyleProperty:z,createChildComponent:function a(c,d,e,g){var h=f.compFactory.getCompClass(d);if(!h){return null}if(b.propsSelectorsFactory.isSantaTypedComponentByName(d)){return h(E.call(this,c,d,e,g))}return h(D.call(this,c,d,e,g))}};return F});define("core/components/inputFocusMixin",["lodash"],function(a){"use strict";return{INPUT_FOCUS_BEHAVIORS:{focus:{methodName:"requestFocus"},blur:{methodName:"requestBlur"}},requestFocus:function(){this.shouldApplyFocus=true},requestBlur:function(){this.shouldApplyBlur=true},componentDidUpdate:function(){if(this.shouldApplyFocus){if(a.isFunction(this.focus)){this.focus()}this.shouldApplyFocus=false}if(this.shouldApplyBlur){if(a.isFunction(this.blur)){this.blur()}this.shouldApplyBlur=false}}}});define("core/components/runTimeCompData",["lodash","santaProps","utils"],function(a,b){"use strict";return{propTypes:{setRuntimeCompData:b.Types.DAL.setCompData.isRequired,setRuntimeCompProps:b.Types.DAL.setCompProps.isRequired},updateData:function(a){this.props.setRuntimeCompData(this.props.id,a)},updateProps:function(a){this.props.setRuntimeCompProps(this.props.id,a)}}});define("core/components/blockOuterScrollMixin",[],function(){"use strict";var a=function(a){var b=a.currentTarget;var c=a.currentTarget.scrollHeight;var d=c-a.currentTarget.offsetHeight;var e=a.deltaY%3?a.deltaY:a.deltaY*10;if(b.scrollTop+e<=0){b.scrollTop=0;a.preventDefault()}else if(b.scrollTop+e>=d){b.scrollTop=d;a.preventDefault()}a.stopPropagation()};return{blockOuterScroll:a}});define("core/components/optionInput",["lodash","core/components/skinBasedComp"],function(a,b){"use strict";var c="toolTip";return{mixins:[b],getInitialState:function(){return this.getCssState(this.props)},componentWillReceiveProps:function(a){this.setState(this.getCssState(a))},getCssState:function(a){return{$enabledState:a.compData.disabled?"disabled":"enabled",$selectState:a.selected?"selected":"unselected"}},onMouseEnter:function(){this.refs[c].showToolTip({},{source:this})},onMouseLeave:function(){this.refs[c].closeToolTip()},createInfoTipChildComponent:function(){return this.createChildComponent({content:this.props.compData.description,id:c},"wysiwyg.common.components.InfoTip",{skin:"wixapps.integration.skins.ecommerce.options.InfoTipSkin",styleId:this.props.loadedStyles["wixapps.integration.skins.ecommerce.options.InfoTipSkin"]},{ref:c,className:this.props.styleId+"tooltip"})}}});define("core/components/skinInfo",["lodash","skins","santaProps"],function(a,b,c){"use strict";return{propTypes:{skin:c.Types.Component.skin,structure:c.Types.Component.structure,theme:c.Types.Component.theme,allTheme:c.Types.Theme.all,themeColor:c.Types.Theme.colors},getParams:function(b,c){var d={};a.forEach(b,function(a){d[a]=this.getParamFromDefaultSkin(a,c)}.bind(this));return d},getParamFromDefaultSkin:function(a,b){return this.getParamFromSkin(a,b||this.props.skin)},getParamFromSkin:function(c,d){var e=a.get(this.props.theme,"style.properties")||{};var f=b.skins[d];var g=e[c]||f.paramsDefaults&&f.paramsDefaults[c];if(a.isArray(g)&&g.length>1){e=a.clone(e);e[c]=this.getSumParamValue(c,d)}return b.params.renderParam(c,f,e,this.props.themeColor)},getSumParamValue:function(c,d){var e=this.getSkinExports();var f=b.skins[d].paramsDefaults;var g=f&&f[c];if(!g){var h=e[c];return h?Math.abs(parseInt(h,10))||0:0}if(Array.isArray(g)){return a.sumBy(g,function(a){return Math.abs(parseInt(this.getParamFromSkin(a,d).value,10))}.bind(this))}return Math.abs(parseInt(g,10))||0},getFromExports:function(a){var b=this.getSkinExports();return b&&b[a]||0},getStyleData:function(b,c){c=c||this.props;var d=b||c.structure.styleId;if(d){d=d.replace("#","")}var e=c.allTheme[d];return a.get(e,"style.properties")||{}}}});define("core/core/data/pointers/pointerGeneratorsRegistry",[],function(){"use strict";var a={};var b={};var c={};var d={};return{registerDataAccessPointersGenerator:function(d,e,f){if(f){b[d]=e}else{a[d]=e}c[d]=e},registerPointerType:function(a,b,c,e,f){d[a]={findItemFunction:b,identityCheckFunction:c,isUsingDifferentNameSpaceForFull:e,isExistInFullJson:f}},getRegularJsonGenerators:function(){return a},getBothRegularAndFullJsonGenerators:function(){return b},getAllTypes:function(){return d}}});define("core/core/data/pointers/DataAccessPointers",["lodash","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b){"use strict";function c(c,d,e){var f=b.getRegularJsonGenerators();a.forEach(f,function(b,f){c[f]=a.mapValues(b,function(a){return a.bind(b,d.getItemInPath,e)})})}function d(c,d){var e=b.getBothRegularAndFullJsonGenerators();a.forEach(e,function(b,e){c[e]=a.mapValues(b,function(a){return d(a,false,b)});c.full[e]=a.mapValues(b,function(a){return d(a,true,b)})})}function e(b){this.full={};var e=b.getBoundCacheInstance(false);var f=b.getBoundCacheInstance(true);var g=function(c,d,g){return function(){var h=a.toArray(arguments);var i=[b.getItemInPath,e].concat(h);var j=[b.fullJsonGetItemInPath,f].concat(h);var k=c.apply(g,i);var l=c.apply(g,j);return d?l:k}};c(this,b,e);d(this,g)}function f(a){if(a){e.call(this,a)}}function g(a){if(a){return{type:a.type,id:a.id}}}f.prototype={getGeneralTheme:function(){},getInnerPointer:function(b,c){var d=g(b);if(d){var e=a.isString(c)?c.split("."):c;d.innerPath=b.innerPath?b.innerPath.concat(e):e}return d},isSamePointer:function(a,b){return a&&b&&a.type===b.type&&a.id===b.id},getInnerPointerPathRoot:function(a){return a.innerPath?a.innerPath[0]:null},getOriginalPointerFromInner:g,getPointerType:function(b){switch(b.type){case"DESKTOP":case"MOBILE":return a.isEmpty(b.innerPath)?"component":"componentStructure";default:return b.type}}};return f});define("core/core/data/pathValidationUtil",["lodash"],function(a){"use strict";function b(b,c,e){if(!a.isArray(b)){throw new Error("path type is not an array - "+b)}if(!d(c,b,e)){throw new Error("path does not exist - "+b)}return true}function c(b,c,d){if(!c){return false}var f=e(b,c,c.length);if(a.isUndefined(f)){return false}return!d||d(f)}function d(b,c,d){if(!c||!a.isArray(c)){return false}var g=c[c.length-1];var h=d?c.length:c.length-1;var i=e(b,c,h);if(a.isUndefined(i)){return false}return d?true:f(g,i)}function e(b,c,d){var e=b;for(var f=0;f<d;f++){e=e[c[f]];if(a.isUndefined(e)){break}}return e}function f(b,c){if(a.isNumber(b)){return a.isArray(c)}if(a.isString(b)){return g(c)}return false}function g(a){return Object.prototype.toString.call(a)==="[object Object]";
}return{validatePath:b,validatePathExist:d,validatePathExistsAndCorrect:c}});define("core/core/data/pointers/pointersCache",["lodash","core/core/data/pathValidationUtil","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b,c){"use strict";var d=0;var e=1;var f=2;function g(b,c){var d=b;a.forEach(c,function(b){if(a.isUndefined(d)){return false}d=d[b]});return d}function h(b,d,e){this.initMyState();this.json=d;this.fullJson=e;this.siteData=b;this.getItemInPath=g.bind(null,d);this.fullJsonGetItemInPath=g.bind(null,e);this.validated={};var f=c.getAllTypes();a.forOwn(f,function(a,b){this.cache[b]={};this.itemFinders[b]=a.findItemFunction;this.identityCheckers[b]=a.identityCheckFunction;this.identityCheckersCache[b]={};if(a.isUsingDifferentNameSpaceForFull){this.fullJsonCache[b]={}}if(a.isExistInFullJson){this.typesExistingInFullJson[b]=true}}.bind(this))}function i(a,c,g,h,i){var j=this.validated[a]||d;if(h){return j||(b.validatePathExist(i,g,false)?e:d)}if(j!==f){var k=this.identityCheckersCache[c.type];var l=k[c.id];if(!l){l=this.identityCheckers[c.type].bind(this,c.id);k[c.id]=l}j=b.validatePathExistsAndCorrect(i,g,l)?f:d}return j}function j(a,b,c,d){var e=null;var f=this.itemFinders[a.type];if(f){e=f(this.siteData.getAllPossiblyRenderedRoots(),d,a);b[a.id]=e||c}return e}function k(a,b){var c=b?"|":",";return a.id+c+a.type}h.prototype={initMyState:function(){this.cache={general:{}};this.fullJsonCache={};this.itemFinders={general:function(){return null}};this.identityCheckers={general:function(){return true}};this.identityCheckersCache={};this.typesExistingInFullJson={}},getBoundCacheInstance:function(a){return{getPath:this.getPath.bind(this,a),getPointer:this.getPointer.bind(this,a),setPath:this.setPath.bind(this,a),resetValidations:this.resetValidations.bind(this)}},setPath:function(a,b,c){if(c){if(a){this.fullJsonCache[b.type][b.id]=c}else{this.cache[b.type][b.id]=c}}},getPath:function(c,e,g){var h=c&&this.fullJsonCache.hasOwnProperty(e.type);var l=h?this.fullJsonCache:this.cache;var m=c&&this.typesExistingInFullJson.hasOwnProperty(e.type);var n=m?this.fullJson:this.json;var o=m?this.fullJsonGetItemInPath:this.getItemInPath;var p=l[e.type];if(!p){return null}var q=p[e.id];var r=g&&a.isEmpty(e.innerPath);var s=k(e,h);var t=i.call(this,s,e,q,r,n);if(t===d){q=r?null:j.call(this,e,p,q,o);t=q?f:this.validated[s]||d}this.validated[s]=t;if(q&&e.innerPath){q=q.concat(e.innerPath);if(!b.validatePathExist(n,q,!g)){return null}}return q},getPointer:function(b,c,e,f,g){var h=b&&this.fullJsonCache[e];var i=h?this.fullJsonCache[e]:this.cache[e];var j={type:e,id:c};if(f){if(!a.isEqual(i[c],f)){this.validated[k(j,h)]=d}i[c]=f}if(!i[c]){return null}if(g){j.component=g}return j},resetValidations:function(){this.validated={}}};return h});define("core/core/data/apiSections/AnchorsDataAPI",["lodash","utils"],function(a,b){"use strict";var c={};function d(c,d,f,g){var h=g===b.constants.VIEW_MODES.MOBILE;var i=b.layoutAnchors.createPageAnchors(d,f,h);var j=e();a.set(c,["anchorsMap",d.id,g],i);a.set(c,["anchorsMap","defaultMasterPage",g],i);a.set(c,["anchorsMap","landingPageMasterPage",g],j)}function e(){return{PAGES_CONTAINER:[{distance:0,locked:true,originalValue:0,fromComp:"PAGES_CONTAINER",targetComponent:"masterPage",type:"BOTTOM_PARENT"}],SITE_PAGES:[{distance:0,locked:true,originalValue:0,fromComp:"SITE_PAGES",targetComponent:"PAGES_CONTAINER",type:"BOTTOM_PARENT"}]}}function f(a){this.privatesKey=a.siteId;c[this.privatesKey]={siteData:a}}f.prototype={createPageAnchors:function(e,f){var g=c[this.privatesKey];var h=g.siteData;var i=h.getPageData(e);if(!i){return}var j=i.structure;var k=h.getAllTheme();var l=f?b.constants.VIEW_MODES.MOBILE:h.getViewMode();var m=l===b.constants.VIEW_MODES.MOBILE;if(j.id===b.siteConstants.MASTER_PAGE_ID){d(h,j,k,l)}else{var n=b.layoutAnchors.createPageAnchors(j,k,m);a.set(h,["anchorsMap",j.id,l],n)}},removePageOriginalValues:function(d,e){var f=c[this.privatesKey];var g=f.siteData;var h=g.getPageData(d).structure;var i=e?b.constants.VIEW_MODES.MOBILE:g.getViewMode();a.set(g,["originalValuesMap",h.id,i],{})},createChildrenAnchors:function(d,e){var f=c[this.privatesKey];var g=f.siteData;var h=g.getViewMode();var i=g.getAllTheme();var j=a.get(g,["pagesData",e,"structure","id"]);var k=b.layoutAnchors.createChildrenAnchors(d,i,g.isMobileView());a.assign(g.anchorsMap[j][h],k)}};return f});define("core/core/data/ViewerDisplayedJsonUpdater",["lodash","utils","core/core/data/apiSections/AnchorsDataAPI"],function(a,b,c){"use strict";function d(a){return a&&a.length>0&&a[0]==="pagesData"}function e(b){return a.isEqual(b,["pagesData"])}function f(a){return this.pointers.getPointerType(a)==="page"}function g(c){return c&&a.includes(b.constants.DATA_TYPES,c.type)}function h(b,c){var f=this.fullCache.getPath(b);if(!f){throw new Error("pointer path does not exist")}if(e(f)){var g=a.get(this.fullJson,f);i.call(this,g,c)}else if(d(f)){k.call(this,b,c)}else{var h=a.get(this.fullJson,f);this.displayedJsonDAL.set(b,h)}}function i(b,c){var d=this.pointers.page.getAllPagesPointer();this.displayedJsonDAL.set(d,{});j.call(this,c,"masterPage");a(b).omit("masterPage").keys().forEach(j.bind(this,c))}function j(a,b){a[b]=a[b]||{};var c=this.pointers.page.getPagePointer(b)||this.pointers.page.getNewPagePointer(b);this.displayedJsonDAL.set(c,{});k.call(this,c,a)}function k(b,c){var e=this.fullCache.getPath(b);if(e&&!this.displayedJsonDAL.isPathExist(a.initial(e))){return}var f=a.take(e,2);var h=a.last(f);var i=a.get(this.fullJson,e);if(d(e)&&!g(b)){var j=i.structure?i.structure:i;c[h]=l.call(this,j,c[h],h);var k=n(i,c,h);m.call(this,b,k,f);if(this.pointers.page.isPointerPageType(b)){this.anchorsAPI.createPageAnchors(h)}}else{this.displayedJsonDAL.set(b,i)}}function l(c,d,e){var f=b.modes.resolveCompActiveModesRecursive(c,d);a.assign(d,f);var g=this.pointers.general.getActiveModes();var h=this.pointers.getInnerPointer(g,e);this.displayedJsonDAL.set(h,d);return d}function m(b,c,d){if(!f.call(this,b)){if(c.structure){this.displayedJsonDAL.set(b,c.structure)}}else if(!a.get(this.displayedJsonDAL.jsonData,d)){this.displayedJsonDAL.set(b,c)}else{var e=a.get(this.displayedJsonDAL.jsonData,d.concat(["structure","mobileComponents"]));if(e&&this.displayedJsonDAL.jsonData.renderFlags.componentViewMode==="editor"){c.structure.mobileComponents=e}this.displayedJsonDAL.merge(b,c)}}function n(a,c,d){return b.siteRenderPrivateStuff.fullToDisplayedJson.getDisplayedJson(a,c,d)}function o(a,b,d,e){if(!b){return}this.fullJson=a;this.displayedJsonDAL=b;this.fullCache=d;this.pointers=e;this.anchorsAPI=new c(b.jsonData)}o.prototype={updateDisplayedJsonByPointer:h,updateDisplayedJsonInPagesDataByPointer:k,updateDisplayedPagesData:i,updateDisplayedRoot:function(a,b){var c=n(b,a,b.structure.id);var d=b.structure.id;var e=this.pointers.page.getPagePointer(d)||this.pointers.page.getNewPagePointer(d);var f=this.fullCache.getPath(e);m.call(this,e,c,f);return c}};return o});define("core/core/data/DisplayedJsonDal",["lodash","utils","core/core/data/pathValidationUtil"],function(a,b,c){"use strict";var d=b.objectUtils.cloneDeep;function e(a,b,d){return c.validatePathExist(a,b,d)}function f(b,c){var d=[].concat(c);var e=d.pop();var f=a.get(b,d);if(a.isString(e)){delete f[e]}else{f.splice(e,1)}}var g=function(a,b){this.pointersCache=b;this.jsonData=a};g.prototype={get:function(a){var b=this.pointersCache.getPath(a);return this.getByPath(b)},getByPath:function(b){if(b){return d(a.get(this.jsonData,b))}return undefined},set:function(a,b){var c=this.pointersCache.getPath(a,true);this.setByPath(c,b)},setByPath:function(b,c){if(!a.isArray(b)){throw new Error("path type is not an array - "+b)}a.set(this.jsonData,b,d(c))},isExist:function(a){var b=this.pointersCache.getPath(a);return!!b},isPathExist:function(a){return e(this.jsonData,a,true)},merge:function(a,b){if(this.isExist(a)){var c=this.pointersCache.getPath(a);this.mergeByPath(c,b)}},mergeByPath:function(b,c){if(e(this.jsonData,b,true)&&a.isPlainObject(c)){var d=this.getByPath(b);var f=a.assign({},d,c);this.setByPath(b,f);this.pointersCache.resetValidations()}else if(!a.isPlainObject(c)){throw new Error(c+" is not an object")}},push:function(b,c,d,e){if(!this.isExist(b)){throw new Error(JSON.stringify(b)+" path does not exist")}var f=this.pointersCache.getPath(b);var g=this.getByPath(f);if(!a.isUndefined(e)&&!a.isNumber(e)){throw new Error("push index arguments should be a numbert")}e=a.isNumber(e)?e:g.length;this.pushByPath(f,c,e);if(d){var h=f.concat(e);this.pointersCache.setPath(d,h)}},pushByPath:function(b,c,d){var e=this.getByPath(b);d=a.isNumber(d)?d:e.length;if(d>e.length||d<0){throw new Error("Index out of bound")}if(d===0){e.unshift(c)}else{e.splice(d,0,c)}this.setByPath(b,e);this.pointersCache.resetValidations()},remove:function(a){if(!this.isExist(a)){throw new Error(a+" pointer does not exist")}var b=this.pointersCache.getPath(a);this.removeByPath(b)},removeByPath:function(a){if(!a){throw new Error("path is not valid")}f(this.jsonData,a);this.pointersCache.resetValidations()},getKeys:function(a){var b=this.pointersCache.getPath(a);if(!b){return undefined}return this.getKeysByPath(b)},getKeysByPath:function(b){c.validatePath(b,this.jsonData);var d=a.get(this.jsonData,b);if(!a.isPlainObject(d)){throw new Error("Can not get keys of an element that isn't a plain object")}return a.keys(d)}};return g});define("core/core/data/apiSections/documentDataAPI",["lodash","utils"],function(a,b){"use strict";function c(b,c,d,e){var f=b.cache.getBoundCacheInstance(true);var g=b.pointers.full.components.getPage(c,e);var h=g&&b.pointers.full.components.getComponent(d,g);var i=h&&f.getPath(h);return i?a.get(b.fullPagesData,i):null}function d(a,d,e){var f=c(a,d,e,a.siteData.getViewMode());return b.dataUtils.getAllCompsInStructure(f,a.siteData.isMobileView())}function e(b,c,d){var e=b.cache.getBoundCacheInstance(true);var f=e.getPath(b.pointers.getInnerPointer(c,d));return f?a.get(b.fullPagesData,f):null}function f(b,c){var d=b.cache.getBoundCacheInstance(true);var e=d.getPath(c);return e?a.get(b.fullPagesData,e):null}return function b(c){return{getAllCompsUnderRoot:a.partial(d,c),getFullStructureProperty:a.partial(e,c),getFullDataItem:a.partial(f,c)}}});define("core/core/data/runtimeDalMobxHelper",["lodash","mobx"],function(a,b){"use strict";function c(){return b.observable(b.asMap({}))}function d(b,d){return a.reduce(d,function(a,b){if(!a.has(b)){a.set(b,c())}return a.get(b)},b)}function e(c,d){return a.reduce(d,function(a,c){if(!a){return}if(b.isObservableMap(a)&&a.has(c)){return a.get(c)}return a[c]},c)}function f(c,d,f){var g=b.toJS(e(c,d));return a.isUndefined(g)?f:g}function g(b,c,e){var f=a.head(c);var g=d(b[f],a.slice(c,1,c.length-1));g.set(a.last(c),a.cloneDeep(e))}function h(c,d){var f=e(c,a.dropRight(d));if(f){var g=a.last(d);if(b.isObservableMap(f)){f.delete(g)}}}function i(b,c){a.forEach(c,a.partial(h,b))}function j(d,e){a.forEach(e,function(a){if(b.isObservableMap(d[a])){d[a].clear()}else{d[a]=c()}})}return{initStoreMaps:b.action(j),getByPath:f,setByPath:b.action(g),removeByPath:b.action(h),removeAllByPaths:b.action(i)}});define("core/core/data/PointersRuntimeCache",["lodash","utils"],function(a,b){"use strict";var c=b.constants.COMP_DATA_QUERY_KEYS;function d(a){return this._pointers.full.components.getPageOfComponent(a).id}function e(b,c){this._roots=c;this._viewMode=b;this._compPointers=a(c).flatMap(function(a){var c=this._pointers.full.components.getPage(a,b);return c?[c].concat(this._pointers.full.components.getChildrenRecursively(c)):[]}.bind(this)).keyBy("id").value()}var f=[b.constants.DATA_TYPES.data];function g(b){return a.includes(f,b)}function h(a,b,c){this._compPointers={};this._pointers=a;this._displayedDal=b;this._documentAPI=c;this._roots=[];this._viewMode=null}h.prototype={reset:function(){this._compPointers={}},isEmpty:function(){return a.isEmpty(this._compPointers)},getAllCompIds:function(b,c){if(!a.isEqual(this._roots,c)||this._viewMode!==b){e.call(this,b,c)}return a.keys(this._compPointers)},getCompPointer:function(a,b,c){var d=this._compPointers[a];if(d&&this._displayedDal.isExist(d)){return d}e.call(this,b,c);return this._compPointers[a]},getCompDataId:function(a,b){if(!a){return null}var d=this._pointers.getInnerPointer(a,c[b]);return this._displayedDal.get(d)},getCompDataItemPointer:function(a,b){if(!a){return null}var e=this._pointers.getInnerPointer(a,c[b]);var f=this._displayedDal.get(e);if(!f&&g(b)){f=this._documentAPI.getFullStructureProperty(a,c[b])}var h=null;if(f){h=this._pointers.data.getItem(b,f.replace("#",""),d.call(this,a))}return h&&this._displayedDal.isExist(h)?h:null}};return h});define("core/core/data/RuntimeToDisplayed",["lodash","utils"],function(a,b){"use strict";var c=b.constants.DATA_TYPES;var d=b.constants.PAGE_DATA_DATA_TYPES;var e=b.constants.COMP_DATA_QUERY_KEYS;var f={props:"props",data:"data",design:"design",layout:"layout",actionsBehaviors:"actionsBehaviors"};function g(a){return this._pointers.full.components.getPageOfComponent(a).id}function h(b,c,d,f){var h=a.uniqueId("_runtime_");var i=this._pointers.getInnerPointer(b,e[c]);this._displayedDal.set(i,"#"+h);var j=this._pointers.data.getItem(c,h,g.call(this,b));if(f){this._displayedDal.set(j,d)}else{this._displayedDal.set(j,a.assign({id:h},d))}return j}function i(a,b,c){if(c==="type"&&!a){if(b){return true}throw new Error("data items have to be passed with a type")}return c==="id"}function j(b,d,e){if(d.type){return d}var f=null;if(e&&e.type){f=a.assign({},d,{type:e.type})}else if(b===c.prop){f=a.assign({},d,{type:"DefaultProperties"})}else{throw new Error("data items have to be passed with a type")}return f}function k(c,e,f){var g=this._pointers.data.getPageIdOfData(f);var h=d[e];var k=this._siteData.getDataByQuery(f.id,g,h);var l=j(e,c,k);var m=b.objectUtils.cloneAndConditionalMergeOfFields(l,k,i);var n=this._dataResolver.getFlatMapOfNestedItem(m,h);this._dataResolver.removeItemsFromCache(g,d[e],a.keys(n));this._displayedDal.merge(f,n[f.id]);delete n[f.id];a.forOwn(n,function(a,b){var c=this._pointers.data.getItem(e,b,g);this._pointers.data.validatePath(c);this._displayedDal.set(c,a)}.bind(this));return f}function l(a,b,c){var d=this._compPointersCache.getCompDataItemPointer(c,a);if(!d){d=h.call(this,c,a)}return k.call(this,b,a,d)}function m(a,b){var e=c.prop;var f=this._compPointersCache.getCompDataItemPointer(b,e);if(!f){f=h.call(this,b,e,{},true)}var g=this._pointers.data.getPageIdOfData(f);var i=d[e];var k=this._siteData.getDataByQuery(f.id,g,i);var l=j(e,a,k);this._dataResolver.removeItemsFromCache(g,d[e],[f.id]);this._displayedDal.merge(f,l);return f}var n={};n[f.data]=a.partial(l,c.data);n[f.design]=a.partial(l,c.design);n[f.props]=m;n[f.actionsBehaviors]=function(b,e){var f=c.behaviors;var g=this._compPointersCache.getCompDataItemPointer(e,f);if(!g){g=h.call(this,e,f,{type:"ObsoleteBehaviorsList"})}var i=this._documentAPI.getFullDataItem(g);var j=i&&i.items||[];var k=a.isString(j)?JSON.parse(j):j;var l=k.concat(b);var m=this._pointers.getInnerPointer(g,"items");this._displayedDal.set(m,JSON.stringify(l));var n=this._pointers.data.getPageIdOfData(g);this._dataResolver.removeItemsFromCache(n,d[f],[g.id]);return m};n[f.layout]=function(a,b){var c=this._pointers.getInnerPointer(b,"layout");this._displayedDal.merge(c,a);return c};function o(a,b,c,d,e){this._pointers=c;this._displayedDal=b;this._siteData=a;this._dataResolver=a.dataResolver;this._compPointersCache=d;this._documentAPI=e}function p(b){var c=null;if(a.isPlainObject(b)){c=b}else{c=this._compPointersCache.getCompPointer(b,this._siteData.getViewMode(),this._siteData.getAllPossiblyRenderedRoots())}return c&&this._displayedDal.isExist(c)?c:null}o.prototype={updateDataItem:function(a,b,c){var d=p.call(this,a);if(!d){return null}return n[b].call(this,c,d)},updateActionsAndBehaviorsItems:function(a,b){var c=p.call(this,a);if(!c){return null}return n[f.actionsBehaviors].call(this,b,c)},updateCompLayout:function(a,b){var c=p.call(this,a);if(!c){return null}return n[f.layout].call(this,b,c)},updateAll:function(b){var c=this;var d=a.map(b,function(b,d){var e=b.overrides;var f=p.call(c,d);if(!f){return null}a.forOwn(e,function(a,b){n[b].call(c,a,f)});return f});return a.compact(d)},OVERRIDE_TYPES:f};return o});define("core/core/data/RuntimeDal",["lodash","utils","core/core/data/runtimeDalMobxHelper","core/core/data/PointersRuntimeCache","core/core/data/RuntimeToDisplayed"],function(a,b,c,d,e){"use strict";var f=["height","width"];var g=b.constants.DATA_TYPES;var h=b.constants.PAGE_DATA_DATA_TYPES;var i={data:"dataChange",props:"propsChange",design:"designChange"};var j=["runtime","components"];function k(a){return j.concat([a])}function l(a){return k(a).concat("state")}function m(a){return k(a).concat("overrides")}function n(a){return m(a).concat("props")}function o(a){return m(a).concat("data")}function p(a){return m(a).concat("design")}function q(a){return m(a).concat("layout")}function r(a){return m(a).concat("actionsBehaviors")}function s(a){return["runtime","popups",a]}function t(a){return s(a).concat("opened")}function u(a){return s(a).concat("context")}function v(b,c){return a.isEqual(c,a.pick(b,a.keys(c)))}function w(b,c,f,g){this._siteData=b;this._siteDataApi=c;this._pointers=g;this._displayedDal=f;this._changeListeners=[];this.snapshotId=0;this._roots=[];this._pointersCache=new d(g,f,c.document);this._runtimeToDisplayed=new e(b,f,g,this._pointersCache,c.document);if(this._siteDataApi){this._siteDataApi.registerDisplayedJsonUpdateCallback(this._pointersCache.reset.bind(this._pointersCache))}if(this._displayedDal&&!this._displayedDal.isPathExist(j)){x.call(this)}a.bindAll(this,["registerChangeListener","getCompStructure","setCompState","removeCompState","getCompState","getCompType","getCompLayout","updateCompLayout","getCompDesign","setCompDesign","getCompData","setCompData","getCompConnections","getCompProps","setCompProps","getActionsAndBehaviors","addActionsAndBehaviors","removeActionsAndBehaviors","getCompName","getBoundingClientRect","getPageId","getParentId","isDisplayed","hasBeenPopupOpened","markPopupAsBeenOpened","getDynamicPageData","setPopupContext","getPopupContext"])}function x(){if(!a.get(this._siteData,"runtime")){a.set(this._siteData,"runtime",{})}c.initStoreMaps(this._siteData.runtime,["components","popups"]);this._pointersCache.reset()}function y(b,c){return a.get(b,a.head(c))}function z(b){return a.drop(b)}function A(a,b,d){var e=y(a,b);var f=z(b);return c.getByPath(e,f,d)}function B(a,b,d){var e=y(a,b);var f=z(b);c.setByPath(e,f,d)}function C(b,c,d,e){var f=J.call(this,c);if(!f){return null}var g=H.call(this,f);var j=this._pointersCache.getCompDataId(f,e);var k=this._siteData.getDataByQuery(j,g,h[e]);var l=a.get(this._siteData,d,{});var m=a.assign({},l,b);this._runtimeToDisplayed.updateDataItem(f,e,m);B(this._siteData,d,m);if(!v(k,b)){var n={type:i[e],value:b};D.call(this,c,n)}return++this.snapshotId}function D(b,c){a.forEach(this._changeListeners,function(a){a(b,c)})}function E(a,b){var c=J.call(this,a);if(!c){return null}return this._pointersCache.getCompDataItemPointer(c,b)}function F(a,c){var d=this._pointers.data.getPageIdOfData(a);return b.objectUtils.cloneDeep(this._siteData.getDataByQuery(a.id,d,h[c]))}function G(a){var b=J.call(this,a);if(!b){return null}var c=this._siteDataApi.document.getFullStructureProperty(b,"connectionQuery");if(!c){return null}var d=g.connections;var e=H.call(this,b);var f=this._pointers.data.getItem(d,c.replace("#",""),e);var i=this._displayedDal.get(f);var j=this._siteData.resolveData(i,e,h[d]);return j.items}function H(a){return this._pointers.full.components.getPageOfComponent(a).id}function I(){var b=this._siteData.getAllPossiblyRenderedRoots();if(this._pointersCache.isEmpty()){this._roots=b;return}var d=this._pointersCache.getAllCompIds(this._siteData.getViewMode(),b);var e=false;if(!a.isEqual(b,this._roots)){var f=a.get(this._siteData,j).keys();var g=a(f).difference(d).map(k).value();var h=a.map(g,function(b){return a.drop(b,2)});var i=a.get(this._siteData,a.take(a.head(g),2));if(!a.isEmpty(h)){c.removeAllByPaths(i,h);e=true}}this._roots=b;return e}function J(a){return this._pointersCache.getCompPointer(a,this._siteData.getViewMode(),this._siteData.getAllPossiblyRenderedRoots())}a.assign(w.prototype,{registerChangeListener:function(a){this._changeListeners.push(a)},getCompStructure:function(a){var b=J.call(this,a);return b&&this._displayedDal.get(b)},setCompState:function(b,d){var e=this.getCompState(b);var f=l(b);var g=y(this._siteData,f);var h=z(f);c.setByPath(g,h,a.assign({},e,d));if(!v(e,d)){var i={type:"stateChange",value:this.getCompState(b)};D.call(this,b,i)}return++this.snapshotId},removeCompState:function(a){var b=l(a);var d=y(this._siteData,b);var e=z(b);c.removeByPath(d,e)},getCompState:function(a){return A(this._siteData,l(a))},getCompType:function(a){var b=J.call(this,a);return this._siteDataApi.document.getFullStructureProperty(b,"componentType")},getCompLayout:function(a){var b=A(this._siteData,q(a));var c=J.call(this,a);if(!c){return}var d=this._pointers.getInnerPointer(c,"layout");return this._displayedDal.get(d)},updateCompLayout:function(b,c){var d=this.getCompLayout(b);var e=q(b);var f=A(this._siteData,e,{});var g=a.assign({},f,c);this._runtimeToDisplayed.updateCompLayout(b,g);B(this._siteData,e,g);if(!v(d,c)){var h={type:"layoutChange",value:c};D.call(this,b,h)}return++this.snapshotId},getCompDesign:function(a){var b=A(this._siteData,p(a));var c=E.call(this,a,g.design);return c&&F.call(this,c,g.design)},setCompDesign:function(a,b){return C.call(this,b,a,p(a),g.design)},getCompData:function(a){var b=A(this._siteData,o(a));var c=E.call(this,a,g.data);return c&&F.call(this,c,g.data)},setCompData:function(a,b){return C.call(this,b,a,o(a),g.data)},getCompConnections:function(a){return G.call(this,a)||[]},getCompProps:function(a){var b=A(this._siteData,n(a));var c=E.call(this,a,g.prop);return c&&F.call(this,c,g.prop)},setCompProps:function(a,b){return C.call(this,b,a,n(a),g.prop)},getActionsAndBehaviors:function(a){var b=A(this._siteData,r(a));var c=E.call(this,a,g.behaviors);var d=c&&F.call(this,c,g.behaviors);return d&&d.items||[]},addActionsAndBehaviors:function(a,b){var c=r(a);var d=A(this._siteData,c,[]);var e=d.concat(b);this._runtimeToDisplayed.updateActionsAndBehaviorsItems(a,e);B(this._siteData,c,e);return++this.snapshotId},removeActionsAndBehaviors:function(b,c){var d=r(b);var e=A(this._siteData,d,[]);a.remove(e,c);this._runtimeToDisplayed.updateActionsAndBehaviorsItems(b,e);B(this._siteData,d,e);return++this.snapshotId},getCompName:function(b){var c=this.getCompConnections(b);var d=a.get(c,[0,"type"])==="WixCodeConnectionItem"&&c[0];return d?d.role:b},getBoundingClientRect:function(b){var c=this._siteData.measureMap;if(c){return a.transform(f,function(a,d){a[d]=c[d][b]},{})}return a.pick(this.getCompLayout(b),f)},getPageId:function(a){var b=J.call(this,a);if(!b){return null}return H.call(this,b)},getParentId:function(a){var b=J.call(this,a);var c=b&&this._pointers.full.components.getParent(b);return c&&c.id},isDisplayed:function(a){var b=J.call(this,a);return!!b&&this._displayedDal.isExist(b)},hasBeenPopupOpened:function(a){return A(this._siteData,t(a),false)},markPopupAsBeenOpened:function(a){var b=t(a);B(this._siteData,b,true)},getDynamicPageData:function(){return this._siteData.getDynamicPageData()},setPopupContext:function(a,b){var c=u(a);B(this._siteData,c,b)},getPopupContext:function(a){return A(this._siteData,u(a))}});return{createRuntimeDal:function(a,b,c,d){var e=new w(a,b,c,d);return{runtimeDal:e,resetRuntime:x.bind(e),runtimeToDisplayed:e._runtimeToDisplayed,getAllCompsData:function(){return A(e._siteData,j,{})},resetNonDisplayedPages:I.bind(e)}}}});define("core/core/data/apiSections/ModesApplicationAPI",["utils","lodash","coreUtils"],function(a,b,c){"use strict";var d={};var e=a.constants;function f(a,b,c){var d=g(a);var e=a.pointers.components.getPage(c,d);return a.pointers.components.getComponent(b,e)}function g(a){return a.siteData.isMobileView()?e.VIEW_MODES.MOBILE:e.VIEW_MODES.DESKTOP}function h(a,b,c,e,f){this.privatesKey=a.siteId;d[this.privatesKey]={siteData:a,createDisplayedPage:b,createDisplayedNode:c,pointers:e,displayedDal:f}}function i(a,d,e,f,g){var h=a.pointers.componentStructure.getModesDefinitions(e);var i=a.displayedDal.get(h);var j=g&&b.find(i,{modeId:g});var k=f&&b.find(i,{modeId:f});var l=b.filter(i,{type:c.siteConstants.COMP_MODES_TYPES.SCROLL});var m=b.filter(i,{type:c.siteConstants.COMP_MODES_TYPES.WIDTH});var n=b.find(i,{type:c.siteConstants.COMP_MODES_TYPES.DEFAULT});var o=b.find(i,{type:c.siteConstants.COMP_MODES_TYPES.HOVER});a.siteData.activeModes[d]=a.siteData.activeModes[d]||{};var p=a.siteData.activeModes[d];if(j){p[g]=true;switch(j.type){case c.siteConstants.COMP_MODES_TYPES.SCROLL:b.forEach(l,function(a){if(a.modeId!==j.modeId){p[a.modeId]=false}});break;case c.siteConstants.COMP_MODES_TYPES.WIDTH:b.forEach(m,function(a){if(a.modeId!==j.modeId){p[a.modeId]=false}});break;case c.siteConstants.COMP_MODES_TYPES.DEFAULT:p[o.modeId]=false;break;case c.siteConstants.COMP_MODES_TYPES.HOVER:if(n){p[n.modeId]=false}break}}if(k){p[f]=false;switch(k.type){case c.siteConstants.COMP_MODES_TYPES.SCROLL:if(!j||j.type!==c.siteConstants.COMP_MODES_TYPES.SCROLL){p[b.head(l).modeId]=true}break;case c.siteConstants.COMP_MODES_TYPES.WIDTH:if(!j||j.type!==c.siteConstants.COMP_MODES_TYPES.WIDTH){p[b.head(m).modeId]=true}break;case c.siteConstants.COMP_MODES_TYPES.DEFAULT:p[o.modeId]=true;break;case c.siteConstants.COMP_MODES_TYPES.HOVER:if(n){p[n.modeId]=true}break}}}h.prototype={resetAllActiveModes:function(){var a=d[this.privatesKey];var c=b.keys(a.siteData.activeModes);b.forEach(c,function(c){if(!b.isEmpty(a.siteData.activeModes[c])){a.siteData.activeModes[c]={};a.createDisplayedPage(c)}})},deactivateModesInPage:function(a){var c=d[this.privatesKey];var e=this.getActiveModes()[a];if(!b.isEmpty(e)){c.siteData.activeModes[a]={};return c.createDisplayedPage(a)}return false},getActiveModes:function(){var a=d[this.privatesKey];var c={};b.forEach(a.siteData.activeModes,function(a,d){c[d]=b.omitBy(a,function(a){return!a})});return c},getPageActiveModes:function(a){var c=d[this.privatesKey];return b.omitBy(c.siteData.activeModes[a],function(a){return!a})},activateModeById:function(a,b,c){var e=d[this.privatesKey];var g=f(e,a,b);return this.activateMode(g,c)},activateMode:function(a,b){var c=d[this.privatesKey];var e=c.pointers.full.components.getPageOfComponent(a);if(e&&e.id){var f=this.getActiveModes()[e.id];if(f&&f[b]){return false}c.siteData.activeModes[e.id]=c.siteData.activeModes[e.id]||{};i(c,e.id,a,null,b);c.createDisplayedNode(a);return true}return false},deactivateModeById:function(a,b,c){var e=d[this.privatesKey];var g=f(e,a,b);return this.deactivateMode(g,c)},deactivateMode:function(a,b){var c=d[this.privatesKey];var e=c.pointers.full.components.getPageOfComponent(a);if(e&&e.id){var f=this.getActiveModes()[e.id];if(!f||!f[b]){return false}c.siteData.activeModes[e.id]=c.siteData.activeModes[e.id]||{};i(c,e.id,a,b);c.createDisplayedNode(a);return true}return false},switchModesByIds:function(a,b,c,e){var g=d[this.privatesKey];var h=f(g,a,b);return this.switchModes(h,c,e)},switchModes:function(a,b,c){var e=d[this.privatesKey];if(b===c){return false}var f=e.pointers.full.components.getPageOfComponent(a);e.siteData.activeModes[f.id]=e.siteData.activeModes[f.id]||{};var g=this.getActiveModes()[f.id];var h=false;if(!g[c]||g[b]){h=true}if(h){i(e,f.id,a,b,c);e.createDisplayedNode(a)}return h}};return h});define("core/core/SiteDataAPI",["utils","lodash","core/core/dataRequirementsChecker","core/core/data/pointers/DataAccessPointers","core/core/data/pointers/pointersCache","core/core/data/ViewerDisplayedJsonUpdater","core/core/data/DisplayedJsonDal","core/core/data/apiSections/documentDataAPI","core/core/data/RuntimeDal","core/core/data/apiSections/AnchorsDataAPI","core/core/data/apiSections/ModesApplicationAPI"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={};function m(a,c){var d={pagesData:a.pagesData};var f=new e(a,a,d);var g=p(a,f);l[a.siteId]=n(a,g,f,d,c);return b.clone(l[a.siteId])}function n(a,c,d,e,f){var g={};g.displayedDal=c.dal;g.pointers=c.pointers;g.cache=d;g.displayedJsonUpdater=o(c,e,d);g.fullPagesData=e;g.siteData=a;g.siteData.pagesData=b.clone(e.pagesData);g.siteDataAPI=new y(g,a.siteId,f);return g}function o(a,b,c){var d=c.getBoundCacheInstance(true);var e=a.dal;var g=a.pointers;return new f(b,e,d,g)}function p(a,b){return{dal:new g(a,b.getBoundCacheInstance(false)),pointers:new d(b)}}var q=0;function r(a,d,e,f,g,h,i){if(i){g(h)}var j=c.getNeededRequests(d,e,f);var k=b.filter(j,function(a){return b.head(a.destination)==="pagesData"&&a.destination.length===2});h=h||[];h=h.concat(b.map(k,"destination[1]"));if(j.length===0&&!i){d.wixBiSession["dataLoaded"+q++]=b.now();g(h)}else{a.loadBatch(j,r.bind(undefined,a,d,e,f,g,h))}}function s(a,c,d,e){var f=l[a];u.call(this,f,c,d,e);if(b.head(d)!=="pagesData"&&f.dataLoadedCallback){f.dataLoadedCallback(d,e)}}function t(a,c){if(a!=="masterPage"&&!c.siteData.pagesData.masterPage){this.pagesPendingForMasterPage.push(a)}else if(a==="masterPage"){this.createDisplayedPage(a);b.forEach(this.pagesPendingForMasterPage,this.createDisplayedPage.bind(this));this.pagesPendingForMasterPage=[]}else{this.createDisplayedPage(a)}}function u(a,c,d,e){if(v(d)){b.set(c,d,e);var f=d[1];t.call(this,f,a)}else{b.set(a.siteData,d,e)}}function v(a){return b.head(a)==="pagesData"&&b.size(a)>1}function w(a){var c=l[this.siteId].pointers.components.getPageOfComponent(a);b.forEach(this._displayedJsonUpdateCallbacks,function(b){b(c.id,a.id)})}function x(c,d){if(!d){return}var e=c.fullPagesData.pagesData[d];var f=c.siteData.activeModes;var g=c.siteData.isMobileView();var h=b.clone(f[d]);var i=a.modes.resolveCompActiveModesRecursive(e.structure,h,g,e.data.component_properties);c.siteData.activeModes[d]=i;var j=!b.isEqual(h,i);return j}function y(c,d,e){c.dataLoadedCallback=null;this.siteId=d;this.siteData=c.siteData;this.store=new a.Store(this.siteData,e);this.store.registerDataLoadedCallback(b.bind(s,this,this.siteId,c.fullPagesData));this.siteData.setStore(this.store);this._displayedJsonUpdateCallbacks=[];this.pagesPendingForMasterPage=[];this.document=h(c);var f=i.createRuntimeDal(c.siteData,this,c.displayedDal,c.pointers);c.runtimeToDisplayed=f.runtimeToDisplayed;c.resetRuntimeData=f.resetRuntime;c.resetRuntimeNonDisplayedPages=f.resetNonDisplayedPages;c.getRuntimeCompsData=f.getAllCompsData;this.runtime=f.runtimeDal;this.anchors=new j(this.siteData);this.modes=new k(this.siteData,this.createDisplayedPage.bind(this),this.createDisplayedNode.bind(this),c.pointers,c.displayedDal)}y.prototype={registerDataLoadedCallback:function(a){var b=l[this.siteId];b.dataLoadedCallback=a},refreshRenderedRootsData:function(a){var b=l[this.siteId];var c=this.siteData.getFocusedRootId();var d=this.siteData.getExistingRootNavigationInfo(c);r(this.store,b.siteData,b.fullPagesData,d,a)},registerDisplayedJsonUpdateCallback:function(a){this._displayedJsonUpdateCallbacks.push(a)},loadPage:function(a,c){var d=l[this.siteId];function e(a){if(d.dataLoadedCallback){var b=d.fullPagesData.pagesData[a];d.dataLoadedCallback(["pagesData",a],b)}}r(this.store,d.siteData,d.fullPagesData,a,function(d){if(a.pageId&&!b.includes(d,a.pageId)){this.createDisplayedPage(a.pageId)}b.forEach(d,e.bind(this));c()}.bind(this),[])},unloadNonVisiblePage:function(a){var b=l[this.siteId];var c=b.resetRuntimeNonDisplayedPages();var d=this.modes.deactivateModesInPage(a);if(!d&&c){this.createDisplayedPage("masterPage");if(!d){this.createDisplayedPage(a)}}return d||c},createDisplayedPage:function(a){var b=l[this.siteId];var c=this.siteData.activeModes;var d=b.fullPagesData.pagesData[a];if(!d){return false}x(b,a);var e=b.displayedJsonUpdater.updateDisplayedRoot(c,d);this.anchors.createPageAnchors(e.structure.id);b.runtimeToDisplayed.updateAll(b.getRuntimeCompsData());
return true},createDisplayedNode:function(a){var b=l[this.siteId];var c=b.pointers.components.getPageOfComponent(a);var d=b.fullPagesData.pagesData[c.id].structure;x(b,c.id);b.displayedJsonUpdater.updateDisplayedJsonByPointer(a,this.siteData.activeModes);this.anchors.createPageAnchors(d.id);b.cache.resetValidations();b.runtimeToDisplayed.updateAll(b.getRuntimeCompsData());w.call(this,a)},resetRuntimeData:function(){var a=l[this.siteId];a.resetRuntimeData();var c=this.siteData.getAllPossiblyRenderedRoots();b.forEach(c,this.createDisplayedPage.bind(this));this.siteData.clearCache();this.siteData.observableUpdateIndex++}};return{createSiteDataAPIAndDal:m}});define("core/components/util/galleryPagingCalculations",["lodash","coreUtils"],function(a,b){"use strict";var c=b.matrix.calculations;var d={getNumberOfDisplayedRows:function(a,b,d,e){if(a||e&&e<b*d){return b}return c.getAvailableRowsNumber(b,d,e)},getItemsPerPage:function(a,b,c){return a*this.getNumberOfDisplayedRows(null,b,a,c)},getTotalPageCount:function(a,b,c){var d=this.getItemsPerPage(a,b,c);var e=Math.floor(c/d);if(c%d>0){e++}return e},getNextPageItemIndex:function(a,b,c,d){var e=a+this.getItemsPerPage(b,c,d);if(e>=d){e=0}return e},getPrevPageItemIndex:function(a,b,c,d){var e=this.getItemsPerPage(b,c,d);var f=a-e;if(f<0){f=(this.getTotalPageCount(b,c,d)-1)*e}return f},getCounterText:function(a,b,c,d){var e=Math.floor(a/this.getItemsPerPage(b,c,d));var f=this.getTotalPageCount(b,c,d);if(!f){f=1}return String(e+1)+"/"+String(f)},getPageItems:function(a,b,c,d){return this.getPageItemsByStartIndex(a,b,this.getItemsPerPage(c,d,a.length))},getPageItemsByStartIndex:function(a,b,c){var d=[];if(c<a.length){var e=this.getLastItemIndex(a,b,c);for(var f=b;f<=e;f++){d.push(a[f])}return d}return a},getLastItemIndex:function(a,b,c){return Math.min(a.length-1,b+c-1)}};return d});define("core/components/util/boxSlideShowCommon",["lodash"],function(a){"use strict";var b="wysiwyg.viewer.components.BoxSlideShow";var c="wysiwyg.viewer.components.BoxSlideShowSlide";var d="wysiwyg.viewer.components.StripContainerSlideShow";var e="wysiwyg.viewer.components.StripContainerSlideShowSlide";function f(a){return a.componentType}function g(a){return a.props.structure.componentType}return{getNextSlideIndex:function(a,b){var c=b+1;if(c>=a.length){c=0}return c},getPrevSlideIndex:function(a,b){var c=b-1;if(c<0){c=a.length-1}return c},getSlidesFromChildrenByStructure:function(b){return a.filter(b,function(a){return f(a)===c||f(a)===e})},getSlidesFromChildrenByProps:function(b){return a.filter(b,function(a){return g(a)===c||g(a)===e})},getShownOnAllSlidesFromChildrenByStructure:function(b){return a.reject(b,function(a){return f(a)===c||f(a)===e})},getShownOnAllSlidesFromChildrenByProps:function(b){return a.reject(b,function(a){return g(a)===c||g(a)===e})},isBoxOrStripSlideShowComponent:function(a){return a===b||a===d},isBoxOrStripSlideShowSlideComponent:function(a){return a===c||a===e},getMatchingChildSlideType:function(a){if(!this.isBoxOrStripSlideShowComponent(a)){throw new Error("invalid comp type, not a box or strip slide show component")}return a===b?c:e}}});define("core/components/mediaZoomWrapperMixin",["lodash","core/components/skinBasedComp"],function(a,b){"use strict";return{mixins:[b],componentWillMount:function(){var a=this.props.siteAPI.getSiteAspect("windowKeyboardEvent");a.registerToEscapeKey(this);var b=this.props.siteAPI.getSiteAspect("windowTouchEvents");b.registerToWindowTouchEvent("touchMove",this);var c=this.getPrevAndNextState();if(c.next){a.registerToArrowRightKey(this)}if(c.prev){a.registerToArrowLeftKey(this)}},componentWillUnmount:function(){this.props.siteAPI.getSiteAspect("windowKeyboardEvent").unRegisterKeys(this);this.props.siteAPI.getSiteAspect("windowTouchEvents").unregisterFromWindowTouchEvent("touchMove",this)},getSkinProperties:function(){var a=this.getChildZoomComponentType();var b=a==="wysiwyg.viewer.components.MobileMediaZoom";return{"":{children:this.createChildComponent(this.props.compData,a,"mediaZoom",{ref:this.props.compData.id,actualNavigateToItemFunc:this.actualNavigateToItem,getBoxDimensionsFunc:this.getBoxDimensions,getChildCompFunc:this.getChildComp,getPrevAndNextStateFunc:this.getPrevAndNextState,isDataChangedFunc:this.isDataChanged,closeFunction:this.props.closeFunction,enableInnerScrolling:this.enableInnerScrolling||false}),style:{width:"100%",height:"100%",position:b?"static":"absolute"}}}},closeMediaZoom:function(){this.refs[this.props.compData.id].closeMediaZoom()},onEscapeKey:function(){this.closeMediaZoom()},onArrowLeftKey:function(){this.refs[this.props.compData.id].clickOnPreviousButton()},onArrowRightKey:function(){this.refs[this.props.compData.id].clickOnNextButton()},onWindowTouchMove:function(a){if(!this.enableInnerScrolling){a.preventDefault();a.stopPropagation()}}}});define("core/components/galleryImageExpandedActionMixin",["lodash","siteUtils","loggingUtils"],function(a,b,c){"use strict";var d=a.map(["SlideShow","Slider","PaginatedGrid","Matrix"],function(a){return"wysiwyg.viewer.components."+a+"Gallery"});function e(a){return{id:a,timeStamp:c.performance.now(),name:"imageExpanded"}}function f(b,c){c=c||[];if(!b){return c}if(a.includes(d,b.componentType)){c.push(b)}a.forEach(b.components,function(a){f(a,c)});return c}function g(b,c,d){var e=b.getDataByQuery(d.dataQuery,c);return a.get(e,"items")}function h(b,c){return a.findIndex(c,function(c){return a.some(c,{id:b})})}return{handleImageExpandedAction:function(){var c=this.props.siteData;var d=this.props.pageId;var i=a.get(this.props,"compData.id")||this.props.id;var j=f(c.pagesData[d].structure);var k=a.map(j,g.bind(null,c,d));var l=h(i,k);if(l!==-1){var m=this.props.siteAPI.getSiteAspect("behaviorsAspect");var n=[{name:b.constants.ACTION_TYPES.ITEM_CLICKED,pageId:d,sourceId:j[l].id,type:"comp"},{name:b.constants.ACTION_TYPES.IMAGE_EXPANDED,pageId:d,sourceId:j[l].id,type:"comp"}];a.map(n,function(a){m.handleAction(a,e(i));return})}}}});define("core/components/util/matrixAnimationManipulation",["lodash"],function(a){"use strict";function b(){return.1}var c={getDefultAnimationValues:function(a,b,c,d){return{sourceNodesArrSorted:[a],destNodesArrSorted:[b],stagger:0,timingFunctionIndex:c,transName:d,sporadicallyRandom:false}},getUpdatedTimingFunctionIndex:function(a,b){if(b>a.length-1){b=0}return b},getCrossFadePossibleTransitionByName:function(a){switch(a){case"crossFadeHorizWave":return this.sortMatrixByRows;case"crossFadeVertWave":return this.sortMatrixByCols;case"seq_crossFade_Diagonal":return this.convertMatrixToDiagonal}},convertArrayToMatrix:function(b,c,d){var e=0;var f=new Array(c);a.times(c,function(c){if(!f[c]){f[c]=[]}a.times(d,function(a){if(e<b.length){f[c][a]=b[e];e++}else{f[c][a]=-1}})});return f},sortMatrixByRows:function(a){return[a]},sortMatrixByCols:function(b,c,d){var e=this.convertArrayToMatrix(b,c,d);var f=[];var g=0;a.times(d,function(b){a.times(c,function(a){if(e[a][b]!==-1){f[g]=e[a][b];g++}})});return[f]},reverseMatrix:function(a){return a.reverse()},convertMatrixToDiagonal:function(b,c,d){var e=this.convertArrayToMatrix(b,c,d);var f=[];var g=0;a.times(c+d,function(b){var h=Math.max(0,b-c);var i=Math.min(d-h,b,c);a.times(i,function(a){var d=e[Math.min(c,b)-a-1][h+a];if(d!==-1){f[g]=d;g++}})});return[f]},convertMatrixToReverseDiagonal:function(a,b,c){var d=this.convertMatrixToDiagonal(a,b,c);return this.reverseMatrix(d)},getMatrixByRows:function(b,c,d){var e=0;var f=new Array(c);a.times(c,function(c){if(!f[c]){f[c]=[]}a.times(d,function(a){if(e<b.length){f[c][a]=b[e];e++}})});return f},getMatrixByRowsReverse:function(a,b,c){var d=this.getMatrixByRows(a,b,c);return this.reverseMatrix(d)},getMatrixByColsReverse:function(a,b,c){var d=this.getMatrixByCols(a,b,c);return this.reverseMatrix(d)},getMatrixByCols:function(b,c,d){var e=this.getMatrixByRows(b,c,d);var f=new Array(d);a.times(d,function(b){if(!f[b]){f[b]=[]}a.times(c,function(a){if(e[a][b]){f[b][a]=e[a][b]}})});return f}};var d={getSortedArrayAndStagger:function(a,d,e,f,g,h){switch(a){case"none":return{sourceNodesArrSorted:[d],destNodesArrSorted:[e],stagger:0,transName:"NoTransition"};case"seq_shrink_All":case"seq_crossFade_All":var i=[c.sortMatrixByRows,c.sortMatrixByCols,c.reverseMatrix,c.convertMatrixToDiagonal,c.convertMatrixToReverseDiagonal,c.sortMatrixByRows];h=c.getUpdatedTimingFunctionIndex(i,h);var j=i[h];return{sourceNodesArrSorted:j.call(c,d,f,g),destNodesArrSorted:j.call(c,e,f,g),stagger:h===i.length-1||d.length!==e.length?0:.1,timingFunctionIndex:h,transName:a==="seq_shrink_All"?"Shrink":"CrossFade"};case"swipe_horiz_All":var k=[c.getMatrixByRows,c.getMatrixByRowsReverse];h=c.getUpdatedTimingFunctionIndex(k,h);var l=k[h];return{sourceNodesArrSorted:l.call(c,d,f,g),destNodesArrSorted:l.call(c,e,f,g),stagger:b(),timingFunctionIndex:h,transName:"SlideHorizontal",sporadicallyRandom:f>1};case"swipe_vert_All":var m=[c.getMatrixByCols,c.getMatrixByColsReverse];h=c.getUpdatedTimingFunctionIndex(m,h);var n=m[h];return{sourceNodesArrSorted:n.call(c,d,f,g),destNodesArrSorted:n.call(c,e,f,g),stagger:b(),timingFunctionIndex:h,transName:"SlideVertical",sporadicallyRandom:g>1};case"seq_random":var o=["seq_shrink_All","seq_crossFade_All","swipe_horiz_All","swipe_vert_All"];var p=o[Math.floor(Math.random()*o.length)];return this.getSortedArrayAndStagger(p,d,e,f,g,h);case"horizSwipeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"SlideHorizontal");case"vertSwipeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"SlideVertical");case"crossFadeAllAtOnce":return c.getDefultAnimationValues(d,e,h,"CrossFade");case"crossFadeHorizWave":case"crossFadeVertWave":case"seq_crossFade_Diagonal":var q=c.getCrossFadePossibleTransitionByName(a);return{sourceNodesArrSorted:q.call(c,d,f,g),destNodesArrSorted:q.call(c,e,f,g),stagger:.1,timingFunctionIndex:h,transName:"CrossFade"};case"seq_swipe_alternate":var r=[c.getMatrixByRows,c.getMatrixByCols];h=c.getUpdatedTimingFunctionIndex(r,h);return{sourceNodesArrSorted:d,destNodesArrSorted:e,stagger:b(),timingFunctionIndex:h,transName:h===0?"SlideHorizontal":"SlideVertical"}}}};return d});define("core/components/uniquePageIdProviders/singlePostUniquePageIdProvider",["utils","lodash"],function(a,b){"use strict";var c=a.hashUtils,d=a.blogAppPartNames,e="blog";function f(){var a=Array.prototype.slice.call(arguments,0);return c.SHA256.hex_sha256(a.join("/"))}return{isMatched:function(a){return b.some(a.data.document_data,{appPartName:d.SINGLE_POST})},getUniquePageId:function(g,h){if(a.stringUtils.isTrue(b.get(g,["currentUrl","query","draft"]))){return c.SHA256.hex_sha256("editor")}var i=g.pagesData[h],j=b.find(i.data.document_data,{appPartName:d.SINGLE_POST}),k=g.wixapps.blog[j.id][1];return f(g.siteId,e,k)}}});define("core/components/uniquePageIdProviders/uniquePageIdProviders",["core/components/uniquePageIdProviders/singlePostUniquePageIdProvider"],function(){"use strict";return Array.prototype.slice.call(arguments,0)});define("core/components/uniquePageIdMixin",["lodash","core/components/uniquePageIdProviders/uniquePageIdProviders"],function(a,b){"use strict";function c(b,c){return a(b.pagesData.masterPage.structure.children).map(function(b){return a.isArray(b.components)?b.components:b}).flattenDeep().some({id:c})}return{getUniquePageId:function d(){var e;if(c(this.props.siteData,this.props.id)){return this.props.siteData.getExternalBaseUrl()}e=a.find(b,function(a){var b=this.props.rootId;var c=this.props.siteData.pagesData[b];return a.isMatched(c)}.bind(this));if(!a.isUndefined(e)){return e.getUniquePageId(this.props.siteData,this.props.rootId)}return this.props.siteData.currentUrl.full}}});define("core/activities/activity",["utils"],function(a){"use strict";var b=function(){return{additionalInfoUrl:null,summary:""}};var c=function(a){return a.currentUrl.full};var d=function(){return a.guidUtils.getUniqueId()};var e=function(a,b){this._activityInfo=a;this._fields=b};e.prototype={getParams:function(){return{hs:this._activityInfo.hubSecurityToken,"activity-id":d(),"metasite-id":this._activityInfo.metaSiteId,svSession:this._activityInfo.svSession,version:"1.0.0"}},getPayload:function(){return{activityDetails:b(),activityInfo:"activityInfo",activityLocationUrl:c(this._activityInfo),activityType:"activityType",contactUpdate:{},createdAt:(new Date).toISOString()}}};return e});define("core/activities/tpaActivity",["lodash","core/activities/activity"],function(a,b){"use strict";var c=function(a,c){b.call(this,a,c)};c.prototype=new b;c.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c);var e={"application-id":this._fields.appDefinitionId,instance:this._fields.instance};e=a.assign(d,e);return e};c.prototype.getPayload=function(c){var d=b.prototype.getPayload.call(this,c);var e={contactUpdate:this._fields.contactUpdate,activityInfo:this._fields.info,activityType:this._fields.type,activityDetails:this._fields.details};e=a.assign(d,e);return e};return c});define("core/activities/contactFormActivity",["lodash","core/activities/activity","experiment"],function(a,b,c){"use strict";var d=29;var e=function(b){var c="";c+=b.subject?"<strong>"+b.subject+"</strong>":"";if(b.message){c+=b.subject?"<br>":"";c+=b.message}return{additionalInfoUrl:null,summary:!a.isEmpty(c)?c:"No message was received"}};var f={name:{first:"",last:""},emails:[{tag:"main",email:""}],phones:[{tag:"main",phone:""}],addresses:[{tag:"main",address:""}]};var g={name:"name",email:"emails",phone:"phones",address:"addresses"};var h=function(b,c){return a(b).keys().map(function(a){return{name:c[a],value:b[a]}}).value()};var i=function(a,b){if(c.isOpen("contactFormActivity")){return{subject:a.subject,content:{message:a.message,media:[]},additionalFields:h(a,b)}}var d={fields:[]};Object.keys(a).forEach(function(b){d.fields.push({name:b,value:a[b]})});return d};var j=function(b){var c=a.omitBy(b,function(a){return!a});var d=a.map(c,function(a,b){return g[b]});var e=a.pick(f,d);l(e,c);k(e,c);a.forEach(c,function(b,c){var d=e[g[c]];if(a.isArray(d)){a.head(d)[c]=b}});return e};var k=function(a,b){if(!b.phone){b.phone=""}b.phone=b.phone.substring(0,d)};var l=function(a,b){if(!b.name){b.name=""}var c=b.name.split(" ");if(a.name){a.name.first=c[0];a.name.last=c[1]}};var m=function(a,c,d){b.call(this,a,c);this._fieldLabels=d};m.prototype=new b;m.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c);var e={"component-name":"ContactForm"};e=a.assign(d,e);return e};m.prototype.getPayload=function(d){var f=b.prototype.getPayload.call(this,d);var g=j(this._fields);var h={contactUpdate:g,activityInfo:i(this._fields,this._fieldLabels),activityDetails:e(this._fields),activityType:c.isOpen("contactFormActivity")?"form/contact-form":"contact/contact-form"};h=a.assign(f,h);return h};return m});define("core/activities/subscribeFormActivity",["lodash","core/activities/activity"],function(a,b){"use strict";var c=function(b){var c={fields:[]};Object.keys(b).forEach(function(a){c.fields.push({name:a,value:b[a]})});c.email=b.email;if(b.first||b.last){c.name=a.pickBy({first:b.first,last:b.last},a.identity)}if(b.phone){c.phone=b.phone}return c};var d=function(a){return{name:{first:a.first||"",last:a.last||""},emails:[{tag:"main",email:a.email||""}],phones:a.phone?[{tag:"main",phone:a.phone||""}]:[],emailSubscriptionPolicy:"RECURRING"}};var e=function(a,c){b.call(this,a,c)};e.prototype=new b;e.prototype.getParams=function(c){var d=b.prototype.getParams.call(this,c);var e={"component-name":"subscribeForm"};e=a.assign(d,e);return e};e.prototype.getPayload=function(e){var f=b.prototype.getPayload.call(this,e);var g={contactUpdate:d(this._fields),activityInfo:c(this._fields),activityType:"contact/subscription-form"};g=a.assign(f,g);return g};return e});define("core/activities/activityTypes",["core/activities/tpaActivity","core/activities/contactFormActivity","core/activities/subscribeFormActivity"],function(a,b,c){"use strict";return{TPAActivity:a,ContactFormActivity:b,SubscribeFormActivity:c}});define("core/activities/activityService",["utils"],function(a){"use strict";var b=a.urlUtils,c=a.ajaxLibrary;var d="/_api/app-integration-bus-web/v1/activities";function e(e,f,g){var h="?"+b.toQueryString(e.getParams()),i=a.urlUtils.origin()+d+h;c.ajax({type:"POST",url:i,data:e.getPayload(),dataType:"json",contentType:"application/json",success:f,error:g})}return{reportActivity:e}});define("core/components/transitionGroup",["lodash","react"],function(a,b){"use strict";function c(a){var c={};var d=0;b.Children.forEach(a,function(a){c[a.key||""+d++]=a});return c}var d=b.createClass({displayName:"ReactTransitionGroup",propTypes:{component:b.PropTypes.any,childFactory:b.PropTypes.func},getDefaultProps:function(){return{component:"span",childFactory:a.identity}},getInitialState:function(){return{children:c(this.props.children)}},componentWillMount:function(){this.currentlyTransitioningKeys={};this.keysToEnter=[];this.keysToLeave=[]},componentDidMount:function(){var a=this.state.children;for(var b in a){if(a[b]){this.performAppear(b)}}},componentWillReceiveProps:function(b){var d=c(b.children);var e=this.state.children;this.setState({children:a.assign({},e,d)});var f;for(f in d){if(d[f]&&!(e&&e.hasOwnProperty(f))&&!this.currentlyTransitioningKeys[f]){this.keysToEnter.push(f)}}for(f in e){if(e[f]&&!(d&&d.hasOwnProperty(f))&&!this.currentlyTransitioningKeys[f]){this.keysToLeave.push(f)}}},componentDidUpdate:function(){var a=this.keysToEnter;this.keysToEnter=[];a.forEach(this.performEnter);var b=this.keysToLeave;this.keysToLeave=[];b.forEach(this.performLeave)},performAppear:function(a){this.currentlyTransitioningKeys[a]=true;var b=this.refs[a];if(b.componentWillAppear){b.componentWillAppear(this._handleDoneAppearing.bind(this,a))}else{this._handleDoneAppearing(a)}},_handleDoneAppearing:function(a){var b=this.refs[a];if(b.componentDidAppear){b.componentDidAppear()}delete this.currentlyTransitioningKeys[a];var d=c(this.props.children);if(!d||!d.hasOwnProperty(a)){this.performLeave(a)}},performEnter:function(a){this.currentlyTransitioningKeys[a]=true;var b=this.refs[a];if(b.componentWillEnter){b.componentWillEnter(this._handleDoneEntering.bind(this,a))}else{this._handleDoneEntering(a)}},_handleDoneEntering:function(a){var b=this.refs[a];if(b.componentDidEnter){b.componentDidEnter()}delete this.currentlyTransitioningKeys[a];var d=c(this.props.children);if(!d||!d.hasOwnProperty(a)){this.performLeave(a)}},performLeave:function(a){this.currentlyTransitioningKeys[a]=true;var b=this.refs[a];if(b.componentWillLeave){b.componentWillLeave(this._handleDoneLeaving.bind(this,a))}else{this._handleDoneLeaving(a)}},_handleDoneLeaving:function(b){var d=this.refs[b];if(d.componentDidLeave){d.componentDidLeave()}delete this.currentlyTransitioningKeys[b];var e=c(this.props.children);if(e&&e.hasOwnProperty(b)){this.performEnter(b)}else{this.setState(function(c){var d=a.assign({},c.children);delete d[b];return{children:d}})}},render:function(){var a=[];for(var c in this.state.children){if(this.state.children[c]){var d=this.state.children[c];a.push(b.cloneElement(this.props.childFactory(d),{ref:c,key:c}))}}return b.createElement(this.props.component,this.props,a)}});return d});define("core/components/wixTransitionItem",["lodash","react","core/components/animatableMixin"],function(a,b,c){"use strict";var d=b.createClass({displayName:"wixTransitionItem",mixins:[c],render:function(){return this.props.children},componentWillEnter:function(a){this.props.onWillEnter(this.props.refInParent,a)},componentWillLeave:function(a){this.props.onWillLeave(this.props.refInParent,a)}});return d});define("core/components/wixTransitionGroup",["lodash","react","reactDOM","zepto","core/components/transitionGroup","core/components/wixTransitionItem","core/components/animationsMixin"],function(a,b,c,d,e,f,g){"use strict";e=b.createFactory(e);function h(b,e){a(b).map(c.findDOMNode).map(d).forEach(function(a){a.attr("data-leaving",e?true:null)})}var i=b.createClass({displayName:"wixTransitionGroup",mixins:[g],getDefaultProps:function(){return{transition:"CrossFade",transitionDuration:2,reverse:false,transitionCallback:a.noop}},getInitialState:function(){this.leavingChildren={};this.enteringChildren={};return{}},render:function(){return e(a.assign({childFactory:this.childWrapper,component:"div",ref:"group"},a.omit(this.props,"transition")))},childWrapper:function(a){return b.createElement(f,{onWillEnter:this.onWillEnter,onWillLeave:this.onWillLeave,refInParent:a.props.refInParent,ref:a.props.refInParent,key:a.props.refInParent},a)},getInnerRefs:function(b){return a.map(b,function(a){return this.refs.group.refs[a]}.bind(this))},flush:function(){if(!a.isEmpty(this.enteringChildren)&&a.size(this.leavingChildren)===a.size(this.enteringChildren)){var b=this.getInnerRefs(a.keys(this.leavingChildren));var c=this.getInnerRefs(a.keys(this.enteringChildren));h(b,true);h(c,false);var d=a.values(this.enteringChildren).concat(a.values(this.leavingChildren));this.leavingChildren={};this.enteringChildren={};var e=a.isFunction(this.props.getTransitionParams)?this.props.getTransitionParams():{};this.transition(b,c,this.props.transition,this.props.transitionDuration,0,a.assign({reverse:this.props.reverse},e),{onComplete:function(){this.props.transitionCallback();a.forEach(d,function(a){a()})}.bind(this)})}},onWillEnter:function(a,b){this.enteringChildren[a]=b;this.flush()},onWillLeave:function(a,b){this.leavingChildren[a]=b;this.flush()}});return i});define("core/components/behaviorHandlers/behaviorHandlersFactory",["lodash","utils"],function(a,b){"use strict";var c={};var d={};var e={handle:a.noop};function f(d){if(!a.has(c,d)){b.log.warn("there is no behavior handler for type "+d);return e}return c[d]}function g(a,b){c[a]=b}function h(a,b){d[a]=b}function i(b){return d[b]||a.identity}return{getHandler:f,registerHandler:g,registerBehaviorPreprocessor:h,getBehaviorPreprocessor:i}});define("core/components/siteAspects/behaviorsService",["core/components/behaviorHandlers/behaviorHandlersFactory"],function(a){"use strict";function b(b,c,d,e){d=d||{};a.getHandler(e).handle(c,b,d)}return{handleBehaviors:b}});define("core/core/data/pointers/jsonItemsFinders",["utils"],function(a){"use strict";function b(b,c){if(c===a.constants.VIEW_MODES.MOBILE){return b.mobileComponents?"mobileComponents":"components"}return b.children?"children":"components"}function c(a,b){return b.id===a||a==="masterPage"&&b.children}function d(a,e,f,g){if(c(e,a)){return g}var h=b(a,f);var i=a[h];if(!i){return null}var j=null;for(var k=0;k<i.length&&!j;k++){var l=i[k];j=d(l,e,f,g.concat([h,k]))}return j}return{getChildrenPropertyName:b,getComponentPath:function(a,b,c){return d(a,b,c,[])},getDataPath:function(){},isComponentWithId:c}});define("core/core/data/pointers/componentPointers",["lodash","utils","core/core/data/pointers/DataAccessPointers","core/core/data/pointers/pointerGeneratorsRegistry","core/core/data/pointers/jsonItemsFinders"],function(a,b,c,d,e){"use strict";var f=new c;var g=b.constants;var h="masterPage";function i(a){return["pagesData",a,"structure"]}function j(b){return a.isArray(b)&&b[b.length-3]==="pagesData"}function k(a,b,c){var d=a(i(c));if(!d){return undefined}var f=e.getComponentPath(d,b.id,b.type);if(f){f=i(c).concat(f)}return f}function l(b,c,d){var e;a.forEach(b,function(a){e=e||k(c,d,a)});if(!e){var f=a.keyBy(b);a.forOwn(c(["pagesData"]),function(a,b){if(f[b]){return true}e=k(c,d,b);if(e){return false}})}return e}d.registerPointerType(g.VIEW_MODES.DESKTOP,l,e.isComponentWithId,true,true);d.registerPointerType(g.VIEW_MODES.MOBILE,l,e.isComponentWithId,true,true);var m={getMobilePointer:function(b,c,d){return a.assign(a.clone(d),{type:g.VIEW_MODES.MOBILE})},getDesktopPointer:function(b,c,d){return a.assign(a.clone(d),{type:g.VIEW_MODES.DESKTOP})},isMobile:function(a,b,c){return c.type===g.VIEW_MODES.MOBILE},isPage:function(a,b,c){var d=b.getPath(c);return j(d)},isPagesContainer:function(a,b,c){return c.id===g.COMP_IDS.PAGES_CONTAINER},isMasterPage:function(a,b,c){var d=b.getPath(c);if(!d){return false}var e=d[1];return e===h&&this.isPage(a,b,c)},isInMasterPage:function(a,b,c){var d=b.getPath(c);var e=d[1];return e===h},getViewMode:function(a,b,c){return this.isMobile(a,b,c)?g.VIEW_MODES.MOBILE:g.VIEW_MODES.DESKTOP},getChildrenContainer:function(a,b,c){var d=b.getPath(c);var g=a(d);var h=e.getChildrenPropertyName(g,c.type);var i=f.getOriginalPointerFromInner(c);i.innerPath=[h];return i},getChildren:function(b,c,d){var f=c.getPath(d);var g=b(f);var h=e.getChildrenPropertyName(g,d.type);var i=g[h];return a.map(i,function(a,b){return c.getPointer(a.id,d.type,f.concat([h,b]))})},getChildrenRecursively:function(a,b,c){var d=this.getChildren(a,b,c);var e=0;while(e<d.length){d.push.apply(d,this.getChildren(a,b,d[e]));e++}return d},getChildrenRecursivelyRightLeftRootIncludingRoot:function(a,b,c){var d=[c];var e=[];while(d.length){var f=d.shift();e.unshift(f);var g=this.getChildren(a,b,f);d=g.concat(d)}return e},getParent:function(b,c,d){var e=c.getPath(d);if(!e||j(e)){return null}var f=a.dropRight(e,2);var g=b(f);return g&&c.getPointer(g.id,d.type,f)},getSiblings:function(b,c,d){var e=this.getParent(b,c,d);if(!e){return[]}var f=this.getChildren(b,c,e);a.remove(f,{id:d.id});return f},getComponent:function(a,b,c,d){var f=d.type;var g=b.getPointer(c,f);if(!g){var h=b.getPath(d);var i=a(h);var j=e.getComponentPath(i,c,f);if(j){g=b.getPointer(c,f,h.concat(j))}}return g},getMasterPage:function(a,b,c){return this.getPage(a,b,h,c)},getPage:function(a,b,c,d){var e=d;var f=b.getPointer(c,e);if(!f){var g=i(c);var h=a(g);if(!h){return null}f=b.getPointer(c,e,g)}return f},getNewPage:function(a,b,c,d){var e=d||g.VIEW_MODES.DESKTOP;var f=i(c);var h=a(f);if(h){throw new Error("there is already a page with id "+c)}return b.getPointer(c,e,f)},getPagesContainer:function(a,b,c){var d=this.getMasterPage(a,b,c);return this.getComponent(a,b,g.COMP_IDS.PAGES_CONTAINER,d)},getFooter:function(a,b,c){var d=this.getMasterPage(a,b,c);return this.getComponent(a,b,g.COMP_IDS.FOOTER,d)},getHeader:function(a,b,c){var d=this.getMasterPage(a,b,c);return this.getComponent(a,b,g.COMP_IDS.HEADER,d)},getUnattached:function(a,b,c,d){return b.getPointer(c,d,[])},getPageOfComponent:function(a,b,c){var d=b.getPath(c);if(!d){return null}var e=d[1];return this.getPage(a,b,e,c.type)},isDescendant:function(b,c,d,e){var f=c.getPath(d);var g=c.getPath(e);if(f&&g){var h=g.length;var i=f.length;return i>h&&a.isEqual(f.slice(0,h),g)}return false}};d.registerDataAccessPointersGenerator("components",m,true)});define("core/core/data/pointers/componentStructurePointers",["lodash","core/core/data/pointers/DataAccessPointers","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b,c){"use strict";var d=new b;var e={getModes:function(a,b,c){return d.getInnerPointer(c,["modes"])},getModesDefinitions:function(a,b,c){return d.getInnerPointer(c,["modes","definitions"])},getModesOverrides:function(a,b,c){return d.getInnerPointer(c,["modes","overrides"])}};c.registerDataAccessPointersGenerator("componentStructure",e)});define("core/core/data/pointers/dataPointers",["lodash","utils","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b,c){"use strict";var d=b.constants;var e="masterPage";var f=d.DATA_TYPES;function g(){return true}function h(b,c,d,e){var f=i(b);var g=d(["pagesData"]);return a.reduce(g,function(a,c,g){var h=j(b,g,f).concat(e.id);if(!a&&d(h)){return h}return a},null)}function i(a){switch(a){case f.data:return"document_data";case f.design:return"design_data";case f.prop:return"component_properties";case f.theme:return"theme_data";case f.behaviors:return"behaviors_data";case f.connections:return"connections_data";default:throw new Error("there is no such data type "+a)}}function j(a,b,c){return["pagesData",b,"data",c||i(a)]}c.registerPointerType(f.data,h.bind(null,f.data),g,false,true);c.registerPointerType(f.prop,h.bind(null,f.prop),g,false,true);c.registerPointerType(f.design,h.bind(null,f.design),g,false,true);c.registerPointerType(f.theme,h.bind(null,f.theme),g,false,true);c.registerPointerType(f.behaviors,h.bind(null,f.behaviors),g,false,true);c.registerPointerType(f.connections,h.bind(null,f.connections),g,false,true);var k={getDataItem:function(a,b,c,d){return this.getItem(a,b,f.data,c,d)},getDataItemWithPredicate:function(b,c,d,e){return a.head(this.getDataItemsWithPredicate(b,c,d,e))},getDataItemsWithPredicate:function(b,c,d,e){var g=e||"masterPage";var h=j(f.data,g);var i=b(h);return a.map(a.filter(i,d),function(a){return this.getDataItem(b,c,a.id,g)}.bind(this))},getDesignItem:function(a,b,c,d,e){return this.getItem(a,b,f.design,c,d,e)},getPropertyItem:function(a,b,c,d,e){return this.getItem(a,b,f.prop,c,d,e)},getBehaviorsItem:function(a,b,c,d){return this.getItem(a,b,f.behaviors,c,d)},getConnectionsItem:function(a,b,c,d){return this.getItem(a,b,f.connections,c,d)},getThemeItem:function(a,b,c){return this.getItem(a,b,f.theme,c,e)},getItem:function(a,b,c,d,e,f){var g=j(c,e);g.push(d);return b.getPointer(d,c,g,f)},getDataItemFromMaster:function(a,b,c){return this.getDataItem(a,b,c,e)},getPageIdOfData:function(a,b,c){var d=b.getPath(c);return d[1]},validatePath:function(a,b,c){return!!b.getPath(c)}};c.registerDataAccessPointersGenerator("data",k)});define("core/core/data/pointers/generalPointers",["lodash","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b){"use strict";var c="general";b.registerPointerType(c,a.constant(null),a.constant(true));b.registerPointerType("metadata",a.constant(null),a.constant(true));var d={getAllTheme:{id:"theme",path:["pagesData","masterPage","data","theme_data"]},getOrphanPermanentDataNodes:{id:"orphanPermanentDataNodes",path:["orphanPermanentDataNodes"]},getTextRuntimeOverallBorders:{id:"overallBorders",path:["textRuntimeLayout","overallBorders"]},getDockedRuntimeLayout:{id:"dockedRuntimeLayout",path:["dockedRuntimeLayout"]},getSaveInvalidationCount:{id:"saveInvalidationCount",path:["saveInvalidationCount"]},getPagesData:{id:"pagesData",path:["pagesData"]},getServiceTopology:{id:"serviceTopology",path:["serviceTopology"]},getDeletedMobileComps:{id:"mobileDeletedCompsMap",path:["mobileDeletedCompsMap"]},getCommittedMobilePages:{id:"committedMobilePages",path:["committedMobilePages"]},getDeletedPagesMapPointer:{id:"deletedPagesMap",path:["deletedPagesMap"]},getUserId:{id:"userId",path:["rendererModel","userId"]},getIsStudioUser:{id:"isStudioUser",path:["documentServicesModel","userInfo","isStudio"]},getEditorData:{id:"editorData",path:["editorData"]},getMobileStructuresPointer:{id:"mobileStructures",path:["mobileStructures"]},getCompsToUpdateAnchors:{id:"compsToUpdateAnchors",path:["compsToUpdateAnchors"]},getRuntimePointer:{id:"runtime",path:["runtime"]},getNeverSaved:{id:"neverSaved",path:["documentServicesModel","neverSaved"]},getPublicUrl:{id:"publicUrl",path:["documentServicesModel","publicUrl"]},getPermissions:{id:"permissions",path:["documentServicesModel","permissionsInfo"]},getForbiddenPageUriSEOs:{id:"forbiddenPageUriSEOs",path:["urlFormatModel","forbiddenPageUriSEOs"]},getUrlFormat:{id:"urlFormat",path:["urlFormatModel","format"]},getClientSpecMap:{id:"clientSpecMap",path:["rendererModel","clientSpecMap"]},getAutosaveInfo:{id:"autoSaveInfo",path:["documentServicesModel","autoSaveInfo"]},getMetaSiteId:{id:"metaSiteId",path:["rendererModel","metaSiteId"]},getDocumentType:{id:"documentType",path:["rendererModel","siteInfo","documentType"]},getActiveModes:{id:"activeModes",path:["activeModes"]},getContactFormsMetaData:{id:"contactformsMetaData",path:["contactforms_metadata"]},getRootsRenderedInMobileEditor:{id:"rootsRenderedInMobileEditor",path:["rootsRenderedInMobileEditor"]},getRenderFlags:{id:"renderFlags",path:["renderFlags"]},getRoutersPointer:{id:"routers",path:["routers"]},getSantaBase:{id:"santaBase",path:["santaBase"]}};var e={getRenderFlag:function(a,b,d){return b.getPointer("renderFlags"+d,c,["renderFlags",d])},getRenderRealtimeConfigItem:function(a,b,d){
return b.getPointer("renderRealtimeConfig"+d,c,["renderRealtimeConfig",d])},getAutoSaveInnerPointer:function(a,b,d){return b.getPointer("autoSaveInfo"+d,c,["documentServicesModel","autoSaveInfo",d])}};var f=a(d).mapValues(function(a){return function(b,d){return d.getPointer(a.id,c,a.path)}}).assign(e).value();b.registerDataAccessPointersGenerator(c,f)});define("core/core/data/pointers/platformPointers",["lodash","core/core/data/pointers/pointerGeneratorsRegistry","core/core/data/pointers/DataAccessPointers"],function(a,b,c){"use strict";var d="platform";var e=new c;b.registerPointerType(d,a.constant(null),a.constant(true));function f(a,b){return b.getPointer("platform",d,["platform"])}function g(a,b){var c=f(a,b);return e.getInnerPointer(c,"appState")}function h(a,b,c){return b.getPointer(c+" state",d,["platform","appState",c])}function i(a,b,c){return b.getPointer("appManifest "+c,d,["platform","appManifest",c])}function j(a,b,c,e,f){return b.getPointer("controllerStageData "+c+e+f,d,["platform","appManifest",c,"controllersStageData",e,f])}function k(a,b){return b.getPointer("pagesPlatformApplications",d,["pagesPlatformApplications"])}function l(a,b,c){return b.getPointer(c+" pages",d,["pagesPlatformApplications",c])}var m={getPlatformPointer:f,getAppStatePointer:g,getControllerStatePointer:h,getControllerStageDataPointer:j,getAppManifestPointer:i,getPagesPlatformApplicationsPointer:k,getPagesPlatformApplicationPointer:l};b.registerDataAccessPointersGenerator(d,m)});define("core/core/data/pointers/pagePointers",["lodash","core/core/data/pointers/pointerGeneratorsRegistry"],function(a,b){"use strict";var c="page";b.registerPointerType(c,function(){return null},function(){return true},false,true);var d={isPointerPageType:function(a,b,d){return d&&d.type===c},getNewPagePointer:function(a,b,d){var e=["pagesData",d];return b.getPointer(d,c,e)},getPagePointer:function(b,d,e){var f=["pagesData",e];var g=b(f);if(a.isUndefined(g)){return null}return d.getPointer(e,c,f)},isExists:function(b,c,d){var e=["pagesData",d];var f=b(e);return!a.isUndefined(f)},getAllPagesPointer:function(a,b){return b.getPointer("all",c,["pagesData"])},getNonDeletedPagesPointers:function(b,d,e){e=a.isUndefined(e)?false:e;var f=["pagesData"];var g=b(f);g=a.pickBy(g,function(a,b){if(!a){return false}if(!e&&b==="masterPage"){return false}return true});return a.map(g,function(a,b){return d.getPointer(b,c,f.concat(b))})},getPageData:function(a,b,d){var e=["pagesData",d,"data","document_data"];var f=a(e);if(!f){return null}return b.getPointer(d+"_data",c,e)},getPageProperties:function(a,b,d){var e=["pagesData",d,"data","component_properties"];var f=a(e);if(!f){return null}return b.getPointer(d+"_prop",c,e)},getPageDesignData:function(a,b,d){var e=["pagesData",d,"data","design_data"];var f=a(e);if(!f){return null}return b.getPointer(d+"_design",c,e)}};b.registerDataAccessPointersGenerator(c,d)});define("core/core/data/pointers/pointers",["core/core/data/pointers/pointerGeneratorsRegistry","core/core/data/pointers/pointersCache","core/core/data/pointers/DataAccessPointers","core/core/data/pointers/componentPointers","core/core/data/pointers/componentStructurePointers","core/core/data/pointers/dataPointers","core/core/data/pointers/generalPointers","core/core/data/pointers/platformPointers","core/core/data/pointers/pagePointers"],function(a,b,c){"use strict";return{pointerGeneratorsRegistry:a,PointersCache:b,DataAccessPointers:c}});define("core/components/fullScreenOverlay/fullScreenOverlay",["lodash","react"],function(a,b){"use strict";return b.createClass({displayName:"fullScreenOverlay",propTypes:{siteWidth:b.PropTypes.number.isRequired,siteScrollingBlocker:b.PropTypes.object.isRequired,forceBackground:b.PropTypes.func.isRequired,disableForcedBackground:b.PropTypes.func.isRequired,isMobileDevice:b.PropTypes.bool.isRequired,overlayBackgroundOpacity:b.PropTypes.string},statics:{createOverlay:function(c,d){var e=b.createFactory(this);c[""]=a.assign({},c[""],{wrap:[e,d]});return c}},getOverlayBackground:function(){var a=this.props.overlayBackgroundOpacity||1;return"rgba(0, 0, 0, "+a+")"},componentDidMount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,true);if(this.props.isMobileDevice){this.props.forceBackground(this.getOverlayBackground())}},componentWillUnmount:function(){this.props.siteScrollingBlocker.setSiteScrollingBlocked(this,false);if(this.props.isMobileDevice){this.props.disableForcedBackground()}},render:function(){return b.createElement("div",null,b.createElement("div",{className:"fullScreenOverlay",key:"fullScreenOverlay"},b.createElement("div",{className:"fullScreenOverlayContent",style:{width:this.props.siteWidth,background:this.getOverlayBackground()},key:"fullScreenOverlayContent"},this.props.children)))}})});define("core/components/compStateMixin",["lodash","santaProps"],function(a,b){"use strict";function c(a){var b={props:this.props.compProp,data:this.props.compData};return a.call(this,this.state,b)}function d(a){return{statics:{publicState:a},propTypes:{setCompState:b.Types.DAL.setCompState.isRequired,removeCompState:b.Types.DAL.removeCompState.isRequired,id:b.Types.Component.id.isRequired},componentWillUnmount:function(){this.props.removeCompState(this.props.id)},componentDidMount:function(){this.props.setCompState(this.props.id,c.call(this,a))},componentDidUpdate:function(){this.props.setCompState(this.props.id,c.call(this,a))}}}return d});define("core/components/siteAspects/animationsService",[],function(){"use strict";function a(a){return a.getSiteAspect("animationsAspect")}function b(b,c,d,e,f){var g=a(b);if(g){return g.playAnimations(c,d,e,f)}return f&&f()}function c(b,c){var d=a(b);if(d){d.hideElementsByAnimationType(c)}}function d(b,c){var d=a(b);if(d){d.revertHideElementsByAnimations(c)}}function e(b,c,d){var e=a(b);if(e){e.stopAndClearAnimations(c,d)}}return{playAnimations:b,hideElementsByAnimationType:c,revertHideElementsByAnimations:d,stopAndClearAnimations:e}});define("core/core/ObservableSiteData",["lodash","mobx","dataFixer","siteUtils"],function(a,b,c,d){"use strict";function e(a){if(a){if(a.wixData){c.deprecatedSiteModelMigrater(a)}}d.SiteData.call(this,a);b.extendObservable(this,{observableUpdateIndex:0})}e.prototype=a.create(d.SiteData.prototype,{constructor:e});return e});define("core/components/siteAspects/BehaviorsAspect",["lodash","core/components/behaviorHandlers/behaviorHandlersFactory","core/components/siteAspects/behaviorsService"],function(a,b,c){"use strict";var d=["sourceId","type","name"];var e=["targetId","type","name","part"];var f=["behaviors","registeredActionsByTypeSource"];function g(c){var d=b.getHandler(c.type);if(d.getUniqueIdentifier){return d.getUniqueIdentifier(c)}return a(c).at(e).map(function(b){return a.isPlainObject(b)?a.values(b):b}).join()}function h(b){return a.at(b,d).join(",")}function i(a){return a.type+":"+a.sourceId}function j(b,c,d,e){var f=a(b).map(d).keyBy(e).value();var g=a.keys(f);var h=a.keys(c);var i=a.intersection(g,h);var j=a.difference(g,i);var k=a.difference(h,i);return{map:f,added:j,removed:k}}function k(c,d){var e=j(c,this._registeredBehaviors[d]||{},"behavior",g);this._behaviorsAdded[d]=e.added.concat(this._behaviorsAdded[d]||[]);this._behaviorsRemoved[d]=e.removed.concat(this._behaviorsRemoved[d]||[]);a(this._registeredBehaviors[d]).pick(e.removed).forEach(function(c){var d=b.getHandler(c.type);if(a.has(d,"cancelPreCondition")){d.cancelPreCondition(c,this._aspectSiteAPI)}}.bind(this));this._registeredBehaviors[d]=e.map;var f=j(c,this._registeredActions[d]||{},"action",h);this._actionsRemoved[d]=this._actionsRemoved[d]||{};a.assign(this._actionsRemoved[d],a.pick(this._registeredActions[d],f.removed));this._registeredActions[d]=f.map;this._actionsAdded[d]=f.added.concat(this._actionsAdded[d]||[]);this._actionsToBehaviorsMap[d]=a(c).groupBy(function(a){return h(a.action)}).mapValues(function(b){return a(b).map("behavior").map(g).value()}).value();this._behaviorsToActionsMap[d]=a(c).groupBy(function(a){return g(a.behavior)}).mapValues(function(b){return a(b).map("action").map(h).value()}).value()}function l(b,c,d){var e=a(b).pick(c).map(function(b,c){return d===true?b:a.pick(b,d[c])}).values().value();return a.assign.apply(a,[{}].concat(e))}function m(a){var b=this._aspectSiteAPI.getSiteAspect("actionsAspect");return b.needToRunPreConditions(a)}function n(b,c){return a.filter(b,function(a){var b=g(a);if(a.playOnce&&c[b]){return false}c[b]=true;return true})}function o(b,c,d){return a(c).chain().pick(b).map(function(b){return a.flatten(a.values(b))}).find(function(b){return a(b).map("behavior").some(d)}).find(function(b){return a.isEqual(b.behavior,d)}).get("action").value()}function p(d,e,f){var g=this._aspectSiteAPI.getSiteAPI();var h=g.getAllRenderedRootIds();var i=a.map(d,function(a){var c=o(h,this._rawBehaviorsForActions,a);return b.getBehaviorPreprocessor(f)(a,c,g)}.bind(this));c.handleBehaviors(g,i,e,f)}function q(b){return a(b).map("action").groupBy(i).value()}function r(c,d,e){var f=c.getSiteAspect("actionsAspect");return a(d).reject(function(a){return f.isActionDisabled(a.action.name)}).filter(function(d){var e=b.getHandler(a.get(d,"behavior.type","animation"));return a.isUndefined(e.isEnabled)||e.isEnabled(d.behavior,c.getSiteAPI())}).map(function(b){return a.defaultsDeep(b,{behavior:{type:"animation",pageId:e},action:{pageId:e}})}).value()}function s(b){this._aspectSiteAPI=b;this._registeredActions={};this._registeredBehaviors={};this._ranOnce={};this._rawBehaviorsForActions={};this._behaviorsAdded={};this._behaviorsRemoved={};this._actionsAdded={};this._actionsRemoved={};this._actionsToBehaviorsMap={};this._behaviorsToActionsMap={};this._behaviorsWaitingToFlush={};a.set(b.getSiteData(),f,{});a.bindAll(this,["handleActions","handleAction","setBehaviorsForActions","getActions","getCompActions","convertBehaviors","_handleDidLayout","_handleRootsChanged","_handleRootsAddedDidLayout","resetBehaviorsRegistration","registerBehavior","extractBehaviors","handleBehavior"]);this._aspectSiteAPI.registerToDidLayout(this._handleDidLayout);this._aspectSiteAPI.registerToAddedRenderedRootsDidLayout(this._handleRootsAddedDidLayout);this._aspectSiteAPI.registerToRenderedRootsChange(this._handleRootsChanged)}s.prototype={handleActions:function(b,c){a.forEach(this._actionsToBehaviorsMap,function(d,e){a(d).pick(a.map(b,h)).values().flatten().map(a.get.bind(a,this._registeredBehaviors[e])).groupBy("type").forEach(function(d,e){d=n(d,this._ranOnce);c=a.defaults({},c,{action:"action"});b=b||[{name:"action"}];c.action=b[0].name;p.call(this,d,c,e)}.bind(this))}.bind(this))},handleAction:function(a,b){this.handleActions([a],b)},setBehaviorsForActions:function(b,c,d){var e=r(this._aspectSiteAPI,b,c);a.set(this._aspectSiteAPI.getSiteData(),f.concat([c,d]),q(b));a.set(this._rawBehaviorsForActions,[c,d],e)},getActions:function(b,c){var d=a.get(this._aspectSiteAPI.getSiteData(),f,{});return a(d).map(c).flatMap(b+":"+c).compact().uniq().mapKeys(function(a){return a.name}).value()},getCompActions:function(b,c,d,e){var f=r(this._aspectSiteAPI,e,d);var g=q(f);return a(a.get(g,[b+":"+c])).compact().uniq().mapKeys(function(a){return a.name}).value()},convertBehaviors:function(b,c){return a.map(b,function(b){if(b.behavior&&b.action){return b}var d={name:b.action,sourceId:b.sourceId||c,type:"comp"};var e=a.omit(b,["action","sourceId","pageId","duration","delay"]);e.targetId=e.targetId||c;a.assign(e.params,a.pick(b,["duration","delay"]));return{action:d,behavior:e}})},_handleDidLayout:function(){var c=this._aspectSiteAPI.getAllRenderedRootIds();a.forEach(c,function(b){var c=a.flatten(a.values(this._rawBehaviorsForActions[b]));var d=this._aspectSiteAPI.getSiteData().measureMap.top;c=a.filter(c,function(b){var c=b.action.sourceId;var e=b.action.type;var f=b.behavior.type;var g=b.behavior.targetId;var h=e!=="comp"||a.isNumber(d[c]);var i=f==="widget"||f==="site"||a.isNumber(d[g]);return h&&i});k.call(this,c,b)}.bind(this));var d=l(this._registeredActions,c,this._actionsAdded);var e=a(this._actionsRemoved).pick(c).values().reduce(a.assign,{});var f=a(this._registeredActions).pick(c).values().reduce(a.assign,{});var g=l(this._registeredBehaviors,c,this._behaviorsAdded);a.forEach(g,function(d,e){var g=a(this._behaviorsToActionsMap).pick(c).values().map(e).compact().flatten().map(a.get.bind(a,f)).every(m.bind(this));if((!d.playOnce||!this._ranOnce[e])&&g){var h=b.getHandler(d.type);if(a.has(h,"handlePreCondition")){h.handlePreCondition(d,this._aspectSiteAPI)}}}.bind(this));a.forEach(c,function(a){this._actionsAdded[a]=[];this._actionsRemoved[a]={};this._behaviorsAdded[a]=[];this._behaviorsRemoved[a]=[]}.bind(this));if(!a.isEmpty(e)){this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(e)}if(!a.isEmpty(d)){this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsAddedLayouted(d)}},_handleRootsChanged:function(b,c){var d=l(this._registeredActions,c,true);a.forEach(c,function(b){this._rawBehaviorsForActions[b]=[];this._registeredActions[b]={};this._registeredBehaviors[b]={};this._behaviorsAdded[b]=[];this._behaviorsRemoved[b]=[];this._actionsAdded[b]=[];this._actionsRemoved[b]={};this._actionsToBehaviorsMap[b]={};this._behaviorsToActionsMap[b]={};a.set(this._aspectSiteAPI.getSiteData(),f.concat(b),{})}.bind(this));this._aspectSiteAPI.getSiteAspect("actionsAspect").actionsRemoved(d)},_handleRootsAddedDidLayout:function(){},resetBehaviorsRegistration:function(){this._ranOnce={}},registerBehavior:function(b,c){var d=a.get(this._behaviorsWaitingToFlush,b.targetId,[]);a.set(this._behaviorsWaitingToFlush,[b.targetId,d.length],{name:b.name,params:b.params,callback:c})},extractBehaviors:function(a){var b=this._behaviorsWaitingToFlush[a]||[];return b},clearBehaviorsAfterFlush:function(a){delete this._behaviorsWaitingToFlush[a]},handleBehavior:function(a,b){p.call(this,[a],b,a.type)}};return s});define("core/components/siteAspects/animationsAspect",["lodash","reactDOM","animations"],function(a,b,c){"use strict";function d(a){this._aspectSiteAPI=a;this._siteData=a.getSiteData();this._liveSequenceIdsByGroup={}}function e(b){var c=b.targetId||b.sourceId;while(a.isArray(c)){c=c[0]}return this._aspectSiteAPI.getRootOfComponentId(c)||b.pageId}d.prototype.previewAnimation=function(a,b,c,d){var e,f,g;e=this._aspectSiteAPI.getPageById(b);if(e){f=e.sequence();g={props:"clip,opacity,transform,transform-origin",immediateRender:false};f.add(a,c.name,c.duration,c.delay,c.params);f.add(a,"BaseClear",0,0,g);if(d){f.onCompleteAll(d)}return f.execute()}};d.prototype.addAnimationToSequence=function(a,b,c){var d;var f=e.call(this,a);var g=b[f];g.add(a.targetId,a.name,a.params.duration,a.params.delay,a.params,0);if(c){d="clip,opacity,transform";g.add(a.targetId,"BaseClear",0,0,{props:d,immediateRender:false})}return a.targetId};d.prototype.playAnimations=function(b,c,d,f){var g={};var h={};var i=[];a.forEach(c,function(b){var c=e.call(this,b);var f=this._aspectSiteAPI.getPageById(c);var i=b.targetId||b.sourceId;if(a.isString(i)&&!a.get(f,["refs",i])){return}if(!h[c]){h[c]=f.sequence();g[c]=[]}this.addAnimationToSequence(b,h,d);g[c].push(i)}.bind(this));var j=1;var k=function(c){j--;this._liveSequenceIdsByGroup[b]=a.reject(this._liveSequenceIdsByGroup[b],{sequenceId:c});if(j===0){f()}}.bind(this);a.forEach(h,function(b,c){if(b.hasAnimations()){j++;b.onCompleteAll(k.bind(this,b.getId()));g[c]=a.compact(g[c]);i.push({parentId:c,sequenceId:b.getId()});b.execute()}}.bind(this));k();this._liveSequenceIdsByGroup[b]=this._liveSequenceIdsByGroup[b].concat(i);return g};function f(d,f){a.forEach(d,function(a){var d=c.getProperties(a.name);if(d&&d.hideOnStart){var g=e.call(this,a);var h=this._aspectSiteAPI.getPageById(g);if(h){var i=b.findDOMNode(h.refs[a.targetId||a.sourceId]);if(i){i.style.visibility=f}}}}.bind(this))}d.prototype.hideElementsByAnimationType=function(a){f.call(this,a,"hidden")};d.prototype.revertHideElementsByAnimations=function(a){f.call(this,a,"")};d.prototype.previewTransition=function(a,b,c,d,e){var f;if(c==="masterPage"){f=this._aspectSiteAPI.getMasterPage()}else{f=this._aspectSiteAPI.getCurrentPage()}if(f){var g=f.sequence();var h={props:"clip,opacity,transform,transform-origin",immediateRender:false};g.add({sourceRefs:a,destRefs:b},d.name,d.duration,d.delay,d.params);g.add(a.concat(b),"BaseClear",0,0,h);if(e){g.onCompleteAll(e)}return g.execute()}};d.prototype.stopPreviewAnimation=function(b){var c=this._aspectSiteAPI.getAllRenderedRoots();a.forEach(c,function(a){a.stopSequence(b,1)})};d.prototype.stopAndClearAllAnimations=function(){a(this._liveSequenceIdsByGroup).keys().forEach(this.stopAndClearAnimations.bind(this))};d.prototype.stopAndClearAnimations=function(b,c){a.forEach(this._liveSequenceIdsByGroup[b],function(a){var b=this._aspectSiteAPI.getPageById(a.parentId);if(b){b.stopSequence(a.sequenceId,c)}}.bind(this));this._liveSequenceIdsByGroup[b]=[]};return d});define("core/components/designDataChangeHandlers/designDataChangeBgBehaviorsHandler",["lodash","utils"],function(a,b){"use strict";var c=b.balataConsts;var d={FadeIn:{type:"animation",defaults:{params:{}}},FadeOut:{type:"animation",defaults:{params:{}}},Scale:{type:"animation",defaults:{params:{scale:1}}}};function e(a,b){var c=a.getComponentById(b);return c.refs.balata}function f(c,d,e,f){var g={name:d.name,type:d.type,targetId:[[c,b.balataConsts.BALATA,d.part]],params:a.clone(d.params)||{}};if(!a.isEmpty(e)){a.assign(g.params,e,a.pick(f,a.keys(e)))}return g}function g(b,e){var f=a(e).map("part").uniq().value();var g=a.transform(e,function(b,c){var e=a.get(d,[c.name,"defaults","params"]);b[c.part]=a.assign({},b[c.part],e)},{});var h=a.transform(f,function(d,e){var f=a.get(b,["background",c[e]]);d[e]=a.merge({},g[e],a.pick(f,a.keys(g[e])))},{});return h}function h(a,b){var c=a.getSiteAspect("animationsAspect");c.stopAndClearAnimations(b)}function i(b,e,g,h){var i=b.getSiteAspect("behaviorsAspect");a.forEach(h,function(b){var h=a.get(g,["background",c[b.part]],{});var j=a.get(d,[b.name,"defaults","params"]);i.handleBehavior(f(e,b,j,h),{group:e})})}function j(b,c){var d=[];a.forEach(a.filter(b.dataChangeBehaviors,{trigger:"out"}),function(a){d.push(a)});a.forEach(a.filter(c.dataChangeBehaviors,{trigger:"in"}),function(b){if(!a.find(d,a.pick(b,["type","part","name"]))){d.push(b)}});return d}function k(a,b,c,d){var f=e(a,b);var k=c||{};var l=j(c,d);h(a,b);i(a,b,d,l);f.setState({transforms:g(k,l)})}function l(b,c,d,e){if(a.isEmpty(a.get(d,"dataChangeBehaviors"))&&a.isEmpty(a.get(e,"dataChangeBehaviors"))){return}k(b,c,d,e)}return{handle:l}});define("core/components/siteAspects/DesignDataChangeAspect",["lodash","core/components/designDataChangeHandlers/designDataChangeBgBehaviorsHandler"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a;this._registeredHandlers={};this.registerHandler("designDataChangeBgBehaviorsHandler",b.handle)}c.prototype={registerHandler:function(a,b){this._registeredHandlers[a]=b},unregisterHandler:function(b){this._registeredHandlers=a.omit(this._registeredHandlers,b)},notify:function(a,b,c){this.propagate(a,b,c)},propagate:function(b,c,d){a.forEach(this._registeredHandlers,function(a){a(this._aspectSiteAPI,b,c,d)}.bind(this))}};return c});define("core/components/siteAspects/loginToWixAspect",["react","lodash","utils","core/core/siteAspectsRegistry","core/bi/events"],function(a,b,c,d,e){"use strict";var f={postLogin:"http://www.wix.com/my-account",postSignUp:"http://www.wix.com/new/account"};var g=c.wixUserApi;var h=c.scrollAnchors;function i(a,d){d=b.assign(d||{},{renderMode:"iframe"});var e=c.urlUtils.toQueryString(d);return"//"+a.currentUrl.host+"/signin?"+e}function j(a,b){if(!a){return null}var c=window.pageYOffset+a.getBoundingClientRect().top;var d=h.getActiveAnchor(b,c);var e=a;while(e&&!e.id){e=e.parentNode}return{activeFold:d.index,totalFolds:d.total,text:a.textContent||e.alt||"",componentId:e?e.id:undefined}}function k(){if(!this.iframeFactory){var b=this.queryParams;var c=a.createClass({displayName:"LoginToWixIframe",render:function(){return a.DOM.iframe({src:i(this.props.siteData,b),ref:"iframe",style:{position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",display:"block",zIndex:1e4}})}});this.iframeFactory=a.createFactory(c)}return this.iframeFactory}function l(){var a=this.aspectSiteApi.getSiteAPI().getSiteData();var b=k.call(this);return b({siteData:a,displayForm:this.isLoginToWixShown})}function m(){if(b.isUndefined(this.isWixSite)){this.isWixSite=this.aspectSiteApi.getSiteAPI().getSiteData().isWixSite()}return this.isWixSite}function n(a){this.aspectSiteApi=a;this.isLoginToWixShown=false;this.registeredToMessage=false;this.iframeFactory=null}n.prototype={getReactComponents:function(){if(this.isLoginToWixShown&&m.call(this)){return[l.call(this)]}return null},isLoggedInToWix:function(){var a=this.aspectSiteApi.getSiteAPI().getSiteData();return g.isSessionValid(a.requestModel.cookie)},logout:function(){var a=this.aspectSiteApi.getSiteAPI().getSiteData();g.logout(a);this.aspectSiteApi.forceUpdate()},openLoginToWixForm:function(a,d,g){if(this.isLoginToWixShown){return}this.isWixSite=true;if(!this.registeredToMessage){this.aspectSiteApi.registerToMessage(this.handlePostMessage.bind(this));this.registeredToMessage=true}var h=c.urlUtils.parseUrl(a).query;this.queryParams=d?h:null;this.postLoginUrl=h.postLogin||f.postLogin;this.postSignupUrl=h.postSignUp||f.postSignUp;var i=this.aspectSiteApi.getSiteAPI().getSiteData();var k=j(g,i);if(k){var l=a.indexOf("?");var m={targetUrl:l!==-1?a.substring(0,l):a};b.assign(m,b.pick(h,["postLogin","postSignUp","loginCompName"]),k);this.aspectSiteApi.reportBI(e.LP_BUTTON_CLICK,m)}this.isLoginToWixShown=true;this.aspectSiteApi.scrollSiteTo(0,0);this.aspectSiteApi.forceUpdate()},handlePostMessage:function(a){a=a.data?a:a.originalEvent;var b=this.aspectSiteApi;switch(a.data){case"onLoad":break;case"onPostLogin":window.location.href=this.postLoginUrl;break;case"onPostSignUp":window.location.href=this.postSignupUrl;break;case"onClose":this.isLoginToWixShown=false;setTimeout(function(){b.forceUpdate()},1e3);break;default:break}}};d.registerSiteAspect("LoginToWix",n);return n});define("core/components/siteAspects/parentFrameAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(){var a=this.aspectSiteApi.getSiteAPI().getSiteData().measureMap;var c=b.get(a,"height.masterPage",0);if(!c||c===this.storedHeight){return}this.storedHeight=c;var d;if(window.parent.postMessage){d=window.parent}else if(window.parent.document.postMessage){d=window.parent.document}if(d&&typeof d!=="undefined"){d.postMessage(c,"*")}}function d(a){this.aspectSiteApi=a;this.storedHeight=0;a.registerToDidLayout(c.bind(this))}a.registerSiteAspect("parentFrame",d);return d});define("core/components/siteAspects/vkPostMessageAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(a){var b;try{b=JSON.parse(a.data)}catch(a){return}d.call(this,b.id,b)}function d(a,c){b.forEach(this._registeredCompIds,function(b){if(a===b){var d=this._siteAPI.getComponentById(b);if(!d){delete this._registeredCompIds[b];return}if(d.onVKPostMessage){d.onVKPostMessage(c)}}}.bind(this))}var e=function(a){a.registerToMessage(c.bind(this));this._siteAPI=a;this._registeredCompIds={};b.bindAll(this,["getData","registerToPostMessage","unRegisterToPostMessage"])};e.prototype={getData:function(){return{}},registerToPostMessage:function(a){this._registeredCompIds[a.props.id]=a.props.id},unRegisterToPostMessage:function(a){delete this._registeredCompIds[a.props.id]}};a.registerSiteAspect("vkPostMessage",e)});define("core/components/siteAspects/packagePickerAspect",["core/core/siteAspectsRegistry","utils"],function(a,b){"use strict";function c(a){var b=window.document.getElementsByTagName("iframe");var c=0;var d=b.length;for(;c<d;c++){if(b[c].src.indexOf(a.origin)===0){return b[c]}}return null}function d(a){var d=c(a);if(d!==null){d.contentWindow.postMessage(window.location.hash,"*")}else{b.log.error("Unable to find premium packagePicker iframe source")}}function e(a){a=a.data?a:a.originalEvent;switch(a.data){case"openUserLoginMessage":this.siteAPI.getSiteAspect("LoginToWix").openLoginToWixForm("https://users.wix.com/wix-users/login/form?postLogin=/upgrade/website",false);break;case"sendHashDataToPremium":d(a);break}}function f(a){this.siteAPI=a;a.registerToMessage(e.bind(this))}f.prototype={setSelected:function(a){this.selectedPackagePickerId=a.props.id;this.siteAPI.forceUpdate()},isPackagePickerSelected:function(a){return this.selectedPackagePickerId&&a.props.id===this.selectedPackagePickerId}};a.registerSiteAspect("PackagePickerAspect",f)});define("core/core/pageItemRegistry",["utils"],function(a){"use strict";var b={Image:function(a,b,c){var d={id:"imageZoomComp",key:"imageZoomComp",styleId:"zoom",dataQuery:"#"+a.id,skin:"wysiwyg.skins.ImageZoomSkin",componentType:"wysiwyg.components.imageZoom"};if(b){d.propertyQuery=b}if(c.isMobileView()){d.skin="wysiwyg.viewer.skins.TouchMediaZoomSlideshow";d.componentType="wysiwyg.viewer.components.TouchMediaZoomSlideshow";d.layout={docked:{top:true,bottom:true}}}else if(c.isMobileDevice()||c.isTabletDevice()){d.skin="wysiwyg.skins.NonOptimizedImageZoomSkin"}return d},PermaLink:function(a,b,c){var d={id:"appPartZoomComp",key:"appPartZoomComp",styleId:"zoom",dataQuery:"#"+a.id,skin:"wysiwyg.skins.AppPartZoomSkin",componentType:"wixapps.integration.components.AppPartZoom"};if(b){d.propertyQuery=b}if(c.isMobileView()){d.skin="wysiwyg.skins.MobileAppPartZoomSkin"}return d}};return{registerPageItem:function(c,d){if(b[c]){a.log.error("page item already registered "+c);return}b[c]=d},getCompStructure:function(a,c,d,e){if(b[a]){return b[a](c,d,e)}return null},clear:function(){b={}}}});define("core/core/pageItemAspect",["lodash","santaProps","core/core/pageItemRegistry","compUtils","core/core/siteAspectsRegistry"],function(a,b,c,d,e){"use strict";function f(b){var c=" ";var d=":";var e={};if(!b){return}var f=b.split(c);a.forEach(f,function(a){var b=a.split(d);if(b[0]&&b[1]){e[b[0]]=b[1]}});return a.isEmpty(e)?b:e}function g(c,e,g,h){var i=c.getFocusedRootId();var j=c.getExistingRootNavigationInfo(i);var k=f(j.pageItemAdditionalData);var l=b.componentPropsBuilder.getCompProps(e,g,i,h);if(a.isPlainObject(k)){var m=c.getDataByQuery(k.galleryId)||k.galleryId;if(m){l.pageItemAdditionalData=m}}else{l.pageItemAdditionalData=k}var n=d.compFactory.getCompClass(e.componentType);return n(l)}function h(a,b){var d=b.getDataByQuery(a.pageItemId);if(!d){return null}var e=f(a.pageItemAdditionalData);var g=e&&e.propertyQuery;var h=c.getCompStructure(d.type,d,g,b);if(!h){return null}return h}function i(a){this._aspectSiteAPI=a}i.prototype={getReactComponents:function(a){var b=this._aspectSiteAPI.getSiteData();var c=b.getExistingRootNavigationInfo(b.getFocusedRootId());var d=h(c,b);if(!d){return null}return[g(b,d,this._aspectSiteAPI.getSiteAPI(),a)]},getComponentStructures:function(){var a=this._aspectSiteAPI.getSiteData();var b=a.getExistingRootNavigationInfo(a.getFocusedRootId());var c=h(b,a);return c?[c]:null}};e.registerSiteAspect("pageItem",i)});define("core/core/nonPageItemZoomAspect",["santaProps","utils","compUtils","core/core/pageItemRegistry","core/core/siteAspectsRegistry"],function(a,b,c,d,e){"use strict";function f(d,e,f){var g=a.componentPropsBuilder.getCompProps(d,e.getSiteAPI(),null,f);var h=b.nonPageItemZoom.getZoomedImageData();g.compData=h;var i=c.compFactory.getCompClass(d.componentType);g.closeFunction=b.nonPageItemZoom.unzoom;g.pageItemAdditionalData=h.galleryData;return i(g)}function g(a){var c=b.nonPageItemZoom.getZoomedImageData();if(c===undefined){return null}var e=d.getCompStructure("Image",c,null,a);delete e.dataQuery;e.compData=c;return e}function h(a){this._aspectSiteAPI=a}h.prototype={getReactComponents:function(a){var b=g(this._aspectSiteAPI.getSiteData());return b&&[f(b,this._aspectSiteAPI,a)]},getComponentStructures:function(){var a=g(this._aspectSiteAPI.getSiteData());return a?[a]:null}};e.registerSiteAspect("nonPageItemZoom",h)});define("core/components/siteAspects/scriptClass",["react","reactDOM"],function(a,b){"use strict";function c(a){return window.loadedScripts&&window.loadedScripts[a.NAME]}function d(a){return'window.loadedScripts = window.loadedScripts || {}; window.loadedScripts["'+a.NAME+'"] = true;'}var e=a.createClass({displayName:"scriptClass",loaded:false,componentDidMount:function(){var a=this.props.scriptData;var d=c(a.script);var e;var f;var g;if(d&&!this.loaded){this.fireCallbacks(a,true)}else{g=this;d=window.document.createElement("script");e=function(){g.fireCallbacks(a,false);g.loaded=true;d.removeEventListener("load",e)};d.addEventListener("load",e);d.src=a.script.SRC;f=b.findDOMNode(this);f.replaceChild(d,f.children[0])}},fireCallbacks:function(a,b){a.callbacks.forEach(function(a){var c=a.context;if(c){a.callback.call(c,{fromCache:b})}else{a.callback({fromCache:b})}});a.callbacks.length=0},render:function(){var b=this.props.scriptData.script;var c="script-"+b.NAME;return a.DOM.div(null,a.DOM.script({id:c,src:b.SRC}),a.DOM.script({dangerouslySetInnerHTML:{__html:d(b)}}))}});return e});define("core/components/siteAspects/externalScriptLoaderAspect",["react","utils","lodash","core/core/siteAspectsRegistry","core/components/siteAspects/scriptClass"],function(a,b,c,d,e){"use strict";var f="v2.4";var g="304553036307597";var h=c.template("//connect.facebook.net/<%= lang %>/sdk.js#xfbml=1&appId=<%= appId %>&version=<%= sdkVersion %>");function i(a){this.siteAPI=a;this.loadedScripts={}}i.prototype={getReactComponents:function(){return c.map(this.loadedScripts,this.getNewScript.bind(this))},loadScript:function(a,b,d){var e=this.loadedScripts[a];var f;var g;if(b){f={callback:b,context:d}}if(e&&f){e.callbacks.push(f)}else{g=this.getScriptDescription(a,b,d);if(c.isFunction(g.actionBefore)){g.actionBefore()}this.loadedScripts[a]={script:g,callbacks:f?[f]:[]};this.siteAPI.forceUpdate()}},unsubscribe:function(a,b){var c=this.loadedScripts[a];var d;if(c){d=c.callbacks;d.some(function(a,c){var e=a.callback===b;if(e){d.splice(c,1);return e}})}},getNewScript:function(b,c){return a.createElement(e,{key:c,ref:c,scriptData:b})},getScriptDescription:function(a,c,d){if(a==="FACEBOOK"){return{NAME:"FacebookSDK",SRC:h({lang:this.getFacebookSdkLanguage(d),sdkVersion:f,appId:g})}}if(a==="GOOGLE"){return{NAME:"GoogleApi",SRC:"//apis.google.com/js/plusone.js",actionBefore:function(){window.___gcfg={lang:b.wixUserApi.getLanguage(d.cookie,d.currentUrl)}}}}},getFacebookSdkLanguage:function(a){var c={en:"en_US",es:"es_ES",pt:"pt_BR",ru:"ru_RU",fr:"fr_FR",de:"de_DE",ja:"ja_JP",ko:"ko_KR",it:"it_IT",pl:"pl_PL",tr:"tr_TR",nl:"nl_NL",sv:"sv_SE",da:"da_DK",no:"nn_NO"};return c[b.wixUserApi.getLanguage(a.cookie,a.currentUrl)]||c.en}};d.registerSiteAspect("externalScriptLoader",i)});define("core/core/SiteMembersAPI",["utils","lodash"],function(a,b){"use strict";var c,d,e,f;var g={POST:"POST",GET:"GET"};var h={login:"/api/member/login",register:"/api/member/register",apply:"/api/member/apply",sendForgotPasswordMail:"/api/member/sendForgotPasswordMail",resetMemberPassword:"/api/member/changePasswordWithMailToken",getMemberDetails:"/api/member",handleOauthToken:"/api/social/token/handle"};var i={};i.initializeData=function(a){f=a.getMetaSiteId();var b=a.getClientSpecMapEntriesByType("sitemembers")[0];d=b&&b.smcollectionId;e=a.serviceTopology.siteMembersUrl;c=a.currentUrl.full};function j(b,c,g){var i=a.ajaxLibrary;var j="?"+a.urlUtils.toQueryString({collectionId:d,metaSiteId:f});var l=e+h.handleOauthToken+j;var m=k(b,c);i.ajax({type:"POST",url:l,data:g,dataType:"json",jsonp:false,success:m,error:c})}function k(a,b){return function(a,b,c){if(c&&!c.errorCode){a(c)}else{b(c.errorCode)}}.bind(this,a,b)}function l(g,h,i,j,k,l,m){var n=a.ajaxLibrary;var o=e+g;h=b.merge(h||{},{collectionId:d,metaSiteId:f});var p={url:o,type:i,data:h,context:this};if(l){b.merge(p.data,{svSession:l,appUrl:c});if(m){p.data.initiator=m;
}}b.assign(p.data,{accept:"json"});b.assign(p,{success:function a(b){if(b&&!b.errorCode){j(b)}else{k(b.errorCode)}},error:k});n.get(p)}i.login=function(a,b,c,d,e){l.call(this,h.login,a,g.POST,b,c,d,e)};i.register=function(a,b,c,d,e){l.call(this,h.register,a,g.POST,b,c,d,e)};i.apply=function(a,b,c,d,e){l.call(this,h.apply,a,g.POST,b,c,d,e)};i.sendForgotPasswordMail=function(a,b,c){l.call(this,h.sendForgotPasswordMail,{email:a.email,returnUrl:a.homePageUrl,lang:a.lang},g.POST,b,c)};i.resetMemberPassword=function(a,b,c){l.call(this,h.resetMemberPassword,a,g.POST,b,c)};i.getMemberDetails=function(a,b,c){l.call(this,h.getMemberDetails+"/"+a,null,g.GET,b,c)};i.handleOauthToken=function(a,b,c){j.call(this,a,b,c)};return i});define("core/util/translations/siteMembersTranslations",[],{de:{SMResetPass_Reset_Succ:"Sie haben Ihr Passwort erfolgreich zurückgesetzt.",SMResetPassMail_confirmation_title:"Bitte prüfen Sie Ihren Posteingang.",SMResetPassMail_confirmation_msg:"Wir haben Ihnen eine E-Mail mit einem Link geschickt, mit dem Sie Ihr Passwort zurücksetzen können.",siteMembersTranslations_Reset_Password_Sucess_Title:"Ihr Passwort wurde geändert.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Sie sind der Besitzer dieser Website und bei Wix.com angemeldet. Bitte melden Sie sich bei Wix.com ab, um die Mitgliederanmeldung zu testen.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Bitte überprüfen Sie Ihren Posteingang",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Beim Abmelden ist etwas schiefgelaufen. Bitte versuchen Sie es noch einmal.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Abmelden nicht erfolgreich",SMApply_Success1:"Vielen Dank! Ihre Anfrage zur Mitgliederanmeldung wurde versandt und wartet auf Bestätigung.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Wir haben Ihnen einen Link per E-Mail geschickt, mit dem Sie Ihr Passwort zurücksetzen können.",SMApply_Success2:"Der Administrator der Website wird Sie per E-Mail informieren ( {0} ), sobald Ihre Anfrage bestätigt wurde. ",SMContainer_OK:"OK",SMResetPass_Continue:"Fortfahren",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fehler beim Abmelden"},en:{SMApply_Success2:"The site administrator will notify you via email ({0}) once your request has been approved",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",SMContainer_OK:"OK",SMResetPassMail_confirmation_title:"Please check your email",SMResetPassMail_confirmation_msg:"We’ve sent you an email with a link that will allow you to reset your password",SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed."},es:{SMResetPass_Reset_Succ:"¡Has restablecido tu contraseña exitosamente!",SMResetPassMail_confirmation_title:"Por favor revisa tu correo",SMResetPassMail_confirmation_msg:"Te hemos enviado un email con un enlace que te permitirá restablecer tu contraseña.",siteMembersTranslations_Reset_Password_Sucess_Title:"Tu contraseña ha cambiado.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Tú eres el dueño de esta página web e iniciaste sesión con Wix.com. Por favor cierra tu sesión en Wix.com para que puedas probar la función Miembros del Sitio.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Por favor revisa tu correo",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Algo falló en el cierre de sesión. Por favor inténtalo de nuevo.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"No se pudo cerrar sesión",SMApply_Success1:"¡Enhorabuena! Tu solicitud de login de miembros fue enviada y su aprobación está pendiente.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Te hemos enviado un email con un enlace para restablecer tu contraseña.",SMApply_Success2:"El administrador de la página web te notificará a través de un email ({0}) una vez que tu solicitud sea aprobada. ",SMContainer_OK:"OK",SMResetPass_Continue:"Continuar",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"El cierre de sesión falló"},fr:{SMResetPass_Reset_Succ:"Vous avez réinitialisé votre mot de passe avec succès",SMResetPassMail_confirmation_title:"Veuillez consulter votre boîte e-mail",SMResetPassMail_confirmation_msg:"Un email avec un lien pour réinitialiser votre mot de passe vous a été envoyé",siteMembersTranslations_Reset_Password_Sucess_Title:"Votre mot de passe a été modifié.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Vous êtes le propriétaire de ce site internet et vous êtes connecté à Wix.com. Veuillez vous déconnecter de Wix.com afin de tester la fonctionnalité Membres du Site.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Veuillez vérifier dans votre boîte e-mail",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Un problème est survenu lors de la déconnexion. Veuillez réessayer.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Échec Déconnexion",SMApply_Success1:"Bravo ! Votre demande de connexion membre a été envoyée et est actuellement en attente d'approbation.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Nous vous avons envoyé un lien pour réinitialiser votre mot de passe.",SMApply_Success2:"L'administrateur du site vous informera par email ({0}) lorsque votre demande aura été approuvée. ",SMContainer_OK:"OK",SMResetPass_Continue:"Continuer",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Échec déconnexion"},it:{SMResetPass_Reset_Succ:"Hai ripristinato con successo la tua password.",SMResetPassMail_confirmation_title:"Ti preghiamo di controllare la tua email",SMResetPassMail_confirmation_msg:"Ti abbiamo inviato un'email con un link che ti permetterà di ripristinare la tua password",siteMembersTranslations_Reset_Password_Sucess_Title:"La tua password è stata cambiata.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Sei il proprietario di questo sito web e hai effettuato l'accesso a Wix.com. Esci da Wix.com per testare la funzionalità Membri del Sito.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Controlla la tua Mail",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Qualcosa è andato storto durante il logout. Ti preghiamo di riprovare.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Non Riuscito",SMApply_Success1:"Successo! La tua richiesta di login membro è stata inviata ed è in attesa di approvazione.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Ti abbiamo inviato una mail con il link per reimpostare la tua password.",SMApply_Success2:"L'amministratore del sito ti notificherà via email( {0} ) una volta che la tua richiesta è stata accettata ",SMContainer_OK:"OK",SMResetPass_Continue:"Continua",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fallimento Logout"},ja:{SMResetPass_Reset_Succ:"パスワードがリセットされました！",SMResetPassMail_confirmation_title:"新着メールをご確認ください",SMResetPassMail_confirmation_msg:"メールのリンクをクリックしてパスワードをリセットしてください。",siteMembersTranslations_Reset_Password_Sucess_Title:"パスワードが変更されました",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"あなたはサイト所有者として Wix.com にログインしています。サイト会員機能をテストするには、Wix.com からログアウトしてください。",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"メールをご確認ください",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"ログアウトできませんでした。もう一度お試しください。",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"ログアウトできませんでした",SMApply_Success1:"会員登録の申請を送信しました。",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"パスワード再設定用のリンクをお送りしました。",SMApply_Success2:"会員登録の承認後、サイト管理者から「{0}」に通知メールが送信されます。 ",SMContainer_OK:"OK",SMResetPass_Continue:"続行",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"ログアウトできませんでした"},ko:{SMResetPass_Reset_Succ:"비밀번호가 성공적으로 변경되었습니다.",SMResetPassMail_confirmation_title:"이메일을 확인해 주세요.",SMResetPassMail_confirmation_msg:"비밀번호 재설정 링크가 이메일로 발송되었습니다.",siteMembersTranslations_Reset_Password_Sucess_Title:"비밀번호 재설정 완료!",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"사용자님은 이 사이트 소유자이며 Wix.com에 로그인되어 있습니다. 사이트 회원 기능을 테스트하려면 Wix.com에서 로그아웃해 주세요.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"이메일을 확인하세요!",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"로그아웃에 문제가 발생했습니다. 다시 시도해 주세요.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"로그아웃에 실패했습니다.",SMApply_Success1:"성공적으로 회원가입 요청이 이루어졌습니다! 현재 회원가입 승인을 기다리고  있습니다.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"비밀번호 재설정 링크를 이메일로 발송했습니다.",SMApply_Success2:"회원가입이 승인되면 이메일로 알려드립니다.",SMContainer_OK:"확인",SMResetPass_Continue:"계속",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"로그아웃 실패"},pl:{SMResetPass_Reset_Succ:"Zresetowanie hasła powiodło się.",SMResetPassMail_confirmation_title:"Sprawdź swój email",SMResetPassMail_confirmation_msg:"Wysłaliśmy email z linkiem, który umożliwi Ci zresetowanie hasła.",siteMembersTranslations_Reset_Password_Sucess_Title:"Twoje hasło zostało zmienione.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Jesteś właścicielem tej witryny i jesteś obecnie zalogowany na Wix.com. Wyloguj się z Wix.com, aby przetestować funkcję Login Członka.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Sprawdź Swój Email",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Coś poszło nie tak przy próbie wylogowania. Spróbuj jeszcze raz.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Wylogowanie Nie Powiodło Się",SMApply_Success1:"Gratulujemy! Twoja prośba o członkostwo została wysłana i czeka na zatwierdzenie.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Wysłaliśmy email z linkiem, który umożliwi ci zresetowanie hasła.",SMApply_Success2:"Administrator powiadomi Cię w emailu,( {0} ) gdy twoja prośba zostanie zatwierdzona. ",SMContainer_OK:"OK",SMResetPass_Continue:"Kontynuuj",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Wylogowanie nie powiodło się"},ru:{SMResetPass_Reset_Succ:"Вы успешно сменили пароль.",SMResetPassMail_confirmation_title:"Пожалуйста, проверьте ваш email",SMResetPassMail_confirmation_msg:"Мы отправили вам ссылку для смены пароля.",siteMembersTranslations_Reset_Password_Sucess_Title:"Пароль успешно изменен.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Чтобы протестировать эту функцию, пожалуйста, выйдите из аккаунта Wix.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Пожалуйста, проверьте ваш email",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Что-то не срослось. Пожалуйста, попробуйте еще раз.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Не получилось выйти",SMApply_Success1:"Отлично! Ваш запрос регистрации отправлен на подтверждение.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Отправили вам ссылку для смены пароля.",SMApply_Success2:"Как только ваш запрос будет подтвержден, администратор сайта отправит вам письмо на {0} ",SMContainer_OK:"OK",SMResetPass_Continue:"Продолжить",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Не удалось выйти"},nl:{SMResetPass_Reset_Succ:"U hebt uw wachtwoord opnieuw ingesteld.",SMResetPassMail_confirmation_title:"Controleer uw e-mailberichten",SMResetPassMail_confirmation_msg:"We hebben u een e-mailbericht gestuurd met een link waarmee u uw wachtwoord opnieuw kunt instellen",siteMembersTranslations_Reset_Password_Sucess_Title:"Uw wachtwoord is gewijzigd.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"U bent de eigenaar van deze website en u bent al ingelogd op Wix.com. Log uit om de functies voor leden van uw website te testen.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Controleer uw e-mailberichten",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Er ging iets fout bij het uitloggen. Probeer het opnieuw.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Uitloggen mislukt",SMApply_Success1:"Uw verzoek om toegang is verzonden en wacht op goedkeuring.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We hebben u een e-mailbericht gestuurd met een link waarmee u uw wachtwoord opnieuw kunt instellen.",SMApply_Success2:"De administrator van de website zal u een e-mailbericht ( {0} ) sturen zodra uw verzoek is goedgekeurd ",SMContainer_OK:"OK",SMResetPass_Continue:"Doorgaan",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Uitloggen mislukt"},tr:{SMResetPass_Reset_Succ:"Şifrenizi yeniden ayarlama başarılı.",SMResetPassMail_confirmation_title:"Lütfen e-postanızı kontrol edin",SMResetPassMail_confirmation_msg:"Size şifrenizi sıfırlamanızı sağlayacak bir bağlantı içeren bir e-posta gönderdik.",siteMembersTranslations_Reset_Password_Sucess_Title:"Şifreniz değiştirildi.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Bu web sitesinin sahibisiniz ve Wix.com'daki oturumuz açık. Lütfen Site Üyelik özelliğini test etmek için Wix.com oturumunuzu kapatın.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Lütfen E-Postanızı Kontrol Edin",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Bu oturum kapatma işlemiyle ilgili bir hata oluştu. Lütfen daha sonra deneyin.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Oturum Kapatma Başarısız",SMApply_Success1:"Başarılı! Üye girişi talebiniz gönderildi ve onay bekliyor.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Sifrenizi yenilemeniz için size bir e-posta gönderdik.",SMApply_Success2:"Talebiniz onaylandığında site yöneticisi size e-posta( {0} ) yoluyla bildirecektir ",SMContainer_OK:"TAMAM",SMResetPass_Continue:"Devam",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Oturum Kapatma Hatası"},sv:{SMResetPass_Reset_Succ:"Du har återställt ditt lösenord.",SMResetPassMail_confirmation_title:"Kontrollera din e-post",SMResetPassMail_confirmation_msg:"Vi har skickat ett mejl med en länk som gör att du kan återställa ditt lösenord",siteMembersTranslations_Reset_Password_Sucess_Title:"Ditt lösenord har ändrats.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du äger den här hemsidan och är inloggad på Wix.com. Logga ut från Wix.com för att testa funktionen sidmedlemmar.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Vänligen kontrollera din e-post",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Något gick fel vid utloggningen. Försök igen.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Kunde inte logga ut",SMApply_Success1:"Klart! Din begäran om medlemsinloggning har skickats och väntar på godkännande.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Vi har skickat ett mejl med en länk som gör att du kan återställa ditt lösenord.",SMApply_Success2:"Sidans administratör meddelar dig via e-post ({0}) så fort din begäran har godkänts  ",SMContainer_OK:"OK",SMResetPass_Continue:"Fortsätt",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Kunde inte logga ut"},pt:{SMResetPass_Reset_Succ:"Você redefiniu sua senha com sucesso.",SMResetPassMail_confirmation_title:"Por favor, verifique seu email",SMResetPassMail_confirmation_msg:"Enviamos um e-mail com um link que lhe permitirá redefinir sua senha",siteMembersTranslations_Reset_Password_Sucess_Title:"Sua senha foi alterada.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Você é o proprietário deste site, e fez login em Wix.com. Por favor, faça logout do Wix.com para testar o recurso de Membros do Site.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Por favor, verifique seu email.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Algo deu errado com este logout. Por favor, tente novamente.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Falha no Logout",SMApply_Success1:"Seu pedido de login foi enviado com sucesso e aguarda aprovação.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Enviamos um email com o link para redefinir sua senha. ",SMApply_Success2:"O administrador do site irá enviar-lhe uma notificação via email( {0} ) assim que o pedido for aprovado ",SMContainer_OK:"OK",SMResetPass_Continue:"Continuar",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Falha no logout"},no:{SMResetPass_Reset_Succ:"Du har nå tilbakestillt passordet.",SMResetPassMail_confirmation_title:"Vennligst sjekk e-posten din",SMResetPassMail_confirmation_msg:"Vi har sendt deg en e-post med en link som vil tillate deg å nullstille passordet ditt",siteMembersTranslations_Reset_Password_Sucess_Title:"Passordet ditt har blitt endret.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du er eier av dette nettstedet, og er logget inn på Wix.com. Logg ut av Wix.com for å teste nettstedets medlemmer-funksjonen.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Vennligst sjekk e-posten din",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Noe gikk galt ved utlogging. Gi det et nytt forsøk.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Mislykket utlogging",SMApply_Success1:"Supert! Din forespørsel om medlemsinnlogging er sendt og venter på godkjenning.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Vi har sendt deg en link for å tilbakestille passordet ditt.",SMApply_Success2:"Nettstedets administrator vil varsle deg via e-post( {0} ) med en gang forespørselen din har blitt godkjent ",SMContainer_OK:"OK",SMResetPass_Continue:"Fortsett",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Feil ved utlogging"},da:{SMResetPass_Reset_Succ:"Du har med succes nulstillet din adgangskode.",SMResetPassMail_confirmation_title:"Tjek venligst dine e-mails",SMResetPassMail_confirmation_msg:"Vi har sendt dig en e-mail med et link, som giver dig mulighed for at nulstille din adgangskode",siteMembersTranslations_Reset_Password_Sucess_Title:"Din adgangskode er blevet ændret.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Du er ejeren af denne hjemmeside, og er logget ind på Wix.com. Venligst log ud af Wix.com for at teste funktionen for hjemmesidemedlemmer.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Kontroller venligst din e-mail",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Noget gik galt ved dit log ud. Prøv venligst igen.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Log ud mislykkedes",SMApply_Success1:"Succes! Din anmodning om medlemslogin er sendt og afventer godkendelse.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Vi har sendt en link til dig via e-mail for at nulstille adgangskoden.",SMApply_Success2:"Hjemmesideadministratoren vil give dig besked via e-mail( {0} ) når din anmodning er blevet godkendt.",SMContainer_OK:"OK",SMResetPass_Continue:"Næste",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Fejl ved log ud"},hi:{SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPassMail_confirmation_title:"कृपया अपनी ई-मेल देखें",SMResetPassMail_confirmation_msg:"हमने आपको ई-मेल से एक लिंक भेजी है जिसके द्वारा आप अपना पासवर्ड दुबारा सेट कर सकेंगे",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",SMApply_Success2:"The site administrator will notify you via email( {0} ) once your request has been approved ",SMContainer_OK:"OK",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure"},zh:{SMResetPass_Reset_Succ:"You’ve successfully reset your password.",SMResetPassMail_confirmation_title:"请查看您的电子邮件",SMResetPassMail_confirmation_msg:"我们已向您发送一封包含链接的电子邮件，供您重置密码。",siteMembersTranslations_Reset_Password_Sucess_Title:"Your password has been changed.",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"You are the owner of this website, and are logged in on Wix.com. Please log out of Wix.com to test the Site Members feature.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Please Check Your Email",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Something went wrong with that logout. Please give it another go.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Logout Unsuccessful",SMApply_Success1:"Success! Your member login request has been sent and is awaiting approval.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"We’ve emailed you a link to reset your password.",SMApply_Success2:"The site administrator will notify you via email( {0} ) once your request has been approved ",SMContainer_OK:"OK",SMResetPass_Continue:"Continue",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Logout failure"},cs:{SMResetPass_Reset_Succ:"Úspěšně jste obnovili své heslo.",SMResetPassMail_confirmation_title:"Zkontrolujte si prosím e-mail",SMResetPassMail_confirmation_msg:"Zaslali jsme vám e-mail s odkazem, který Vám umožní obnovit heslo.",siteMembersTranslations_Reset_Password_Sucess_Title:"Vaše heslo bylo změněno",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE:"Jste vlastníkem této stránky a jste přihlášeni na Wix.com. Abyste mohli otestovat funkce webu z pohledu členů, odhlaste se prosím z Wix.com.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE:"Zkontrolujte si prosím e-mail",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_IN_PROGRESS:"Odhlášení se nezdařilo. Zkuste to prosím znovu.",SITEMEMBERMANGAGER_LOGOUT_MESSAGES_TITLE:"Neúspěšné odhlášení",SMApply_Success1:"Povedlo se! Váš požadavek přihlásit se jako uživatel byl odeslán a čeká na schválení.",siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT:"Na váš e-mail jsme zaslali odkaz pro obnovení hesla.",SMApply_Success2:"Správce webu vás bude informovat prostřednictvím emailu({0}), jakmile bude vaše žádost schválena",SMContainer_OK:"OK",SMResetPass_Continue:"Pokračovat",SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE:"Neúspěšné odhlášení"}});define("core/siteRender/SiteMembersAspect",["lodash","santaProps","utils","compUtils","core/core/siteAspectsRegistry","core/core/SiteMembersAPI","core/bi/events","core/util/translations/siteMembersTranslations","experiment","color"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=c.hashUtils;var l=c.cookieUtils;var m=b.componentPropsBuilder;var n={Login:"login",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword",Notification:"notification",Credits:"credits",PasswordProtected:"enterPassword"};var o=[n.Login,n.SignUp];var p={SiteOwner:"siteowner",SignUp:"register",ResetPasswordEmail:"resetPasswordEmail",ResetPasswordNewPassword:"resetPasswordNewPassword"};var q={Login:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinNew",socialMobileThemeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinSocialMobile",fixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinFixed",socialMobileFixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.memberLoginDialogSkinSocialMobileFixed"},SignUp:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinNew",socialMobileThemeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinSocialMobile",fixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinFixed",socialMobileFixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.signUpDialogSkinSocialMobileFixed"},ResetPasswordEmail:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.requestPasswordResetDialogSkinNew",fixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.requestPasswordResetDialogSkinFixed"},ResetPasswordNewPassword:{themeStyled:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.resetPasswordDialogSkinNew",fixedStyle:"wysiwyg.viewer.skins.dialogs.siteMembersDialogs.resetPasswordDialogSkinFixed"},Notification:{themeStyled:"wysiwyg.viewer.skins.dialogs.notificationDialogSkinNew",fixedStyle:"wysiwyg.viewer.skins.dialogs.notificationDialogSkinFixed"},PasswordProtected:{themeStyled:"wysiwyg.viewer.skins.dialogs.enterPasswordDialogSkinNew",fixedStyle:"wysiwyg.viewer.skins.dialogs.enterPasswordDialogSkinFixed"}};var r={BACKGROUND:11,PRIMARY:15};var s={AA_large:3};var t={SV_SESSION:"svSession",SM_SESSION:"smSession",WIX_CLIENT:"wixClient"};var u={UOU_SITE_MEMBER_PAGE:"UoU_smpage",UOU_LOGIN_BUTTON:"UoU_loginBtn",TPA:"TPA"};var v="en";function w(a,b,c){return{componentType:a,type:"Component",id:b,key:b,skin:c}}function x(){return w("wysiwyg.viewer.components.dialogs.CreditsDialog","creditsDialog","wysiwyg.viewer.skins.dialogs.creditsDialogSkin")}function y(a){return w("wysiwyg.viewer.components.dialogs.NotificationDialog","notificationDialog",E(q.Notification,a))}function z(a){return w("wysiwyg.viewer.components.dialogs.siteMemberDialogs.MemberLoginDialog","memberLoginDialog",E(q.Login,a))}function A(a){return w("wysiwyg.viewer.components.dialogs.siteMemberDialogs.SignUpDialog","signUpDialog",E(q.SignUp,a))}function B(a){return w("wysiwyg.viewer.components.dialogs.siteMemberDialogs.RequestPasswordResetDialog","requestResetPasswordDialog",E(q.ResetPasswordEmail,a))}function C(a){return w("wysiwyg.viewer.components.dialogs.siteMemberDialogs.ResetPasswordDialog","resetPasswordDialog",E(q.ResetPasswordNewPassword,a))}function D(a){return w("wysiwyg.viewer.components.dialogs.EnterPasswordDialog","enterPasswordDialog",E(q.PasswordProtected,a))}function E(a,b){var c=F(b)&&b.isMobileView()&&a.socialMobileThemeStyled&&a.socialMobileFixedStyle;if(!i.isOpen("fallbackStyleDialogs")||G(b)){return c?a.socialMobileThemeStyled:a.themeStyled}return c?a.socialMobileFixedStyle:a.fixedStyle}function F(b){var c=a.get(b.getDataByQuery("masterPage"),["smSettings"],{});return!!(c.socialLoginGoogleEnabled||c.socialLoginFacebookEnabled)}function G(a){var b=a.getColorsMap();var c=b[r.BACKGROUND],d=b[r.PRIMARY];if(c&&d){var e=new j(c).luminosity();var f=new j(d).luminosity();return(Math.max(e,f)+.05)/(Math.min(e,f)+.05)>=s.AA_large}return false}function H(b,c){if(a.isBoolean(c)){return c?n.Login:n.SignUp}var d=b.getDataByQuery("masterPage");var e=a.get(d,["smSettings","smFirstDialogLogin"],false);return e?n.Login:n.SignUp}function I(a,b,c,d){var e=c();var f=K.call(this,e,a,b);d.call(this,f);return J.call(this,e,f)}function J(a,b){b.notClosable=this.notClosable;var c=d.compFactory.getCompClass(a.componentType);return c(b)}function K(a,b,c){var d=m.getCompProps(a,b,null,c);var e=this.dialogToDisplay;d.language=oa[e]&&oa[e].language||oa[this.siteData.siteId].language;d.onCloseDialogCallback=ca.bind(this);return d}function L(a){a.onSubmitCallback=V.bind(this);var b=oa[n.Login]&&oa[n.Login].language||null;a.onTokenMessage=W.bind(this);a.onSwitchDialogLinkClick=T.bind(this,n.SignUp,undefined,b);a.onForgetYourPasswordClick=function(){xa.call(this,g.SITE_MEMBER_CLICKED_FORGOT_PASSWORD);T.call(this,n.ResetPasswordEmail,undefined,b)}.bind(this);a.needLoginMessage=this._showDialogMessage}function M(a){a.onSubmitCallback=X.bind(this);var b=oa[n.SignUp]&&oa[n.SignUp].language||null;a.onTokenMessage=W.bind(this);a.onSwitchDialogLinkClick=T.bind(this,n.Login,undefined,b);a.needLoginMessage=this._showDialogMessage}function N(a){a.onSubmitCallback=Y.bind(this)}function O(b,c,d){var e=m.getCompProps(b,c,null,d);e.onSubmitCallback=$.bind(this);e.notClosable=true;e.language=a.get(this.siteData.currentUrl.query,"lang",v);return J.call(this,b,e)}function P(a){var b=a.language;switch(this.notifcationToDisplay){case n.SignUp:var c=oa[this.siteData.siteId].siteMember;var d=c.details.email;a.title="";a.description=Aa(b,"SMApply_Success1")+" "+Aa(b,"SMApply_Success2").replace("{0}",d);a.buttonText=Aa(b,"SMContainer_OK");break;case n.ResetPasswordEmail:a.title=Aa(b,"siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TITLE");a.description=Aa(b,"siteMembersTranslations_RESET_PASSWORD_CHECKEMAIL_TEXT");a.buttonText=Aa(b,"SMContainer_OK");break;case n.ResetPasswordNewPassword:a.title=Aa(b,"siteMembersTranslations_Reset_Password_Sucess_Title");a.description="";a.buttonText=Aa(b,"SMContainer_OK");a.onButtonClick=ua.bind(this,n.Login,"resetPasswordSuccessNotification");break;case"siteowner":a.title=Aa(b,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_TITLE");a.description=Aa(b,"SITEMEMBERMANGAGER_OWNER_LOGOUT_ACTION_MESSAGE");a.buttonText=Aa(b,"SMContainer_OK");break;default:break}}function Q(a){a.onSubmitCallback=this.handlePasswordEntered.bind(this,this.nextPageInfo)}function R(a){return k.SHA256.b64_sha256(a)}function S(a,b){var c=a.cookieName||t.SM_SESSION;var d=a.sessionToken;var e=a.rememberMe?a.expirationDate:0;l.setCookie(c,d,e,b.currentUrl.hostname,b.getMainPagePath(),false)}function T(a,b,c,d){if(b){this.dialogProcessSuccessCallback=b}if(c){oa[a]={language:c}}if(d){this.onCancelCallback=d}this.dialogToDisplay=a;this.aspectSiteApi.forceUpdate()}function U(a,b){this.notifcationToDisplay=a;this.dialogToDisplay=n.Notification;if(b){oa[n.Notification]={language:b}}this.aspectSiteApi.forceUpdate()}function V(a,b){delete this.dialogToDisplay;var c=l.getCookie(t.SV_SESSION);var d=null;xa.call(this,g.SITE_MEMBER_SUBMIT_BUTTON,{context:b.props.id});f.login(a,fa.bind(this,b),b.setErrorMessageByCode,c,d)}function W(a,b,c,d){delete this.dialogToDisplay;var e=l.getCookie(t.SV_SESSION);var g=ha.bind(this,d,c,b);var h=ia.bind(this,d,c,b);f.handleOauthToken(g,h,{svSession:e,token:a,provider:b,visitorId:this.aspectSiteApi.getSiteAPI().getBiVisitorId(),mode:d.props.id,lang:d.props.language})}function X(b,c){var d=this.siteData.rendererModel.clientSpecMap;var e=a.find(d,{type:"sitemembers"});var h=e.collectionType;var i=l.getCookie(t.SV_SESSION);if(h==="Open"){f.register(b,ja.bind(this,c),c.setErrorMessageByCode,i)}else if(h==="ApplyForMembership"){f.apply(b,la.bind(this,c.props.language),c.setErrorMessageByCode,i)}xa.call(this,g.SITE_MEMBER_SUBMIT_BUTTON,{context:c.props.id})}function Y(a,b){var c=this.siteData.currentUrl.full;xa.call(this,g.SITE_MEMBER_SUBMIT_BUTTON,{context:b.props.id});f.sendForgotPasswordMail({email:a.email,homePageUrl:c,lang:b.props.language},U.bind(this,p.ResetPasswordEmail,b.props.language),b.setErrorMessageByCode)}function Z(){delete this.siteData.currentUrl.query.forgotPasswordToken;U.call(this,p.ResetPasswordNewPassword)}function $(a,b){xa.call(this,g.SITE_MEMBER_SUBMIT_BUTTON,{context:b.props.id});f.resetMemberPassword(a,Z.bind(this),b.setErrorMessageByCode)}function _(b,c){return a.includes(b.rendererModel.passwordProtectedPages,c)}function aa(a,b,c){var d=a.getDataByQuery(b.pageId)&&a.getDataByQuery(b.pageId).pageSecurity;if(!d){return{isAllowed:true,defaultDialog:n.ResetPasswordNewPassword}}if(!qa(a,b.pageId)){if(d.passwordDigest){return{isAllowed:false,defaultDialog:n.PasswordProtected,pageSecurity:d}}if(_(a,b.pageId)){return{isAllowed:false,defaultDialog:n.PasswordProtected,pageSecurity:d}}}if(d.requireLogin&&!c){return{isAllowed:false,defaultDialog:H(a),pageSecurity:d}}return{isAllowed:true,defaultDialog:null}}function ba(b){if(a.has(this.siteData.currentUrl.query,"forgotPasswordToken")){return{isAllowed:aa(this.siteData,b,this.isLoggedIn()).isAllowed,defaultDialog:n.ResetPasswordNewPassword}}return aa(this.siteData,b,this.isLoggedIn())}function ca(b,c,d){this.currentDialog=null;this.dialogToDisplay=null;if(d){xa.call(this,g.SITE_MEMBER_EXIT_DIALOG,{context:b.props.id})}var e=oa[this.siteData.siteId].siteMember;if(a.isFunction(this.onCancelCallback)&&!e.details){this.onCancelCallback()}this.onCancelCallback=null;this.dialogProcessSuccessCallback=null;b.performCloseDialog(function(){this._showDialogMessage=false;if(c){if(this.nextPageInfo){this.aspectSiteApi.navigateToPage(this.nextPageInfo)}else{this.aspectSiteApi.forceUpdate()}}else if(this.nextPageInfo&&this.nextPageInfo.pageId===this.siteData.getCurrentUrlPageId()){da.call(this);
this.aspectSiteApi.navigateToPage({pageId:this.siteData.getMainPageId()})}else{this.aspectSiteApi.forceUpdate()}}.bind(this))}function da(){this.stopShowDialog=true}function ea(){this.stopShowDialog=false}function fa(a,b){ka.call(this,a,b,g.SITE_MEMBER_LOGIN_SUCCESS)}function ga(a,b){a.postMessage({src:"wix-social-login",type:b,action:"revoke"},"*")}function ha(a,b,c,d){var e=d.payload.smSession;var f=d.payload.siteMemberDto;if(e){ka.call(this,a,{payload:e})}else{la.call(this,a.props.language,{payload:f})}ga(b,c)}function ia(a,b,c,d){a.setOuathErrorMessageByCode(d);ga(b,c)}function ja(a,b){ka.call(this,a,b)}function ka(b,c,d){S(c.payload,this.siteData);ma.call(this,function(){var e=oa[this.siteData.siteId].siteMember;e.details=c.payload.siteMemberDto;if(a.isFunction(this.dialogProcessSuccessCallback)){this.dialogProcessSuccessCallback(e.details);this.dialogProcessSuccessCallback=null}ca.call(this,b,true);if(d){this.aspectSiteApi.reportBI(d,{userName:e.details.attribute&&e.details.attribute.name||e.details.email})}}.bind(this))}function la(b,c){var d=oa[this.siteData.siteId].siteMember;d.details=c.payload;if(a.isFunction(this.dialogProcessSuccessCallback)){this.dialogProcessSuccessCallback(d.details);this.dialogProcessSuccessCallback=null}U.call(this,p.SignUp,b)}function ma(a){var b=this.aspectSiteApi.getSiteAspect("dynamicClientSpecMap");b.reloadClientSpecMap(a,true)}function na(a,b,c){this._showDialogMessage=true;this.nextPageInfo=a;if(c&&c.passwordDigest){this._passwordDigest=c.passwordDigest}this.dialogToDisplay=b;if(c){if(c.dialogLanguage){oa[b]={language:c.dialogLanguage}}oa[this.siteData.siteId].language=v}}var oa={};function pa(a){oa[a.siteId]={approvedPasswordPages:[],siteMember:{details:null},language:v}}function qa(b,c){return a.includes(oa[b.siteId].approvedPasswordPages,c)}function ra(a){oa[this.siteData.siteId].approvedPasswordPages.push(a)}function sa(a,b,d,e){var f=this.siteData.serviceTopology.protectedPageResolverUrl;var g={password:a,metaSiteId:this.siteData.getMetaSiteId(),siteId:this.siteData.siteId,pageId:b.pageId};c.ajaxLibrary.ajax({type:"POST",url:f,data:g,dataType:"json",cache:false,contentType:"application/json",success:d,error:e})}function ta(a,b,c){var d=R(a);if(d===this._passwordDigest){b(this.nextPageInfo)}else{c()}}function ua(a,b){xa.call(this,g.SITE_MEMBER_SUBMIT_BUTTON,{context:b});T.call(this,a)}function va(){var b=a.merge({context:this.dialogToDisplay,has_social:!!F(this.siteData)},wa(this.initiatorAppId));xa.call(this,g.SITE_MEMBER_AUTH_DIALOG_OPENED,b);this.initiatorAppId=null}function wa(a){var b={};if(!a){b.initator=u.UOU_SITE_MEMBER_PAGE}else if(a===3){b.initator=u.UOU_LOGIN_BUTTON}else{b.app_id=a;b.initator=u.TPA}return b}function xa(b,c){var d=this.aspectSiteApi.getSiteAPI().getBiVisitorId();this.aspectSiteApi.reportBI(b,a.merge(c||{},{visitor_id:d}))}function ya(){return a.includes(o,this.dialogToDisplay)}function za(b){this.aspectSiteApi=b;this.siteData=b.getSiteData();this.dialogProcessSuccessCallback=null;pa(this.siteData);f.initializeData(this.siteData);this.dialogToDisplay=a.has(this.siteData.currentUrl.query,"forgotPasswordToken")?n.ResetPasswordNewPassword:null}za.prototype={dialogToDisplay:null,notifcationToDisplay:null,nextPageInfo:null,_passwordDigest:null,_showDialogMessage:false,getComponentStructures:function(){var a=function(a){return[a(this.siteData)]}.bind(this);switch(this.dialogToDisplay){case n.Login:return a(z);case n.SignUp:return a(A);case n.ResetPasswordEmail:return a(B);case n.ResetPasswordNewPassword:return a(C);case n.Notification:return a(y);case n.PasswordProtected:return a(D);case n.AdminLogin:return a(D);case n.Credits:return[x()];default:return null}},getReactComponents:function(b){if(this.stopShowDialog){this.stopShowDialog=false;return null}var c=this.aspectSiteApi.getSiteAPI();var d=function(a){return a.bind(null,this.siteData)}.bind(this);var e,f;switch(this.dialogToDisplay){case n.Login:e=L;f=d(z);break;case n.SignUp:e=M;f=d(A);break;case n.ResetPasswordEmail:e=N;f=d(B);break;case n.ResetPasswordNewPassword:var g=d(C)();this.currentDialog=O.call(this,g,c,b);return this.currentDialog;case n.Notification:e=P.bind(this);f=d(y);break;case n.Credits:e=a.noop;f=d(x);break;case n.PasswordProtected:e=Q;f=d(D);break;default:break}if(ya.call(this)){va.call(this)}this.currentDialog=f&&I.call(this,c,b,f,e);return this.currentDialog},isLoggedIn:function(){return!!this.siteData.getSMToken()},showAuthenticationDialog:function(a){this.initiatorAppId=a.appId;var b=H(this.siteData,a.showLoginDialog);T.call(this,b,a.successCallback,a.language,a.cancelCallback)},showCreditsDialog:function(){T.call(this,n.Credits)},getMemberDetails:function(a){var b=oa[this.siteData.siteId].siteMember;if(this.isLoggedIn()&&!b.details){f.getMemberDetails(this.siteData.getSMToken(),function(c){b.details=c.payload;if(a){a(b.details)}this.aspectSiteApi.forceUpdate()}.bind(this),function(){});return null}if(a){a(b.details)}return b.details},isPageAllowed:function(a){if(this.siteData.renderFlags.isPageProtectionEnabled){var b=ba.call(this,a);return b.isAllowed}return true},showDialogOnNextRender:function(a){ea.call(this);var b=ba.call(this,a);if(!this.dialogToDisplay&&!b.isAllowed){this.notClosable=a.pageId===this.siteData.getCurrentUrlPageId()&&a.pageId===this.siteData.getMainPageId();na.call(this,a,b.defaultDialog,b.pageSecurity)}},logout:function(a){var b=oa[this.siteData.siteId].siteMember;if(l.getCookie(t.WIX_CLIENT)&&b.details&&b.details.owner){U.call(this,p.SiteOwner,a)}else{l.deleteCookie(t.SM_SESSION,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath());l.deleteCookie(t.SV_SESSION,this.siteData.currentUrl.hostname,this.siteData.getMainPagePath());ma.call(this,function(){b.details=null;this.notifcationToDisplay=null;this.aspectSiteApi.forceUpdate()}.bind(this))}},forceCloseDialog:function(){da.call(this)},handlePasswordEntered:function(b,c,d){var e=function(){d.setErrorMessage("PasswordLogin_Wrong_Password")};var f=function(a){ca.call(this,d,true);ra.call(this,a.pageId);this.aspectSiteApi.navigateToPage(a);this._passwordDigest=null}.bind(this);if(a.isEmpty(c.password)){return d.setErrorMessage("PasswordLogin_Wrong_Password")}if(_(this.siteData,b.pageId)){sa.call(this,c.password,b,function(a){b.jsonUrls=a.payload.urls;f(b)},e)}else{ta.call(this,c.password,f,e)}}};e.registerSiteAspect("siteMembers",za);function Aa(a,b){return h[a]?h[a][b]:h.en[b]}});define("core/components/siteAspects/windowFocusEventsAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(a,b,c){"use strict";var d=c.stringUtils;var e=["focus","blur"];var f=function(a){this._aspectSiteAPI=a;this._registerToFocusEvents()};f.prototype={_registerToFocusEvents:function(){this._compsRegistry={};a.forEach(e,function(a){this._compsRegistry[a]={};this._aspectSiteAPI.registerToFocusEvents(a,this.propagateFocusEvent.bind(this,a))}.bind(this))},registerToFocusEvent:function(a,b){this._compsRegistry[a][b.props.id]=b.props.id},unregisterFromFocusEvent:function(a,b){delete this._compsRegistry[a][b.props.id]},propagateFocusEvent:function(b){var c=this._compsRegistry[b],e="on"+d.capitalize(b),f;a.forEach(c,function(a){f=this._aspectSiteAPI.getComponentById(a);if(!f){delete this._compsRegistry[b][a]}else if(f[e]){f[e]()}}.bind(this))}};b.registerSiteAspect("windowFocusEvents",f)});define("core/components/siteAspects/windowScrollEventAspect",["lodash","core/core/siteAspectsRegistry","experiment"],function(a,b,c){"use strict";function d(b,c){a.forEach(c,function(a){e(b,a)})}function e(b,c){a.forEach(c,function(c){var d=a.findLast(c.scrollModes,function(a){return a.params.scrollPos<=b});if(d){c.debouncedActivateModeById(d.modeId)}})}function f(a,b,c){var d;var e;return function(f){if(f!==e){e=f;clearTimeout(d);d=setTimeout(function(){a.activateModeById(b,c,e)},50)}}}function g(a){this._aspectSiteAPI=a;this._registeredCompIds={};this._registeredScrollModes={};this._prevScrollPosition={x:0,y:0};this._aspectSiteAPI.registerToSiteReady(function(){a.registerToScroll(this.propagateScrollEvent.bind(this));if(c.isOpen("scrollModes")){a.registerToRenderedRootsChange(this.cleanNonRenderedScrollModes.bind(this))}}.bind(this))}g.prototype={registerToScroll:function(a){this._registeredCompIds[a.props.id]=a.props.id},unregisterToScroll:function(a){delete this._registeredCompIds[a.props.id]},propagateScrollEvent:function(b){var e=this.getScrollDirection(b);if(c.isOpen("scrollModes")){d(b.y,this._registeredScrollModes)}this._prevScrollPosition=b;a.forEach(this._registeredCompIds,function(a){var c=this._aspectSiteAPI.getComponentById(a);if(!c){delete this._registeredCompIds[a]}else if(c.onScroll){c.onScroll(b,e)}}.bind(this))},getScrollDirection:function(a){if(a.y!==this._prevScrollPosition.y){if(a.y>this._prevScrollPosition.y){return"DOWN"}return"UP"}if(a.x!==this._prevScrollPosition.x){if(a.x>this._prevScrollPosition.x){return"RIGHT"}return"LEFT"}},getScrollPosition:function(){return{x:window.pageXOffset||window.document.body.scrollLeft,y:window.pageYOffset||window.document.body.scrollTop}},registerCompScrollModes:function(b,c,d){this._registeredScrollModes[c]=this._registeredScrollModes[c]||{};var e=a.findKey(this._registeredScrollModes,b);if(e&&e!==c){delete this._registeredScrollModes[e][b]}var g=this._aspectSiteAPI;this._registeredScrollModes[c][b]={scrollModes:a.sortBy(d,"params.scrollPos"),debouncedActivateModeById:f(g,b,c)}},clearCompScrollModes:function(b){var c=a.findKey(this._registeredScrollModes,b);if(c){delete this._registeredScrollModes[c][b]}},cleanNonRenderedScrollModes:function(b,d){if(c.isOpen("scrollModes")){this._registeredScrollModes=a.omit(this._registeredScrollModes,d)}}};b.registerSiteAspect("windowScrollEvent",g)});define("core/components/siteAspects/windowResizeEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a;this._registeredCompIds={};this._registeredCompIdsOrientation={};this._aspectSiteAPI.registerToResize(this.propagateResizeEvent.bind(this));this._aspectSiteAPI.registerToOrientationChange(this.propagateOrientationEvent.bind(this))}c.prototype={registerToResize:function(a){this._registeredCompIds[a.props.id]=a.props.id},unregisterToResize:function(a){delete this._registeredCompIds[a.props.id]},registerToOrientationChange:function(a){this._registeredCompIdsOrientation[a.props.id]=a.props.id},unregisterToOrientationChange:function(a){delete this._registeredCompIdsOrientation[a.props.id]},propagateResizeEvent:function(){a.forEach(this._registeredCompIds,function(a){var b=this._aspectSiteAPI.getComponentById(a);if(!b){delete this._registeredCompIds[a]}else if(b.onResize){b.onResize()}}.bind(this))},propagateOrientationEvent:function(){a.forEach(this._registeredCompIdsOrientation,function(a){var b=this._aspectSiteAPI.getComponentById(a);if(!b){delete this._registeredCompIdsOrientation[a]}else if(b.onOrientationChange){b.onOrientationChange()}}.bind(this))}};b.registerSiteAspect("windowResizeEvent",c)});define("core/components/siteAspects/windowClickEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";var c=function(a){this._aspectSiteAPI=a;this._aspectSiteAPI.registerToDocumentClick(this.propagateDocumentClickEvent.bind(this));this._registeredCompIds=[]};c.prototype={registerToDocumentClickEvent:function(b){this._registeredCompIds=a.union(this._registeredCompIds,[b])},unRegisterToDocumentClickEvent:function(b){a.pull(this._registeredCompIds,b)},propagateDocumentClickEvent:function(b){var c="onDocumentClick";a.forEach(this._registeredCompIds,function(a){var d=this._aspectSiteAPI.getComponentById(a);if(d&&d[c]){d[c](b)}}.bind(this))}};b.registerSiteAspect("windowClickEventAspect",c)});define("core/components/siteAspects/windowKeyboardEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";var c={39:"ArrowRight",37:"ArrowLeft",27:"Escape",13:"Enter",32:"Space"};function d(a){this._aspectSiteAPI=a;this._aspectSiteAPI.registerToKeyDown(this.propagateKeyDownSpecificKeyEvent.bind(this));this._aspectSiteAPI.registerToKeyUp(this.propagateKeyboardEvent.bind(this,"KeyUp"));this._registeredCompIds={specificKeysKeyDown:{Escape:[],ArrowRight:[],ArrowLeft:[]},KeyDown:[],KeyUp:[]}}function e(a){return Boolean(c[a.keyCode||a.which])}d.prototype={registerToKeyDownWithFocus:function(a,b){b.addEventListener("focus",function(){this.registerToKeyDown(a)}.bind(this));b.addEventListener("blur",function(){this.unRegisterKeyDown(a)}.bind(this))},registerToEscapeKey:function(a){this._registeredCompIds.specificKeysKeyDown.Escape.push(a.props.id)},registerToArrowRightKey:function(a){this._registeredCompIds.specificKeysKeyDown.ArrowRight.push(a.props.id)},registerToArrowLeftKey:function(a){this._registeredCompIds.specificKeysKeyDown.ArrowLeft.push(a.props.id)},unRegisterKeys:function(b){a.forEach(this._registeredCompIds.specificKeysKeyDown,function(c,d){this._registeredCompIds.specificKeysKeyDown[d]=a.without(this._registeredCompIds.specificKeysKeyDown[d],b.props.id)}.bind(this))},registerToKeyDown:function(a){this._registeredCompIds.KeyDown.push(a.props.id)},unRegisterKeyDown:function(b){this._registeredCompIds.KeyDown=a.without(this._registeredCompIds.KeyDown,b.props.id)},registerToKeyUp:function(a){this._registeredCompIds.KeyUp.push(a.props.id)},unRegisterKeyUp:function(b){this._registeredCompIds.KeyUp=a.without(this._registeredCompIds.KeyUp,b.props.id)},unRegisterAll:function(a){this.unRegisterKeys(a);this.unRegisterKeyDown(a);this.unRegisterKeyUp(a)},propagateKeyDownSpecificKeyEvent:function(b){this.propagateKeyboardEvent("KeyDown",b);var d=c[b.keyCode||b.which];if(a.isEmpty(this._registeredCompIds.specificKeysKeyDown[d])){return}var e=a.last(this._registeredCompIds.specificKeysKeyDown[d]);var f=this._aspectSiteAPI.getComponentById(e);var g="on"+d+"Key";if(!f){this._registeredCompIds.specificKeysKeyDown[d]=a.without(this._registeredCompIds.specificKeysKeyDown[d],e)}else if(f[g]){b.preventDefault();f[g]()}},propagateKeyboardEvent:function(b,c){if(a.isEmpty(this._registeredCompIds[b])||!e(c)){return}a.forEach(this._registeredCompIds[b],function(d){var e=this._aspectSiteAPI.getComponentById(d);var f="on"+b;if(!e){this._registeredCompIds[b]=a.without(this._registeredCompIds[b],d)}else if(e[f]){c.preventDefault();e[f](c)}}.bind(this))}};b.registerSiteAspect("windowKeyboardEvent",d)});define("core/components/siteAspects/windowLocationAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";var c=function(a){this._aspectSiteAPI=a};c.prototype={href:function(a){window.location.href=a}};b.registerSiteAspect("windowLocationAspect",c)});define("core/components/siteAspects/MobileActionsMenuAspect",["santaProps","core/core/siteAspectsRegistry","compUtils"],function(a,b,c){"use strict";function d(a){if(!a.isMobileDevice()||!a.renderFlags.renderMobileActionMenu){return null}var b=a.getSiteMetaData();if(!b||!b.quickActions||!b.quickActions.configuration.quickActionsMenuEnabled){return null}return{id:"MOBILE_ACTIONS_MENU",skin:"wysiwyg.viewer.skins.mobile.MobileActionsMenuSkin",componentType:"wysiwyg.viewer.components.MobileActionsMenu",styleId:"mobileActionsMenu",layout:{position:"static"}}}function e(a){this._siteAspectsSiteAPI=a}e.prototype={getReactComponents:function(b){var e=this._siteAspectsSiteAPI.getSiteData();var f=d(e);if(!f){return null}var g=a.componentPropsBuilder.getCompProps(f,this._siteAspectsSiteAPI.getSiteAPI(),null,b);g.userColorScheme=e.rendererModel.siteMetaData.quickActions.colorScheme;var h=c.compFactory.getCompClass(f.componentType);return[h(g)]},getComponentStructures:function(){var a=d(this._siteAspectsSiteAPI.getSiteData());return a?[a]:null}};b.registerSiteAspect("mobileActionsMenu",e)});define("core/components/siteAspects/addComponentAspect",["lodash","santaProps","core/core/siteAspectsRegistry","compUtils"],function(a,b,c,d){"use strict";function e(a){this._aspectSiteAPI=a;this._componentsToRender={}}e.prototype={addComponent:function(a,b,c){this._componentsToRender[a]={structure:b,props:c};this._aspectSiteAPI.forceUpdate()},deleteComponent:function(a){delete this._componentsToRender[a];this._aspectSiteAPI.forceUpdate()},getComponentStructures:function(){return a.map(this._componentsToRender,"structure")},getReactComponents:function(c){return a.map(this._componentsToRender,function(e){var f=b.componentPropsBuilder.getCompProps(e.structure,this._aspectSiteAPI.getSiteAPI(),null,c);a.assign(f,e.props);var g=d.compFactory.getCompClass(e.structure.componentType);return g(f)}.bind(this))}};c.registerSiteAspect("addComponent",e)});define("core/components/siteAspects/AudioAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(a,b,c){"use strict";var d="AudioAspect";var e=10;var f=e;var g=1.5;var h=10*1e3;function i(b,c){return a.assign({url:k(b.siteAPI.getSiteData().serviceTopology),flashVersion:9,preferFlash:false,useHTML5Audio:true,forceUseGlobalHTML5Audio:false,html5PollingInterval:100,onready:function(){b.soundManagerReady=true}},c||{})}function j(){f=e}function k(a){var c=a.scriptsDomainUrl;if(!b.stringUtils.endsWith(c,"/")){c+="/"}return c+"services/third-party/soundmanager2/V2.97a.20150601/"}function l(a){if(n!==m){a.soundManagerReady=false;a.siteAPI.updateAspectGlobalData(d,{soundManagerOnResetup:true});a.siteAPI.forceUpdate();n=m;m(a)}}function m(a){var b=i(a,{preferFlash:true,useHTML5Audio:false,onready:function(){a.soundManagerReady=true;a.siteAPI.updateAspectGlobalData(d,{soundManagerOnResetup:false});a.siteAPI.forceUpdate()}});a.soundManager.destruct();a.soundManager.reset().setup(b);a.soundManager.beginDelayedInit()}var n=function(a){var b=i(a);a.soundManager.setup(b);setTimeout(function(){o(a)},f)};var o=function(a){if(a.soundManager===null){require(["SoundManager"],function(b){a.soundManager=b.getInstance();o(a)})}else if(a.soundManagerReady){a.siteAPI.forceUpdate();j()}else if(h>f){n(a);f*=g}else{j();b.log.verbose("Failed to setup SoundManager.")}};function p(b){this.siteAPI=b;this.soundManagerReady=false;this.soundManager=null;this.siteAPI.updateAspectGlobalData(d,{nowPlayingComp:"",soundManagerOnResetup:false});a.bindAll(this,a.functionsIn(this))}p.prototype={loadSoundManagerAPI:function(){o(this)},onHTML5ErrorTryToReloadWithFlash:function(){l(this)},createAudioObj:function(a){if(!this.soundManagerReady){this.loadSoundManagerAPI();return false}if(a.id&&this.soundManager.getSoundById(a.id)){this.soundManager.destroySound(a.id)}return this.soundManager.createSound(a)},updatePlayingComp:function(a){if(!this.soundManagerReady){this.loadSoundManagerAPI()}this.siteAPI.updateAspectGlobalData(d,{nowPlayingComp:a.props.id});this.siteAPI.forceUpdate()},updatePausingComp:function(){this.siteAPI.updateAspectGlobalData(d,{nowPlayingComp:""});if(this.soundManagerReady){this.siteAPI.forceUpdate()}}};c.registerSiteAspect(d,p);return p});define("core/components/actionsAspectActions/bgScrubAction",["lodash","animations","utils","core/components/actionsAspectActions/triggerTypesConsts","experiment"],function(a,b,c,d,e){"use strict";var f=c.balataConsts;var g={BackgroundParallax:[f.BALATA,f.MEDIA],BackgroundReveal:[f.BALATA,f.MEDIA],BackgroundZoom:[f.BALATA,f.MEDIA],BackgroundFadeIn:[f.BALATA],BackgroundBlurIn:[f.BALATA,f.MEDIA],SiteBackgroundParallax:[]};function h(a){this._aspectSiteAPI=a;this._siteData=a.getSiteData();this._behaviors=[];this._isEnabled=false;this._animateOnNextTick=false;this._liveSequenceIds=[];this._currentPageBehaviors=[];this._behaviorsUpdated=false;this._viewportHeightUpdated=false}h.prototype=a.create(Object.prototype,{constructor:h,ACTION_TRIGGERS:[d.PAGE_CHANGED,d.PAGE_RELOADED,d.TRANSITION_ENDED,d.SCROLL,d.RESIZE],ACTION_NAME:"bgScrub",_currentScroll:{x:0,y:0},_currentPopupScroll:{x:0,y:0},shouldEnable:function(){var a=typeof window!=="undefined";var b=this._siteData.isTabletDevice();var c=this._siteData.isMobileDevice();var d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){if(this._isEnabled){return}this.initiateBehaviors();this._tickerCallback=this._executeActionOnTick.bind(this);b.addTickerEvent(this._tickerCallback);this._isEnabled=true},disableAction:function(){if(!this._isEnabled){return}this._animateOnNextTick=false;b.removeTickerEvent(this._tickerCallback);this._tickerCallback=null;this.stopAndClearAnimations();this._currentPageBehaviors=[];this._isEnabled=false},isEnabled:function(){return this._isEnabled},executeAction:function(){if(a.isEmpty(this._currentPageBehaviors)){return}this.setAnimationsProgress()},setSequenceProgress:function(a,b,d){var e=d.getSequence(a.sequenceId);if(e){e.progress(b)}else{c.log.error("sequence id %s returned no sequence",a.sequenceId)}},setAnimationsProgress:function(){var b=Math.max(this._currentScroll.y,0);a.forEach(this._liveSequenceIds,function(a){if(this.isComponentInViewport(a.compId,a.parentId)){var c=this._viewportHeight+b-a.componentTop;var d=c/a.maxTravel;this.setSequenceProgress(a,d,this.getComponentParent(a.parentId))}}.bind(this))},getComponentMeasure:function(b){var c=this._siteData.measureMap||{};var d=a.get(c,["height",b],0);var e=a.get(c,["absoluteTop",b],0);return{height:d,top:e}},setSiteMeasure:function(){this._viewportHeight=this._siteData.getScreenHeight();this._siteHeight=this.getSiteHeight()},initiateBehaviors:function(){this._currentPageBehaviors=this.getCurrentPageBehaviors(this._behaviors,this._siteData.getPrimaryPageId())},getComponentParent:function(a){var b;if(a==="masterPage"){b=this._aspectSiteAPI.getMasterPage()}else if(a==="siteBackground"){b=this._aspectSiteAPI.getComponentById("SITE_BACKGROUND")}else{b=this._aspectSiteAPI.getCurrentPage()}return b},isComponentInViewport:function(a,b){if(c.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,b)){return true}var d=this._currentScroll;var e=this._aspectSiteAPI.getCurrentPopupId();if(e&&e===this._aspectSiteAPI.getRootOfComponentId(a)){d=this._currentPopupScroll}return c.viewportUtils.isInViewport(this._aspectSiteAPI,d,a)},getSequenceParams:function(){return{suppressReactRendering:false,forgetSequenceOnComplete:false,paused:true}},getCurrentPageBehaviors:function(b,c){return a.filter(b,function(a){return a.action===this.ACTION_NAME&&(a.pageId===c||a.pageId==="masterPage"||a.pageId==="siteBackground")}.bind(this))},createSequences:function(){var c=false;this._liveSequenceIds=a.map(this._currentPageBehaviors,function(d){var e;var f=d.pageId==="siteBackground";var h=this.getComponentParent(d.pageId);var i=h.sequence();var j=this.getComponentMeasure(d.targetId);var k=b.getProperties(d.name);var l=k.getMaxTravel||a.noop;var m=l(j,this._viewportHeight,this._siteHeight)||this._viewportHeight;var n=d.params||{};n.browserFlags=this._siteData.browserFlags();n.componentTop=j.top;n.componentHeight=j.height;n.viewPortHeight=this._viewportHeight;e=[[d.targetId].concat(g[d.name])];i.add(e,d.name,d.duration,d.delay,n);c=k.shouldDisableSmoothScrolling||c;var o=i.execute(this.getSequenceParams());return{path:e,compId:d.targetId,parentId:d.pageId,behaviorName:d.name,componentTop:f?this._viewportHeight:j.top,componentHeight:j.height,maxTravel:m,sequenceId:o}}.bind(this));if(e.isOpen("DisableSmoothScrolling")){if(c&&this._siteData.browserFlags().shouldDisableSmoothScrolling){var d=this._aspectSiteAPI.getSiteAspect("mouseWheelOverride");d.overrideMouseWheel()}}},handleTrigger:function(a){if(!this._isEnabled){return}this._currentScroll=this._aspectSiteAPI.getSiteScroll();this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll();switch(a){case d.PAGE_CHANGED:case d.TRANSITION_ENDED:this.clearAllAndReload(0);this._animateOnNextTick=true;this._behaviorsUpdated=false;break;case d.PAGE_RELOADED:case d.SCROLL:case d.RESIZE:if(this._behaviorsUpdated||this._viewportHeightUpdated){this.clearAllAndReload(0);this._behaviorsUpdated=false;this._viewportHeightUpdated=false}this._animateOnNextTick=true;break}},_shouldForceResizeEvent:function(){if(this._siteData.getScreenHeight()!==this._viewportHeight){this._viewportHeight=this._siteData.getScreenHeight();this._viewportHeightUpdated=true;this.handleTrigger(d.RESIZE)}},_executeActionOnTick:function(){this._shouldForceResizeEvent();if(!this._animateOnNextTick){return}this.executeAction();this._animateOnNextTick=false},clearAllAndReload:function(a){this.stopAndClearAnimations(a);this.initiateBehaviors();this.setSiteMeasure();this.createSequences()},stopAndClearAnimations:function(b){var c=this._aspectSiteAPI.getSiteAspect("mouseWheelOverride");if(c&&c.releaseMouseWheel){c.releaseMouseWheel()}b=a.isNumber(b)?b:1;a.forEach(this._liveSequenceIds,function(a){var c=this.getComponentParent(a.parentId);if(c.getSequence(a.sequenceId)){c.stopSequence(a.sequenceId,b)}}.bind(this));this._liveSequenceIds=[]},handleBehaviorsUpdate:function(a){this._behaviors=a;this._behaviorsUpdated=true},getSiteHeight:function(){var b=this._aspectSiteAPI;var c=b.getSiteData().measureMap||{};var d=this._siteData.renderFlags;var e=a.get(c,"height.masterPage",0)+(c.siteMarginBottom||0)+(d.extraSiteHeight||0);return e}});return h});define("core/components/actionsAspectActions/baseAction",["lodash","animations","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c){"use strict";function d(b){this._aspectSiteAPI=b;this._siteData=b.getSiteData();this._isEnabled=false;this._triggeredOnce={};a.bindAll(this,a({}).assignIn(this).pickBy(a.isFunction).keys().value())}d.prototype=a.create(Object.prototype,{constructor:d,ACTION_TRIGGERS:[],ACTION_NAME:"BASE_ACTION",ACTIONS_SUPPORTED:["BASE_ACTION"],shouldEnable:function(){var a=typeof window!=="undefined";var b=this._siteData.isTabletDevice();var c=this._siteData.isMobileDevice();var d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){if(this._isEnabled){return}this._triggeredOnce={};this._currentActions={};this._delayActionByTransitionDuration=0;this._executeOnNextTick=[];this.resetActionState();this._tickerCallback=this._executeActionOnTick.bind(this);b.addTickerEvent(this._tickerCallback);this._isEnabled=true},disableAction:function(){if(!this._isEnabled){return}this._executeOnNextTick=[];b.removeTickerEvent(this._tickerCallback);this._tickerCallback=null;this._isEnabled=false;this._delayActionByTransitionDuration=0;this.resetActionState()},isEnabled:function(){return this._isEnabled},triggerActions:function(b,c){var d=this._aspectSiteAPI.getSiteAspect("behaviorsAspect");a.forEach(b,function(a){this._triggeredOnce[a]=true}.bind(this));c=a.defaults(c||{},{action:this.ACTION_NAME});return d.handleActions(a(this._currentActions).pick(b).values().value(),c)},registerPageTransitionDuration:function(a){this._delayActionByTransitionDuration=a},handleBehaviorsUpdate:a.noop,executeAction:a.noop,_executeActionOnTick:function(){if(a.isEmpty(this._executeOnNextTick)){return}var b=this._executeOnNextTick;this._executeOnNextTick=[];a.forEach(b,function(a){a()})},executeOnNextTick:function(b){this._executeOnNextTick=a(this._executeActionOnTick).concat([b]).uniq().value()},handleTrigger:function(b){var d=a.toArray(arguments);switch(b){case c.ACTIONS_ADDED_LAYOUTED:d[1]=a.pickBy(d[1],function(b){return a.includes(this.ACTIONS_SUPPORTED,b.name)}.bind(this));a.assign(this._currentActions,d[1]);break;case c.ACTIONS_REMOVED:d[1]=a.pickBy(d[1],function(b){return a.includes(this.ACTIONS_SUPPORTED,b.name)}.bind(this));this._currentActions=a.omit(this._currentActions,a.keys(d[1]));break}if(this._isEnabled){this.handleActionTrigger.apply(this,d)}},handleActionTrigger:function(){throw"Need to implement handleTrigger in specific actions"},resetActionState:function(){throw"Need to implement resetActionState in specific actions"}});return d});define("core/components/actionsAspectActions/loadAction",["lodash","utils","core/components/actionsAspectActions/baseAction","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c,d){"use strict";function e(){c.apply(this,arguments)}function f(c){return a.pickBy(c,function(a){return a.sourceId===b.siteConstants.SITE_STRUCTURE_ID})}e.prototype=a.create(c.prototype,{constructor:e,ACTION_TRIGGERS:[d.SITE_READY,d.PAGE_RELOADED,d.PAGE_CHANGED,d.DID_LAYOUT,d.ACTIONS_REMOVED,d.ACTIONS_ADDED_LAYOUTED],ACTION_NAME:"load",ACTIONS_SUPPORTED:["load"],shouldEnable:a.constant(true),runAction:function(){var b=a(this._currentActions).omit(a.keys(this._triggeredOnce)).keys().value();this.triggerActions(b)},handleActionTrigger:function(b){switch(b){case d.ACTIONS_REMOVED:this._triggeredOnce=a(this._triggeredOnce).omit(a.keys(arguments[1])).omit(a.keys(f(this._currentActions))).value();break;case d.SITE_READY:case d.PAGE_RELOADED:case d.PAGE_CHANGED:case d.DID_LAYOUT:this.executeOnNextTick(this.runAction)}},resetActionState:a.noop});return e});define("core/components/actionsAspectActions/screenInAction",["lodash","utils","core/components/actionsAspectActions/baseAction","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c,d){"use strict";var e=.2;var f=15/100;function g(){c.apply(this,arguments);this._currentScroll={x:0,y:0};this._currentPopupScroll={x:0,y:0};this._componentsLastViewportState={}}g.prototype=a.create(c.prototype,{constructor:g,ACTION_TRIGGERS:[d.SCROLL,d.RESIZE,d.ACTIONS_ADDED_LAYOUTED,d.ACTIONS_REMOVED,d.DID_LAYOUT],ACTION_NAME:"screenIn",ACTIONS_SUPPORTED:["screenIn","viewportEnter","viewportLeave"],getComponentParent:function(a){return this._aspectSiteAPI.getPageById(a)},isComponentInViewport:function(c,d){var e=this._aspectSiteAPI.getCurrentPopupId()===c.pageId?this._currentPopupScroll:this._currentScroll;d=a.isNumber(d)?d:f;return b.viewportUtils.isAlwaysInViewport(this._aspectSiteAPI,c.sourceId)||b.viewportUtils.isInViewport(this._aspectSiteAPI,e,c.sourceId,d)||this.isChildOfFixedFooter(c.pageId,c.sourceId)},isChildOfFixedFooter:function(a,b){var c=false;var d=this._aspectSiteAPI.getSiteData().measureMap.custom.SITE_FOOTER;if(a==="masterPage"&&d&&d.isFixedPosition){var e=this._aspectSiteAPI.getMasterPage().refs.SITE_FOOTER;c=this.isDescendantOf(e.props.structure,b)}return c},isDescendantOf:function(b,c){if(!b.components){return false}return a.some(b.components,function(a){if(a.id===c){return true}return this.isDescendantOf(a,c)}.bind(this))},runScreenInActions:function(b){var c=a(b).omit(a.keys(this._triggeredOnce)).pickBy(this.isComponentInViewport).keys().value();this.triggerActions(c)},runViewportActions:function(b){var c=a.transform(b,function(b,c){if(a.isUndefined(b[c.sourceId])){b[c.sourceId]=this.isComponentInViewport(c,0)}}.bind(this),{});var d=a(b).pickBy(function(a){var b=this._componentsLastViewportState[a.sourceId];var d=c[a.sourceId];return a.name==="viewportEnter"&d&&!b||a.name==="viewportLeave"&b&&!d}.bind(this)).keys().value();a.assign(this._componentsLastViewportState,c);this.triggerActions(d)},runAction:function(){var b=a.pickBy(this._currentActions,a.matchesProperty("name","screenIn"));var c=a.pickBy(this._currentActions,a.matchesProperty("name","viewportEnter"));var d=a.pickBy(this._currentActions,a.matchesProperty("name","viewportLeave"));var e=a.assign({},c,d);this.runScreenInActions(b);this.runViewportActions(e)},handleActionTrigger:function(b){this._currentScroll=this._aspectSiteAPI.getSiteScroll();this._currentPopupScroll=this._aspectSiteAPI.getCurrentPopupScroll();switch(b){case d.ACTIONS_REMOVED:this._triggeredOnce=a.omit(this._triggeredOnce,a.keys(a.toArray(arguments)[1]));break;case d.DID_LAYOUT:case d.SCROLL:case d.RESIZE:case d.ACTIONS_ADDED_LAYOUTED:case d.PAGE_CHANGED:var c=Math.max(this._delayActionByTransitionDuration-e,0)*1e3;if(c>0){a.delay(function(){this._delayActionByTransitionDuration=0;this.executeOnNextTick(this.runAction)}.bind(this),c)}else{this.executeOnNextTick(this.runAction)}break}},shouldEnable:function(){var a=typeof window!=="undefined";return a},resetActionState:a.noop});return g});define("core/components/actionsAspectActions/modeChangeAction",["lodash","zepto","utils","animations","core/components/actionsAspectActions/triggerTypesConsts","reactDOM"],function(a,b,c,d,e,f){
"use strict";var g={ENTER:c.siteConstants.Animations.Modes.AnimationType.ENTER,LEAVE:c.siteConstants.Animations.Modes.AnimationType.LEAVE,TRANSITION:c.siteConstants.Animations.Modes.AnimationType.TRANSITION};var h={};h[g.ENTER]=g.LEAVE;h[g.LEAVE]=g.ENTER;var i={};i[g.ENTER]="modeIn";i[g.LEAVE]="modeOut";i[g.TRANSITION]="modeChange";var j={"wysiwyg.viewer.components.SiteButton":c.siteConstants.Animations.TransitionType.NO_SCALE,"wysiwyg.viewer.components.WRichText":c.siteConstants.Animations.TransitionType.NO_DIMESIONS};function k(b,c,d){var e=a.get(d,"params.modeIds");switch(d.action){case"modeIn":return b[d.targetId]==="enter"&&a.every(e,function(a){return c[a]===true});case"modeOut":return b[d.targetId]==="leave"&&a.every(e,function(a){return c[a]===false});case"modeChange":return b[d.targetId]==="transition"&&a.every(e,function(b){return!a.isUndefined(c[b])});default:return false}}function l(b,c,d){return a(b).filter(a.partial(k,c,d)).map(function(b){return a.assign({animationType:c[b.targetId]},b)}).keyBy("targetId").value()}function m(a){this._aspectSiteAPI=a;this._siteData=a.getSiteData();this._behaviors=[];this._isEnabled=false;this._animateOnNextTick=false;this._behaviorsById={};this.playingSequences={};this.componentAnimationsInfo={}}m.prototype=a.create(Object.prototype,{constructor:m,ACTION_TRIGGERS:[e.MODE_CHANGED_INIT,e.MODE_CHANGED_EXECUTE],ACTION_NAME:"modeChange",ACTIONS_SUPPORTED:["modeChange","modeIn","modeOut"],shouldEnable:function(){var a=typeof window!=="undefined";var b=this._siteData.isTabletDevice();var c=this._siteData.isMobileDevice();return a&&!b&&!c},enableAction:function(){if(this._isEnabled){return}this._tickerCallback=this._executeActionOnTick.bind(this);d.addTickerEvent(this._tickerCallback);this._isEnabled=true},disableAction:function(){if(!this._isEnabled){return}this._animateOnNextTick=false;d.removeTickerEvent(this._tickerCallback);this._tickerCallback=null;this.stopAndClearAnimations();this.revertHideElementsByAnimationType(this._behaviorsById);this._behaviorsById={};this._isEnabled=false},isEnabled:function(){return this._isEnabled},needToRunPreConditions:function(){return false},_executeActionOnTick:function(){if(!this._animateOnNextTick){return}this._executeAction();this._animateOnNextTick=false},stopAndClearAnimations:function(){this._behaviorsById={};a.forEach(this.playingSequences,function(a,b){var c=this.getComponentPage(a.parentId);c.stopSequence(a.sequence.getId(),1);this.handleSequenceEnded(b,a.parentId,a.type)}.bind(this));a.forEach(this.componentAnimationsInfo,function(a,b){a.hasPendingAnimation=false;this.handleSequenceEnded(b,a.pageId,a.type)}.bind(this))},_executeAction:function(){if(a.isEmpty(this._behaviorsById)){return}a.assign(this.playingSequences,this.playJsAnimations())},executeAction:function(){this.handleTrigger.apply(this,arguments)},clearPlayedBehaviors:function(b){this._behaviorsById=a.omitBy(this._behaviorsById,function(a,c){return b[c]})},convertBehaviorTimingFunctionToCSS:function(a){return c.siteConstants.Animations.TimingFunctions[a]},clearCssTransitionFromNode:function(a){a.css({"transition-property":"","transition-duration":"","transition-delay":"","transition-timing-function":"","-webkit-transition-timing-function":"","-moz-transition-timing-function":"","-o-transition-timing-function":""})},addCssTransitionToNode:function(a,b){var c=this.convertBehaviorTimingFunctionToCSS(a.params.timingFunction);b.css({"transition-property":"background-color, color !important","transition-duration":a.duration+"s !important","transition-delay":a.delay+"s !important","transition-timing-function":c+" !important","-webkit-transition-timing-function":c+" !important","-moz-transition-timing-function":c+" !important","-o-transition-timing-function":c+" !important"})},initCssTransitions:function(){var c=a.filter(this._behaviorsById,{animationType:"transition"});if(!c.length){return}a.forEach(c,function(a){var c=a.targetId;var d=b(this.getComponentNode(a.pageId,c));if(!this.componentAnimationsInfo[c].didCssTransitionStartExecuting){this.componentAnimationsInfo[c].didCssTransitionStartExecuting=true;this.addCssTransitionToNode(a,d)}}.bind(this))},handleSequenceEnded:function(a,c,d){if(d===g.TRANSITION){this.clearCssTransitionFromNode(b(this.getComponentNode(c,a)))}delete this.playingSequences[a];this.notifyAnimationEnded(a)},playJsAnimations:function(){var b={};var c={};a.forEach(this._behaviorsById,function(a){var d=this.getComponentPage(a.pageId);var e=a.targetId;var f=this.playingSequences[e];var g=f&&h[f.type]===a.animationType;var i=f&&f.type===a.animationType;b[e]=true;if(i){return}if(g){this.reverseAnimation(a);return}if(f){d.stopSequence(f.sequence.id)}c[e]={sequence:d.sequence(),parentId:a.pageId,type:a.animationType};this.addAnimationToSequence(a,this.componentAnimationsInfo[a.targetId],c[a.targetId].sequence)}.bind(this));a.forEach(c,this.executeSequenceIfNeeded.bind(this));this.clearPlayedBehaviors(b);return c},reverseAnimation:function(a){var b=a.targetId;var c=this.getComponentPage(a.pageId);var d=this.playingSequences[b];d.type=a.animationType;this.componentAnimationsInfo[b].hasPendingAnimation=false;c.reverseSequence(d.sequence.getId())},executeSequenceIfNeeded:function(a,b){var c=a.sequence;if(c.hasAnimations()){var d=this.componentAnimationsInfo[b].progress;var e=this.handleSequenceEnded.bind(this,b,a.parentId,a.type);this.componentAnimationsInfo[b].hasPendingAnimation=false;c.onCompleteAll(e);c.onReverseAll(e);if(d){c.onInit(function(a){a.progress(1-d)})}c.execute()}},getComponentPage:function(a){return this._aspectSiteAPI.getPageById(a)},getComponentNode:function(a,b){var c=this.getComponentPage(a);var d=c.refs[b];if(d){return f.findDOMNode(d)}return null},addAnimationToSequence:function(a,b,d){var e=this.getComponentPage(a.pageId);var f=a.targetId;if(!e.refs[f]){return null}var h=e.refs[f].props.structure;var i=a.duration;var k=a.delay;if(a.animationType===g.TRANSITION){var l=b.prevLayout;var m=a.name+(j[h.componentType]||c.siteConstants.Animations.TransitionType.SCALE);d.add(f,m,i,k,{from:l})}else{d.add(f,a.name,i,k,a.params,0)}d.add(f,"BaseClear",0,0,{props:"clip,opacity,transform",immediateRender:false});return f},hideElementsByAnimationType:function(b){a.forEach(b,function(a,b){if(d.getProperties(a.name).hideOnStart){var c=this.getComponentNode(a.pageId,b);c.style.visibility="hidden"}}.bind(this))},revertHideElementsByAnimationType:function(b){a.forEach(b,function(b){a.forEach(b,function(a,b){if(d.getProperties(a.name).hideOnStart){var c=this.getComponentNode(a.pageId,b);c.style.visibility=""}}.bind(this))}.bind(this))},initiateBehaviors:function(b,c,d,e,f){this._behaviorsById=a.assign(this._behaviorsById,c);a.forEach(d,function(a,c){var d=this.componentAnimationsInfo[c]=this.componentAnimationsInfo[c]||{};d.pageId=b;d.type=a;d.hasPendingAnimation=true;d.onComplete=f;if(a===g.TRANSITION){d.prevLayout=e[c]}}.bind(this))},handleBehaviorsUpdate:function(a){this._behaviors=a},runJsAnimationsOnNextTick:function(){this._animateOnNextTick=true},runJsAnimationsImmediately:function(){this._executeAction()},notifyAnimationEnded:function(a){if(!this.componentAnimationsInfo[a]||this.componentAnimationsInfo[a].hasPendingAnimation){return}var b={};b[a]=this.componentAnimationsInfo[a].type;var c=this.componentAnimationsInfo[a].onComplete;delete this.componentAnimationsInfo[a];c(b)},handleDidLayout:function(){this._aspectSiteAPI.unRegisterFromDidLayout();var a=this._siteData.getBrowser();if(a&&(a.ie||a.edge||a.safari)){this.runJsAnimationsImmediately()}else{this.runJsAnimationsOnNextTick()}},handleReverseTransitionAnimations:function(b){var c=a.transform(b,function(a,b,c){if(b===g.TRANSITION){a.push(c)}},[]);var d=a.transform(this.playingSequences,function(a,b,c){if(b.type===g.TRANSITION){a.push(c)}},[]);var e=a.intersection(c,d);a.forEach(e,function(a){var b=this.componentAnimationsInfo[a];var c=this.getComponentPage(b.pageId);var d=this.playingSequences[a].sequence.getId();var e=c.getSequence(d);var f=this.getComponentNode(b.pageId,a);b.progress=e.progress();e.set(f,{clearProps:"clip,opacity"});c.stopSequence(d,1);delete this.playingSequences[a]}.bind(this))},handleTrigger:function(b,c){if(!this._isEnabled){if(c&&c.onComplete){c.onComplete(c.componentAnimations)}return}switch(b){case e.MODE_CHANGED_INIT:var d=l(this._behaviors,c.componentAnimations,c.modeChanges);var f=a.pick(c.componentAnimations,a.keys(d));var g=a.omit(c.componentAnimations,a.keys(d));this.initiateBehaviors(c.pageId,d,f,c.transitioningComponentsPrevLayout,c.onComplete);this.handleReverseTransitionAnimations(c.componentAnimations);this.initCssTransitions();c.onComplete(g);break;case e.MODE_CHANGED_EXECUTE:this.hideElementsByAnimationType(this._behaviorsById);this._aspectSiteAPI.registerToDidLayout(this.handleDidLayout.bind(this));break}}});return m});define("core/components/actionsAspectActions/pageTransitionAction",["lodash","animations","utils","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c,d){"use strict";function e(a,b){this._aspectSiteAPI=a;this._siteData=a.getSiteData();this._behaviors=b;this._isEnabled=false;this._nextPageTransition={};this._nextPageBGTransition={};this._nextPageInitialScrollData=null}a.assign(e.prototype,{ACTION_TRIGGERS:[d.PAGE_CHANGED],ACTION_NAME:"pageTransition",shouldEnable:function(){var a=typeof window!=="undefined";var b=this._siteData.isTabletDevice();var c=this._siteData.isMobileDevice();var d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){this._isEnabled=true},disableAction:function(){this._isEnabled=false},isEnabled:function(){return this._isEnabled},executeAction:function(){this.executeTransitions(this._nextPageTransition,this._nextPageBGTransition,this._nextPageInitialScrollData);this._nextPageTransition={};this._nextPageBGTransition={};this._nextPageInitialScrollData=null},handleTrigger:function(b){if(!this._isEnabled&&!a.isEmpty(this._nextPageTransition)){this._nextPageTransition.duration=0;this._nextPageTransition.transitionName="NoTransition"}if(b===d.PAGE_CHANGED){this.executeAction()}},handleBehaviorsUpdate:function(a){this._behaviors=a},registerNextPageTransition:function(a,b,c,d,e,f,g,h){this._nextPageTransition={comp:a,previousRef:b,currentRef:c,transitionName:d,duration:e,delay:f,params:g,callbacks:h}},registerNextBGPageTransition:function(a,b,c,d){this._nextPageBGTransition={comp:a,previousRef:b,currentRef:c,callbacks:d}},registerNextAnchorScroll:function(a){this._nextPageInitialScrollData=a},getNormalizedTransitionDuration:function(a,b){b=b||{};var c=1.2;var d=a;if(b.width){d=a*b.width/b.siteWidth}else if(b.height){d=a*(Math.max(b.height,b.screenHeight)/b.screenHeight)}return Math.min(d,c)},executeTransitions:function(d,e,f){var g=this._aspectSiteAPI;var h=typeof d.params==="function"?d.params():d.params;var i=this.getNormalizedTransitionDuration(d.duration||0,h);var j,k;if(!a.isEmpty(d)){j=d.comp.sequence();k=d.callbacks||{};if(k.onStart){j.onStartAll(k.onStart)}if(k.onInterrupt){j.onInterruptAll(k.onInterrupt)}if(k.onComplete){j.onCompleteAll(k.onComplete)}var l={sourceRefs:d.previousRef,destRefs:d.currentRef};j.add(l,d.transitionName,i,d.delay,h).add([d.previousRef,d.currentRef],"BaseClear",0,0,{props:"opacity,x,y",immediateRender:false}).execute()}if(!a.isEmpty(e)){e.comp.transition(e.previousRef,e.currentRef,d.transitionName,i,d.delay,h,e.callbacks)}var m=g.getSiteData();var n=c.scrollAnchors.calcAnchorScrollToPosition(f,g);f=n.anchorQuery;b.animate("BaseScroll",g.getSiteContainer(),i,d.delay,{x:n.x||0,y:n.y||0,callbacks:{onComplete:function(){var a=this._aspectSiteAPI.getSiteAspect("anchorChangeEvent");if(a){a.setSelectedAnchorAsync(m,f,m.getPrimaryPageId(),c.constants.ACTIVE_ANCHOR.DELAY_TO_END_SCROLL)}}.bind(this)}})}});return e});define("core/components/actionsAspectActions/exitAction",["lodash","animations","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c){"use strict";function d(a){this._aspectSiteAPI=a;this._siteData=a.getSiteData();this._behaviors=[];this._isEnabled=false;this._liveSequenceIds=[];this._animateOnNextTick=false;this._pendingComponentExits=[]}d.prototype=a.create(Object.prototype,{constructor:d,ACTION_TRIGGERS:[c.PAGE_CHANGED,c.PAGE_RELOADED],ACTION_NAME:"exit",shouldEnable:function(){var a=typeof window!=="undefined";var b=this._siteData.isTabletDevice();var c=this._siteData.isMobileDevice();var d=this._siteData.isMobileView();return a&&!b&&!c&&!d},enableAction:function(){if(this._isEnabled){return}this._tickerCallback=this._executeActionOnTick.bind(this);b.addTickerEvent(this._tickerCallback);this._isEnabled=true},disableAction:function(){if(!this._isEnabled){return}this._animateOnNextTick=false;b.removeTickerEvent(this._tickerCallback);this._tickerCallback=null;this.stopAndClearAnimations();var c=a.map(this._pendingComponentExits,"callback");this._pendingComponentExits=[];this._isEnabled=false;a.forEach(c,function(a){a()})},isEnabled:function(){return this._isEnabled},executeAction:function(){if(a.isEmpty(this._pendingComponentExits)){return}var b=this._pendingComponentExits;this._pendingComponentExits=[];a.forEach(b,function(a){this._liveSequenceIds=this._liveSequenceIds.concat(this.playPageAnimations(a.leavingCompIds,a.callback))}.bind(this))},playPageAnimations:function(b,c){var d={};var e={};var f=[];var g=a(this._behaviors).filter(function(c){return c.action===this.ACTION_NAME&&a.includes(b,c.sourceId)}.bind(this)).keyBy("sourceId").value();a.forEach(g,function(a){var b=this.getComponentParent(a.pageId);if(!b.refs[a.sourceId]){return}if(!e[a.pageId]){e[a.pageId]=b.sequence();d[a.pageId]=[]}d[a.pageId].push(this.addAnimationToSequence(a,e))}.bind(this));var h=1;function i(){h--;if(h===0){c()}}a.forEach(e,function(b,c){if(b.hasAnimations()){h++;b.onCompleteAll(i);b.onInterruptAll(i);d[c]=a.compact(d[c]);f.push({parentId:c,sequenceId:b.getId()});b.execute()}});i();return f},getComponentParent:function(a){return this._aspectSiteAPI.getPageById(a)},addAnimationToSequence:function(a,b){var c=b[a.pageId];c.add(a.targetId,a.name,a.duration,a.delay,a.params,0);c.add(a.targetId,"BaseClear",0,0,{props:"clip,opacity,transform",immediateRender:false});return a.targetId},registerComponentsExit:function(a,b){if(this._isEnabled){this._pendingComponentExits.push({leavingCompIds:a,callback:b});this._animateOnNextTick=true}else{b()}},handleTrigger:function(){},handleBehaviorsUpdate:function(a){this._behaviors=a},_executeActionOnTick:function(){if(!this._animateOnNextTick){return}this.executeAction();this._animateOnNextTick=false},stopAndClearAnimations:function(){a.forEach(this._liveSequenceIds,function(a){var b=this.getComponentParent(a.parentId);if(b){b.stopSequence(a.sequenceId,1)}}.bind(this));this._liveSequenceIds=[]}});return d});define("core/components/siteAspects/actionsAspect",["lodash","core/core/siteAspectsRegistry","core/components/actionsAspectActions/bgScrubAction","core/components/actionsAspectActions/loadAction","core/components/actionsAspectActions/screenInAction","core/components/actionsAspectActions/modeChangeAction","core/components/actionsAspectActions/pageTransitionAction","core/components/actionsAspectActions/exitAction","core/components/actionsAspectActions/triggerTypesConsts"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(b){this._aspectSiteAPI=b;this._siteData=b.getSiteData();this._behaviors=[];this._pageTransitionComplete=[];this._isDuringPageTransition=false;this._navigationComplete=[];this._actions={};this._previouslyRegisteredPages=[];this._didFirstLayout=false;this._didPageChange=false;this.registerAction(c);this.registerAction(d);this.registerAction(e);this.registerAction(g);this.registerAction(h);this.registerAction(f);this.enableAction("pageTransition");if(a.get(this._siteData,["renderFlags","componentViewMode"],"preview")==="preview"){this.enableAction("bgScrub");this.enableAction("screenIn");this.enableAction("exit");this.enableAction("load");this.enableAction("modeChange")}this._registerTriggers();b.registerToAddedRenderedRootsDidLayout(k.bind(this))}j.prototype.previewAnimation=function(a,b,c,d){var e=this._aspectSiteAPI.getPageById(b);var f=e.sequence();var g={props:"clip,opacity,transform,transform-origin",immediateRender:false};f.add(a,c.name,c.duration,c.delay,c.params);f.add(a,"BaseClear",0,0,g);if(d){f.onCompleteAll(d)}return f.execute()};j.prototype.previewTransition=function(a,b,c,d,e){var f;if(c==="masterPage"){f=this._aspectSiteAPI.getMasterPage()}else{f=this._aspectSiteAPI.getCurrentPage()}if(f){var g=f.sequence();var h={props:"clip,opacity,transform,transform-origin",immediateRender:false};g.add({sourceRefs:a,destRefs:b},d.name,d.duration,d.delay,d.params);g.add(a.concat(b),"BaseClear",0,0,h);if(e){g.onCompleteAll(e)}return g.execute()}};j.prototype.stopPreviewAnimation=function(a){var b=this._aspectSiteAPI.getMasterPage();var c=this._aspectSiteAPI.getCurrentPopup()||this._aspectSiteAPI.getCurrentPage();c.stopSequence(a,1);b.stopSequence(a,1)};j.prototype.enableAction=function(a){if(this._actions[a]&&this._actions[a].shouldEnable()){this._actions[a].enableAction()}};j.prototype.isActionDisabled=function(a){return this._actions[a]&&!this._actions[a].isEnabled()};j.prototype.needToRunPreConditions=function(a){var b=a.name;return!this._actions[b]||!this._actions[b].needToRunPreConditions||this._actions[b].needToRunPreConditions(a)};j.prototype.disableAction=function(a){if(this._actions[a]){this._actions[a].disableAction()}};j.prototype.executeAction=function(b,c){var d=a.drop(arguments,2);if(this._actions[b]){var e=this._actions[b];e.executeAction.apply(e,[c].concat(d))}};j.prototype.registerBehaviors=function(b,c,d){d=a.isString(d)?JSON.parse(d):d;d=a.map(d,function(d){return a.assign({},d,{pageId:c,sourceId:b,targetId:d&&d.targetId||b})});this.unRegisterBehaviors(b,d,false);this._behaviors=this._behaviors.concat(d);this._propagateBehaviorsUpdate(this._behaviors)};j.prototype.unRegisterBehaviors=function(b,c,d){d=d!==false;this._behaviors=a.reject(this._behaviors,{sourceId:b});if(d){this._propagateBehaviorsUpdate(this._behaviors)}};j.prototype.resetBehaviorsRegistration=function(){this._previouslyRegisteredPages=[];this._behaviors=[];this._propagateBehaviorsUpdate(this._behaviors)};j.prototype.registerNextPageTransition=function(a,b,c,d,e,f,g,h){this._isDuringPageTransition=true;this._actions.pageTransition.registerNextPageTransition(a,b,c,d,e,f,g,h);this._actions.screenIn.registerPageTransitionDuration(e)};j.prototype.registerPageTransitionComplete=function(b){if(a.isFunction(b)){this._pageTransitionComplete.push(b)}};j.prototype.handlePageTransitionComplete=function(b,c){this._aspectSiteAPI.endingPageTransition();this._isDuringPageTransition=false;a.forEach(this._pageTransitionComplete,function(a){a(b,c)});this._pageTransitionComplete=[];this.handleNavigationComplete()};function k(b){if(a.some(b,this._siteData.isPopupPage.bind(this._siteData))){this.handleNavigationComplete()}}j.prototype.registerNavigationComplete=function(b){if(a.isFunction(b)){this._navigationComplete.push(b)}};j.prototype.handleNavigationComplete=function(){if(this._isDuringPageTransition){return}this._aspectSiteAPI.endingPageTransition();a.forEach(this._navigationComplete,function(a){a()});this._navigationComplete=[]};j.prototype.registerNextBGPageTransition=function(a,b,c,d){this._actions.pageTransition.registerNextBGPageTransition(a,b,c,d)};j.prototype.registerNextAnchorScroll=function(a){this._actions.pageTransition.registerNextAnchorScroll(a)};j.prototype.registerComponentsExit=function(a,b){this._actions.exit.registerComponentsExit(a,b)};j.prototype.registerAction=function(b){var c=new b(this._aspectSiteAPI);var d=[].concat(c.ACTIONS_SUPPORTED||c.ACTION_NAME);a.forEach(d,function(a){if(this._actions[a]){throw new Error("Action "+a+" already registered")}if(!a){throw new Error("Action missing it's ACTION_NAME parameter, cannot register it")}this._actions[a]=c}.bind(this))};j.prototype._propagateTrigger=function(b){var c=arguments;a.forEach(this._actions,function(d){if(a.includes(d.ACTION_TRIGGERS,b)){d.handleTrigger.apply(d,c)}})};j.prototype._propagatePageChangeTriggerAfterLayout=function(){if(this._didPageChange||!this._didFirstLayout){var a=this._aspectSiteAPI.getSiteData();var b=a.getExistingRootNavigationInfo(a.getPrimaryPageId());var c=this._aspectSiteAPI.getSiteAspect("siteMembers").isPageAllowed(b);if(c){this._propagateTrigger(i.PAGE_CHANGED)}}this._didPageChange=false;this._propagateTrigger(i.DID_LAYOUT)};j.prototype._enablePageChangeTransitionsAfterLayout=function(){if(!this._didFirstLayout){this._didFirstLayout=true}else{this._didPageChange=true}};j.prototype.reloadPageAnimations=function(){this._propagateTrigger(i.PAGE_RELOADED)};j.prototype._propagateBehaviorsUpdate=function(b){a.forEach(this._actions,function(c){c.handleBehaviorsUpdate(a.cloneDeep(b))})};j.prototype._registerTriggers=function(){this._aspectSiteAPI.registerToSiteReady(this._propagateTrigger.bind(this,i.SITE_READY));this.registerPageTransitionComplete(this._propagateTrigger.bind(this,i.TRANSITION_ENDED));this._aspectSiteAPI.registerToUrlPageChange(this._enablePageChangeTransitionsAfterLayout.bind(this));this._aspectSiteAPI.registerToSiteReady(this._enablePageChangeTransitionsAfterLayout.bind(this));this._aspectSiteAPI.registerToDidLayout(this._propagatePageChangeTriggerAfterLayout.bind(this));this._aspectSiteAPI.registerToScroll(this._propagateTrigger.bind(this,i.SCROLL));this._aspectSiteAPI.registerToResize(this._propagateTrigger.bind(this,i.RESIZE));this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,i.MODE_CHANGED_INIT));this._aspectSiteAPI.registerToModeChange(this._propagateTrigger.bind(this,i.MODE_CHANGED_EXECUTE))};j.prototype.actionsRemoved=function(a){this._propagateTrigger(i.ACTIONS_REMOVED,a)};j.prototype.actionsAddedLayouted=function(a){this._propagateTrigger(i.ACTIONS_ADDED_LAYOUTED,a)};b.registerSiteAspect("actionsAspect",j)});define("core/components/siteAspects/DynamicClientSpecMapAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";var c=typeof window!=="undefined";function d(a){var b=a.replace(/\/$/,"")+"/_api/dynamicmodel";if(c){b=b.replace(/^[^:]+:/,window.location.protocol)}return b}var e=true;function f(a,b,c){var f="error";var g={url:d(a.getExternalBaseUrl()),destination:["dynamicClientSpecMapLoaded"],force:c,cache:e,syncCache:true,transformFunc:function(){return true},callback:function(c,d){f="success";if(d.clientSpecMap){a.rendererModel.clientSpecMap=d.clientSpecMap}if(d.svSession){a.pubSvSession(d.svSession)}if(d.hs){a.setHubSecurityToken(d.hs)}if(d.ctToken){a.setCTToken(d.ctToken)}if(b){b(d)}}};a.store.loadBatch([g],function(){if(f==="error"){b({status:f})}});e=false}function g(a){var b=a.getSiteData();this.reloadClientSpecMap=function(a,c){if(b&&b.isViewerMode()){f(b,a,c)}}}b.registerSiteAspect("dynamicClientSpecMap",g)});define("core/components/siteAspects/dynamicColorsAspect",["core/core/siteAspectsRegistry","lodash"],function(a,b){"use strict";function c(a){var c=this.aspectSiteAPI.getSiteData().measureMap;if(c){return{top:c.absoluteTop[a],left:b.get(c,"custom["+a+"].backgroundLeft",0)+c.absoluteLeft[a],height:c.height[a],width:b.get(c,"custom["+a+"].backgroundWidth",c.width[a])}}return{}}function d(a,c){return!b.isEqual(b.pick(a,["height","top","left","width"]),c)}function e(a){var e=c.call(this,a.id);if(d(a,e)){b.assign(a,e);a.isDirty=true}}function f(){b.forEach(this.colorElementInfo,e.bind(this))}function g(a){b.forEach(a,function(a){delete a.isDirty})}function h(a){b.forEach(this.observers,function(b){b(a)})}function i(){f.call(this);var a=b.filter(this.colorElementInfo,"isDirty");if(a.length){h.call(this,a);g(a)}}function j(a){this.aspectSiteAPI=a;this.colorElementInfo={};this.observers=[];a.registerToDidLayout(i.bind(this))}j.prototype={updateInformation:function(a,c){var d=this.colorElementInfo[a];var f=b.assign({id:a},d,c);e.call(this,f);if(!b.isEqual(f,d)){this.colorElementInfo[a]=f;h.call(this,[f]);g([f])}},getInformation:function(a){if(a){return b.cloneDeep(this.colorElementInfo[a])}return b.cloneDeep(this.colorElementInfo)},registerObserver:function(a){this.observers.push(a)},unregisterObserver:function(a){b.pull(this.observers,a)}};a.registerSiteAspect("dynamicColorElements",j)});define("core/components/siteAspects/SiteVisibilityAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a;this._aspectSiteAPI.registerToSiteReady(function(){this._aspectSiteAPI.registerToVisibilityChange(this.propagateEvent.bind(this))}.bind(this));this.registeredCallbacks={}}c.prototype={propagateEvent:function(){var b=this._aspectSiteAPI.getVisibilityState();a.forEach(this.registeredCallbacks,function(a){a(b)})},register:function(a,b,c){this.registeredCallbacks[a]=b;if(c){b(this._aspectSiteAPI.getVisibilityState())}},unregister:function(b){this.registeredCallbacks=a.omit(this.registeredCallbacks,b)}};b.registerSiteAspect("siteVisibilityChange",c)});define("core/components/siteAspects/ViewportAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";var c=["in","out","while_in"];function d(a,b){return{in:a.in&&b.out,out:a.out&&b.in,while_in:a.in&&b.in}}function e(a){this._aspectSiteAPI=a;this._aspectSiteAPI.registerToSiteReady(function(){this._aspectSiteAPI.registerToScroll(this.propagateEvent.bind(this));this._aspectSiteAPI.registerToResize(this.propagateEvent.bind(this));this._aspectSiteAPI.registerToOrientationChange(this.propagateEvent.bind(this));this._aspectSiteAPI.registerToDidLayout(this.propagateEvent.bind(this))}.bind(this));this.registeredListeners={}}e.prototype={eventTypes:c,propagateEvent:function(){var b=this._aspectSiteAPI.isPopupOpened()?this._aspectSiteAPI.getCurrentPopupScroll():this._aspectSiteAPI.getSiteScroll();a.forEach(this.registeredListeners,a.bind(function(c,e){var f=this._aspectSiteAPI.getSiteData();var g=this.getMeasuresFromMeasureMap(f,e);if(a.isUndefined(g.compAbsTop)||a.isUndefined(g.compHeight)){return}var h=this.getViewportStates(g.compAbsTop,g.compHeight,g.windowHeight,b.y,g.isFixed);var i=d(h,c.previousState);var j=a.some(c.eventTypes,function(a){return i[a]});c.previousState=h;if(j){c.callback(h)}},this))},register:function(a,b,d){this.registeredListeners[a]={callback:b,eventTypes:d||c,previousState:{out:true,in:false}}},unregister:function(b){this.registeredListeners=a.omit(this.registeredListeners,b)},getViewportStates:function(a,b,c,d,e){var f=a+b;var g=d+c;var h=f<d;var i=f>g;var j=a<d;var k=a>g;var l=!(j||k);var m=!(h||i);var n=j&&i;var o=l||m||n;var p=m&&!l;var q=l&&!m;var r=m&&l;var s=0;if(n){s=c}else if(p){s=f-d}else if(q){s=g-a}else if(r){s=b}var t=s/b;var u=s/c;return{in:o,inPartialAbove:p,inPartialBelow:q,inCover:n,inContained:r,out:!o,outAbove:h,outBelow:k,percentVisible:t,percentOfViewport:u,isFixed:!!e}},getMeasuresFromMeasureMap:function(b,c){return{windowHeight:a.get(b,["measureMap","height","screen"]),compAbsTop:a.get(b,["measureMap","absoluteTop",c]),compHeight:a.get(b,["measureMap","height",c]),isFixed:a.get(b,["measureMap","shownInFixed",c])}}};b.registerSiteAspect("viewportChange",e)});define("core/components/siteAspects/videoFileAvailability",["lodash","utils"],function(a,b){"use strict";var c=b.mediaConsts;var d="mp4";function e(a,b){return b.readyQuality===b.qualities[a].quality}function f(a,c,e){return b.urlUtils.joinURL(e,a,c,d,"file."+d)}function g(b,c){var d=a.now()-b.timeStamp;if(d>b.duration*4){return 0}var e=d>b.duration&&d<=b.duration*2?4:8;return Math.max(c,b.duration/e)}function h(a){this.config=a;this.videoAvailabilityCollection=[];this.componentsCallbackCollection={}}h.prototype={register:function(b,c,d,e){this.componentsCallbackCollection[b]={videoId:c.videoId,callback:e};var f=a.find(this.videoAvailabilityCollection,{videoId:c.videoId});if(a.isEmpty(f)){f={videoId:c.videoId,readyQuality:null,testingQuality:d,initialQuality:d,qualities:c.qualities,timeStamp:(new Date).getTime(),duration:c.duration*1e3,timerInterval:0};this.videoAvailabilityCollection.push(f);this.loadDummyVideo(c.videoId,f.testingQuality)}else if(f.readyQuality){this.notifySingleReadyState(this.componentsCallbackCollection[b],f.readyQuality,this.getVideoReadyState(c.videoId))}},unregister:function(b){this.componentsCallbackCollection=a.omit(this.componentsCallbackCollection,b)},getVideoReadyState:function b(d){if(a.isEmpty(d)){return c.availabilityReadyStates.NO_VIDEO}var e=a.find(this.videoAvailabilityCollection,{videoId:d});if(!e||!e.readyQuality){return c.availabilityReadyStates.IN_PROCESS}else if(e.initialQuality===e.readyQuality){return c.availabilityReadyStates.IDLE}return c.availabilityReadyStates.PLAYING_PREVIEW},loadDummyVideo:function a(c,d){b.ajaxLibrary.ajax({url:f(c,d,this.config.headRequestStaticUrl),type:"HEAD",success:function(){this.canPlay(c)}.bind(this),error:function(){this.onError(c)}.bind(this)})},onError:function b(c){var d=a.find(this.videoAvailabilityCollection,{videoId:c});if(d){var f=a.findIndex(d.qualities,{quality:d.testingQuality});var g=f-1;if(typeof window!=="undefined"&&g>=0&&!e(g,d)){d.testingQuality=d.qualities[g].quality;setTimeout(function(){this.loadDummyVideo(c,d.testingQuality)}.bind(this),100)}else{this.resetQualityTest(d,c)}this.notifyReadyState(c)}},canPlay:function b(d){var e=a.find(this.videoAvailabilityCollection,{videoId:d});if(e){e.readyQuality=e.testingQuality;var f=this.getVideoReadyState(d);if(f!==c.availabilityReadyStates.IDLE){this.resetQualityTest(e,d)}this.notifyReadyState(d)}},resetQualityTest:function b(c,d){if(c){c.testingQuality=c.initialQuality;var e=g(c,this.config.videoQualityCheckInterval);if(typeof window!=="undefined"&&e>0){clearTimeout(c.timerInterval);c.timerInterval=setTimeout(function(){this.loadDummyVideo(d,c.testingQuality)}.bind(this),e)}else{c.qualities=a.filter(c.qualities,{quality:c.readyQuality})}}},notifyReadyState:function(b){var c=a.find(this.videoAvailabilityCollection,{videoId:b});if(c){var d=this.getVideoReadyState(b);a.forEach(a.filter(this.componentsCallbackCollection,{videoId:b}),a.bind(function(a){this.notifySingleReadyState(a,c.readyQuality,d)},this))}},notifySingleReadyState:function(a,b,c){a.callback({videoId:a.videoId,mediaQuality:b,readyState:c})}};return h});define("core/components/siteAspects/MediaAspect",["lodash","core/core/siteAspectsRegistry","core/components/siteAspects/videoFileAvailability"],function(a,b,c){"use strict";function d(a){this.aspectSiteAPI=a;this.siteData=a.getSiteData();this.isEnabled=true;this.stateChangeListeners={};var b={videoQualityCheckInterval:5e3,headRequestStaticUrl:this.siteData.getStaticVideoHeadRequestUrl()};this.fileAvailabilityUtil=new c(b)}d.prototype={getData:function(b){return a.clone(a.get(this.siteData.mediaStore,[b],{}))},getQualityData:function(b){return a.clone(a.get(this.siteData.mediaQualityStore,[b],{}))},updatePlayerState:function(b,c){var d=a.assign(this.getData(b),c);a.set(this.siteData.mediaStore,[b],d);this.notifyStateChange(b)},updateQualityState:function(b,c){var d=a.assign(this.getQualityData(b),c);a.set(this.siteData.mediaQualityStore,[b],d)},removePlayerState:function(b){this.siteData.mediaStore=a.omit(this.siteData.mediaStore,b);this.notifyStateChange(b)},registerPlayer:function(b,c){c=c||{};this.updatePlayerState(b,{playerType:c.playerType||"none",duration:a.get(c,["mediaData","duration"],0)});this.registerPlayerServices(b,c.mediaData,c.services)},unregisterPlayer:function(a){this.removePlayerState(a);this.unregisterPlayerServices(a)},registerPlayerServices:function(a,b,c){c=c||{};if(c.viewport){this.aspectSiteAPI.getSiteAspect("viewportChange").register(a,c.viewport.callback,c.viewport.eventTypes)}if(c.visibility){this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").register(a,c.visibility.callback)}if(c.fileAvailability){this.fileAvailabilityUtil.register(a,b,c.fileAvailability.mediaQuality,c.fileAvailability.callback)}},unregisterPlayerServices:function(a){this.aspectSiteAPI.getSiteAspect("siteVisibilityChange").unregister(a);
this.aspectSiteAPI.getSiteAspect("viewportChange").unregister(a);this.fileAvailabilityUtil.unregister(a)},registerStateChange:function(b,c,d){a.set(this.stateChangeListeners,[c,b],d);var e=this.getData(c);if(e){d(e)}},unregisterStateChange:function(b,c){this.stateChangeListeners[c]=a.omit(this.stateChangeListeners[c],b);if(a.isEmpty(this.stateChangeListeners[c])){this.stateChangeListeners=a.omit(this.stateChangeListeners,c)}},notifyStateChange:function(b){a.forEach(this.stateChangeListeners[b],a.bind(function(a){a(this.getData(b))},this))}};b.registerSiteAspect("mediaAspect",d);return d});define("core/components/siteAspects/touchEventsAspect",["lodash","core/core/siteAspectsRegistry","utils"],function(a,b,c){"use strict";var d=c.stringUtils;var e={};var f=["touchstart","touchmove","touchend","touchcancel"];var g;function h(a){g=a;i()}function i(){f.forEach(function(a){e[a]={};g.registerToWindowTouchEvent(a,j)},this)}function j(b){var c=b.type.slice("touch".length);var f="WindowTouch"+d.capitalize(c);var h=e[b.type];var i="on"+f;var j;a.forEach(h,function(a){j=g.getComponentById(a);if(!j){delete h[a]}else if(j[i]){j[i](b)}})}h.prototype={registerToWindowTouchEvent:function(a,b){e[a.toLowerCase()][b.props.id]=b.props.id},unregisterFromWindowTouchEvent:function(a,b){delete e[a.toLowerCase()][b.props.id]}};b.registerSiteAspect("windowTouchEvents",h)});define("core/components/siteAspects/anchorLinkChangeEventAspect",["lodash","utils","core/core/siteAspectsRegistry"],function(a,b,c){"use strict";function d(a){this._aspectSiteAPI=a;this._registeredCompCallbacks={};this._activeAnchor=null;a.registerToScroll(this.onScroll.bind(this))}function e(c,d,e){e=e||c.getPrimaryPageId();var f=b.scrollAnchors.getPageAnchors(c,e);var g=b.scrollAnchors.getSortedAnchorsByY(c,f);return a.find(g,{id:d.replace("#","")})}function f(a,b,c){if(b){var d=e(a,b,c);if(d){this._activeAnchor={activeAnchorComp:d};this.propagateAnchorChangeEvent()}}}d.prototype={registerToAnchorChange:function(a){if(a.onAnchorChange){this._registeredCompCallbacks[a.props.id]=a.onAnchorChange}},unregisterToAnchorChange:function(a){delete this._registeredCompCallbacks[a.props.id]},onScroll:function(c){if(!a.isEmpty(this._registeredCompCallbacks)){var d=this._aspectSiteAPI.getSiteData();var e=b.scrollAnchors.getActiveAnchor(d,c.y);if(this._activeAnchor===null&&!!e||this._activeAnchor&&e&&this._activeAnchor.activeAnchorComp.id!==e.activeAnchorComp.id){this._activeAnchor=e;this.propagateAnchorChangeEvent()}}},setSelectedAnchorAsync:function(a,b,c,d){if(b){b=b.replace("#","");setTimeout(f.bind(this,a,b,c),d)}},getActiveAnchor:function(){return this._activeAnchor},propagateAnchorChangeEvent:function(){a.forEach(this._registeredCompCallbacks,function(a){a(this._activeAnchor)}.bind(this))}};c.registerSiteAspect("anchorChangeEvent",d)});define("core/components/siteAspects/siteScrollingBlockerAspect",["core/core/siteAspectsRegistry","lodash","zepto"],function(a,b,c){"use strict";function d(){this._blockersList=[];this._scrollCorrection=undefined;this._mediaZoomScrollCorrection=undefined;this._mediaZoomMarginCorrection=undefined}function e(){this._scrollCorrection=window.scrollY}function f(){window.scrollTo(0,this._scrollCorrection)}function g(){e.call(this);c("html").css({marginTop:-Math.max(.5,window.scrollY)+"px"}).addClass("blockSiteScrolling")}function h(){c("html").removeClass("blockSiteScrolling").css({marginTop:""});f.call(this)}d.prototype={setSiteScrollingBlocked:function(a,c){var d=b.head(this._blockersList);this._blockersList=c?b(this._blockersList).concat(a).uniq().value():b.without(this._blockersList,a);var e=b.head(this._blockersList);if(d===e){return}(e?g:h).call(this)},isSiteScrollingBlocked:function(){return!!b.size(this._blockersList)},enterMediaZoomMode:function(){this._mediaZoomMarginCorrection=c("html").css("margin-top");this._mediaZoomScrollCorrection=window.scrollY;c("html").addClass("media-zoom-mode").css({marginTop:""})},exitMediaZoomMode:function(){c("html").removeClass("media-zoom-mode").css({marginTop:this._mediaZoomMarginCorrection});window.requestAnimationFrame(function(){window.scrollTo(0,this._mediaZoomScrollCorrection)}.bind(this))}};a.registerSiteAspect("siteScrollingBlocker",d)});define("core/components/siteAspects/SlideShowComponentAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a;this.callbacks=[]}c.prototype={reportSlideChange:function(a){this._aspectSiteAPI.notifyAspects("slideChange",a);var b=this.callbacks.shift();if(b){b()}},registerOnSlideChangeComplete:function(a){if(a){this.callbacks.push(a)}}};b.registerSiteAspect("SlideShowComponentAspect",c);return c});define("core/components/siteAspects/mouseWheelOverrideAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a;this._isOverride=false}function d(a){if(typeof window==="undefined"){return}a.preventDefault();window.scrollBy(0,-a.wheelDelta/2)}c.prototype={overrideMouseWheel:function(){var a=window.document.body;if(this._isOverride){return}if(a.onwheel!==undefined){a.addEventListener("wheel",d)}else if(a.onmousewheel!==undefined){a.addEventListener("mousewheel",d)}else{return}this._isOverride=true},releaseMouseWheel:function(){var a=window.document.body;a.removeEventListener("wheel",d);a.removeEventListener("mousewheel",d);this._isOverride=false},isOverride:function(){return this._isOverride}};b.registerSiteAspect("mouseWheelOverride",c)});define("core/components/siteAspects/svSessionChangeEventAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a;this._registeredComps={};a.registerToSvSessionChange(this.notifySessionChanged.bind(this))}c.prototype={registerToSessionChanged:function(a){this._registeredComps[a.props.id]=a},unRegisterToSessionChanged:function(a){delete this._registeredComps[a.props.id]},notifySessionChanged:function(b){a.forEach(this._registeredComps,function(a){a.sendPostMessage({intent:"addEventListener",eventType:"SESSION_CHANGED",params:{userSession:b}})})}};b.registerSiteAspect("svSessionChangeEvent",c)});define("core/components/siteAspects/htmlPostMessageAspect",["lodash","core/core/siteAspectsRegistry","core/components/siteAspects/behaviorsService"],function(a,b,c){"use strict";var d=function(b){b.registerToMessage(this.handleMessage.bind(this));this.siteAPI=b;this.callbacks={};this.components={};this.queue={};a.bindAll(this,["handleMessage","registerComponent","unRegisterComponent","postMessage"])};function e(){if(a.size(this.queue)>0){a.forEach(this.queue,function(b,d){var e=this.siteAPI.getRuntimeDal().getActionsAndBehaviors(d);c.handleBehaviors(this.siteAPI,a.map(e,"behavior"),b,"widget");delete this.queue[d]}.bind(this))}}d.prototype={handleMessage:function(b){a.forEach(this.components,function(d,f){if(b.source===d){var g=this.siteAPI.getRuntimeDal().getActionsAndBehaviors(f);if(a.size(g)===0){this.queue[f]=b}else{e.call(this);c.handleBehaviors(this.siteAPI,a.map(g,"behavior"),b,"widget")}}}.bind(this))},registerComponent:function(a,b){this.components[a]=b},unRegisterComponent:function(a){delete this.components[a]},postMessage:function(a,b){var c=this.components[a];if(c){c.postMessage(b,"*")}}};b.registerSiteAspect("HtmlPostMessageAspect",d);return d});define("core/components/siteAspects/siteMetadataChangeAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(a){this._aspectSiteAPI=a;this._registeredComps={};a.registerToSiteMetadataChange(this.notifySiteMetadataChanged.bind(this))}c.prototype={registerToSiteMetadataChange:function(a){this._registeredComps[a.props.id]=a},unRegisterToSiteMetadataChange:function(a){delete this._registeredComps[a.props.id]},notifySiteMetadataChanged:function(b){a.forEach(this._registeredComps,function(a){a.sendPostMessage({intent:"addEventListener",eventType:"SITE_METADATA_CHANGED",params:b})})}};b.registerSiteAspect("siteMetadataChangeAspect",c)});define("core/components/siteAspects/popupPageAspect",["lodash","core/core/siteAspectsRegistry"],function(a,b){"use strict";function c(b){this._aspectSiteAPI=b;this._registeredCloseHandlers={};a.bindAll(this,["registerCloseHandler","unregisterCloseHandler","closePopupPage","openPopupPage"])}c.prototype={registerCloseHandler:function(a,b){this._registeredCloseHandlers[a]=b},unregisterCloseHandler:function(b){this._registeredCloseHandlers=a.omit(this._registeredCloseHandlers,b)},closePopupPage:function(){var b=this._aspectSiteAPI.getCurrentPopupId();if(!b){return}this._aspectSiteAPI.closePopupPage();if(a.isFunction(this._registeredCloseHandlers[b])){this._registeredCloseHandlers[b].apply(this,arguments);this.unregisterCloseHandler(b)}},openPopupPage:function(a){this._aspectSiteAPI.openPopupPage(a)}};b.registerSiteAspect("PopupPageAspect",c);return c});define("core/components/siteAspects/aspectsCollector",["core/core/siteAspectsRegistry","core/components/siteAspects/BehaviorsAspect","core/components/siteAspects/animationsAspect","core/components/siteAspects/DesignDataChangeAspect","core/components/siteAspects/loginToWixAspect","core/components/siteAspects/parentFrameAspect","core/components/siteAspects/vkPostMessageAspect","core/components/siteAspects/packagePickerAspect","core/core/pageItemAspect","core/core/nonPageItemZoomAspect","core/components/siteAspects/externalScriptLoaderAspect","core/siteRender/SiteMembersAspect","core/components/siteAspects/windowFocusEventsAspect","core/components/siteAspects/windowScrollEventAspect","core/components/siteAspects/windowResizeEventAspect","core/components/siteAspects/windowClickEventAspect","core/components/siteAspects/windowKeyboardEventAspect","core/components/siteAspects/windowLocationAspect","core/components/siteAspects/MobileActionsMenuAspect","core/components/siteAspects/addComponentAspect","core/components/siteAspects/AudioAspect","core/components/siteAspects/actionsAspect","core/components/siteAspects/DynamicClientSpecMapAspect","core/components/siteAspects/dynamicColorsAspect","core/components/siteAspects/SiteVisibilityAspect","core/components/siteAspects/ViewportAspect","core/components/siteAspects/MediaAspect","core/components/siteAspects/touchEventsAspect","core/components/siteAspects/anchorLinkChangeEventAspect","core/components/siteAspects/siteScrollingBlockerAspect","core/components/siteAspects/SlideShowComponentAspect","core/components/siteAspects/mouseWheelOverrideAspect","core/components/siteAspects/svSessionChangeEventAspect","core/components/siteAspects/htmlPostMessageAspect","core/components/siteAspects/siteMetadataChangeAspect","core/components/siteAspects/popupPageAspect"],function(a,b,c,d){"use strict";a.registerSiteAspect("behaviorsAspect",b);a.registerSiteAspect("animationsAspect",c);a.registerSiteAspect("designDataChangeAspect",d)});define("core/components/behaviorHandlers/prefetchPagesBehaviorHandler",["lodash"],function(a){"use strict";var b=function(b,c){var d=c.getSiteData();var e=d.getPagesDataItems();var f=b.params.prefetchFilters;var g=a(e).filter(function(b){return a.every(f,function(c,d){return a.includes(c,b[d])})}).map("id").value();if(a.isEmpty(g)){return}var h=c.getSiteDataAPI();var i=0;a.forEach(g,function(a){var b={pageId:a};h.loadPage(b,function(){++i;if(i===g.length){d.addPrefetchPages(g);c.forceUpdate()}})})};var c=function(){return true};return{prefetchPages:b,isEnabled:c}});define("core/components/behaviorHandlers/siteBehaviorHandler",["lodash","utils","core/components/behaviorHandlers/prefetchPagesBehaviorHandler"],function(a,b,c){"use strict";function d(){function a(a){return a.renderFlags.componentViewMode==="editor"}function b(a,b){var c=a.getRuntimeDal();return c.hasBeenPopupOpened(b)}function c(c,d,e){var f=e.targetId;if(c.isZoomOpened()){return false}if(a(d)){return false}if(b(c,f)||c.isPopupOpened()){return false}if(d.isMobileView()){return Boolean(e.params.openInMobile)}return Boolean(e.params.openInDesktop)}function d(a){return 1e3*(a.params.delay||0)}var e;return function a(b,f){clearTimeout(e);var g=f.getSiteData();if(!c(f,g,b)){return}e=setTimeout(function a(d){var e=g.getPrimaryPageId()!==d;if(e){return}if(c(f,g,b)){f.getSiteAspect("PopupPageAspect").openPopupPage(b.targetId)}},d(b),g.getPrimaryPageId())}}function e(){return true}function f(){return{default:function a(c){b.log.error("Invalid behavior",c)},openPopup:d(),prefetchPages:c.prefetchPages}}function g(){return{default:function a(c){b.log.error("Invalid behavior",c)},openPopup:e,prefetchPages:c.isEnabled}}var h;var i;return{handle:function b(c,d){h=h||f();a.forEach(c,function(a){var b=h[a.name]||h.default;b(a,d)})},isEnabled:function(a,b){i=i||g();var c=i[a.name]||i.default;return c(b)}}});define("core/siteRender/siteBehaviorsRegistrar",["core/components/behaviorHandlers/behaviorHandlersFactory","core/components/behaviorHandlers/siteBehaviorHandler"],function(a,b){"use strict";a.registerHandler("site",b)});define("core/core/siteHooks/pageLoadHooks",["experiment","core/core/site"],function(a,b){"use strict";b.hooks.registerHook(b.hooks.types.PAGE_LOADED_FIRST_RENDER,function(b,c){if(a.isOpen("sv_platform1")&&!b.rendererModel.previewMode){c.preInitWidgets(b,b.currentUrl.full)}});b.hooks.registerHook(b.hooks.types.PAGE_LOADED,function(b,c){var d=b.getSiteData();var e=d.getFocusedRootId()!==c.pageId;var f=d.getFocusedRootId()!==b.getCurrentPopupId();var g=a.isOpen("sv_dpages")&&c.routerDefinition;if(a.isOpen("sv_platform1")&&(e||!e&&g)&&f){b.getSiteAspect("WidgetAspect").initApps([c.pageId])}})});define("core",["utils","core/core/site","core/siteRender/compRegistrar","core/siteRender/styleCollector","core/core/dataRequirementsChecker","core/core/siteAspectsRegistry","core/components/animationsMixin","core/components/baseCompMixin","core/components/skinBasedComp","core/components/inputFocusMixin","core/components/runTimeCompData","core/components/blockOuterScrollMixin","core/components/optionInput","core/components/skinInfo","core/core/SiteDataAPI","core/siteRender/SiteAPI","core/core/data/RuntimeDal","core/components/util/galleryPagingCalculations","core/components/util/boxSlideShowCommon","core/components/mediaZoomWrapperMixin","core/components/galleryImageExpandedActionMixin","core/components/util/matrixAnimationManipulation","core/components/uniquePageIdMixin","core/siteRender/WixSiteHeadRenderer","core/activities/activityTypes","core/activities/activityService","core/siteRender/SiteAspectsSiteAPI","core/bi/events","core/components/wixTransitionGroup","core/components/wixTransitionItem","core/components/behaviorHandlers/behaviorHandlersFactory","core/components/siteAspects/behaviorsService","core/core/data/pointers/pointers","core/siteRender/WixSiteReact","core/components/fullScreenOverlay/fullScreenOverlay","core/bi/errors","core/components/compStateMixin","core/components/compActionMixin","core/components/siteAspects/animationsService","core/core/ObservableSiteData","core/core/data/ViewerDisplayedJsonUpdater","core/components/siteAspects/aspectsCollector","core/components/siteAspects/AudioAspect","core/siteRender/siteBehaviorsRegistrar","core/core/siteHooks/pageLoadHooks"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O){"use strict";return{SiteData:N,SiteDataAPI:o,SiteAPI:p,RuntimeDal:q,MobileDeviceAnalyzer:a.MobileDeviceAnalyzer,renderer:b,WixSiteHeadRenderer:x,compRegistrar:c,styleCollector:d,dataRequirementsChecker:e,siteAspectsRegistry:f,compMixins:{intervalsMixin:a.timerMixins.intervalsMixin,timeoutsMixin:a.timerMixins.timeoutsMixin,skinBasedComp:i,inputFocusMixin:j,runTimeCompData:k,animationsMixin:g,optionInput:m,skinInfo:n,mediaZoomWrapperMixin:t,galleryImageExpandedActionMixin:u,baseCompMixin:h.baseComp,postMessageCompMixin:a.postMessageCompMixin,uniquePageIdMixin:w,blockOuterScrollMixin:l,compActionMixin:L,compStateMixin:K},componentUtils:{fullScreenOverlay:I,galleryPagingCalculations:r,matrixAnimationManipulation:v,boxSlideShowCommon:s},activityTypes:y,activityService:z,SiteAspectsSiteAPI:A,behaviorHandlersFactory:E,behaviorsService:F,wixTransitionGroup:C,wixTransitionItem:D,biEvents:B,DataAccessPointers:G.DataAccessPointers,PointersCache:G.PointersCache,pointerGeneratorsRegistry:G.pointerGeneratorsRegistry,SimpleDisplayedJsonUpdater:O,forTests:{WixSiteReact:H},errors:J,animationsService:M}});